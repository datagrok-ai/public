/*! For license information please see escher.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.escher=t():e.escher=t()}(self,(()=>(()=>{var e={33:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".escher-container .picker {\n  top: 35px;\n  margin-left: -7px;\n  position: absolute;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .pickerBox {\n  position: absolute;\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.375);\n  width: 14px;\n  height: 35px;\n  top: -35px\n}\n\n.escher-container .scaleTrack .rightOptions {\n  position: absolute;\n  left: -76px;\n}\n\n.escher-container .pickerOptions {\n  box-shadow: 0 2px 14px #c5c5c5;\n  margin-top: 1px;\n  display: inline-flex;\n  flex-direction: column;\n  width: 90px;\n}\n\n.escher-container .pickerOptions * {\n  font-size: 12px;\n}\n\n.escher-container .pickerOptions .option {\n  padding: 3px 0px;\n}\n\n.escher-container .pickerOptions .typePicker {\n  width: 20px;\n  position: absolute;\n  left: 70px;\n  top: 1px;\n  right: 0px;\n  height: 14px;\n  background-color: rgb(232, 232, 232);\n}\n\n.escher-container .pickerOptions .colorOptions {\n  display: inline-flex;\n}\n\n.escher-container .colorOptions .colorText {\n  padding: 3px 0px;\n  width: 100%;\n}\n\n.escher-container .colorOptions .colorWheel {\n  padding: 0px;\n  position: absolute;\n  right: 0;\n  height: 24px;\n  width: 21px;\n  border: 1px solid black;\n}\n\n.escher-container .picker .trashDiv {\n  position: absolute;\n  top: -56px;\n  font-size: 17px;\n}\n\n.escher-container .picker .trashDiv * {\n  font-size: 17px;\n  cursor: pointer;\n}\n\n.escher-container .picker .icon-trash-empty {\n  margin: -5px;\n}\n\n.escher-container .scaleEditor :disabled {\n  background: #f1ecfa;\n}\n\n.escher-container .scaleEditor input[type=color]:disabled {\n  margin-top: 1px;\n}\n","",{version:3,sources:["webpack://./src/css/Picker.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,iBAAiB;EACjB,kBAAkB;EAClB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,gCAAgC;EAChC,WAAW;EACX,YAAY;EACZ;AACF;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,8BAA8B;EAC9B,eAAe;EACf,oBAAoB;EACpB,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,UAAU;EACV,QAAQ;EACR,UAAU;EACV,YAAY;EACZ,oCAAoC;AACtC;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,kBAAkB;EAClB,QAAQ;EACR,YAAY;EACZ,WAAW;EACX,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,eAAe;AACjB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,eAAe;AACjB",sourcesContent:[".escher-container .picker {\r\n  top: 35px;\r\n  margin-left: -7px;\r\n  position: absolute;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.escher-container .pickerBox {\r\n  position: absolute;\r\n  cursor: pointer;\r\n  background: rgba(0, 0, 0, 0.375);\r\n  width: 14px;\r\n  height: 35px;\r\n  top: -35px\r\n}\r\n\r\n.escher-container .scaleTrack .rightOptions {\r\n  position: absolute;\r\n  left: -76px;\r\n}\r\n\r\n.escher-container .pickerOptions {\r\n  box-shadow: 0 2px 14px #c5c5c5;\r\n  margin-top: 1px;\r\n  display: inline-flex;\r\n  flex-direction: column;\r\n  width: 90px;\r\n}\r\n\r\n.escher-container .pickerOptions * {\r\n  font-size: 12px;\r\n}\r\n\r\n.escher-container .pickerOptions .option {\r\n  padding: 3px 0px;\r\n}\r\n\r\n.escher-container .pickerOptions .typePicker {\r\n  width: 20px;\r\n  position: absolute;\r\n  left: 70px;\r\n  top: 1px;\r\n  right: 0px;\r\n  height: 14px;\r\n  background-color: rgb(232, 232, 232);\r\n}\r\n\r\n.escher-container .pickerOptions .colorOptions {\r\n  display: inline-flex;\r\n}\r\n\r\n.escher-container .colorOptions .colorText {\r\n  padding: 3px 0px;\r\n  width: 100%;\r\n}\r\n\r\n.escher-container .colorOptions .colorWheel {\r\n  padding: 0px;\r\n  position: absolute;\r\n  right: 0;\r\n  height: 24px;\r\n  width: 21px;\r\n  border: 1px solid black;\r\n}\r\n\r\n.escher-container .picker .trashDiv {\r\n  position: absolute;\r\n  top: -56px;\r\n  font-size: 17px;\r\n}\r\n\r\n.escher-container .picker .trashDiv * {\r\n  font-size: 17px;\r\n  cursor: pointer;\r\n}\r\n\r\n.escher-container .picker .icon-trash-empty {\r\n  margin: -5px;\r\n}\r\n\r\n.escher-container .scaleEditor :disabled {\r\n  background: #f1ecfa;\r\n}\r\n\r\n.escher-container .scaleEditor input[type=color]:disabled {\r\n  margin-top: 1px;\r\n}\r\n"],sourceRoot:""}]);const a=s},46:(e,t,n)=>{"use strict";t.__esModule=!0,t.isEventFromHandle=function(e,t){return Object.keys(t).some((function(n){return e.target===t[n].base}))},t.isValueOutOfRange=function(e,t){var n=t.min,r=t.max;return e<n||e>r},t.isNotTouchEvent=function(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0},t.getClosestPoint=o,t.getPrecision=s,t.getMousePosition=function(e,t){return e?t.clientY:t.pageX},t.getTouchPosition=function(e,t){return e?t.touches[0].clientY:t.touches[0].pageX},t.getHandleCenterPosition=function(e,t){var n=t.getBoundingClientRect();return e?n.top+.5*n.height:n.left+.5*n.width},t.ensureValueInRange=function(e,t){var n=t.max,r=t.min;return e<=r?r:e>=n?n:e},t.ensureValuePrecision=function(e,t){var n=t.step,r=o(e,t);return null===n?r:parseFloat(r.toFixed(s(n)))},t.pauseEvent=function(e){e.stopPropagation(),e.preventDefault()},t.getKeyboardValueMutator=function(e){switch(e.keyCode){case i.default.UP:case i.default.RIGHT:return function(e,t){return e+t.step};case i.default.DOWN:case i.default.LEFT:return function(e,t){return e-t.step};case i.default.END:return function(e,t){return t.max};case i.default.HOME:return function(e,t){return t.min};case i.default.PAGE_UP:return function(e,t){return e+2*t.step};case i.default.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}};var r,i=(r=n(902))&&r.__esModule?r:{default:r};function o(e,t){var n=t.marks,r=t.step,i=t.min,o=Object.keys(n).map(parseFloat);if(null!==r){var s=Math.round((e-i)/r)*r+i;o.push(s)}var a=o.map((function(t){return Math.abs(e-t)}));return o[a.indexOf(Math.min.apply(Math,a))]}function s(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}},50:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,'/* Containers */\n\n/* The top level container for an Escher Builder */\n.escher-container {\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important;\n  background-color: #F3F3F3;\n  text-align: center;\n  position: relative;\n  font-size: 14px;\n  color: #333333;\n  \n}\n\n/* Applied to the body when Escher fills the screen. This stops browser from\nshowing scroll-end animations. */\nhtml.fill-screen {\n  height: 100%;\n  width: 100%;\n}\nbody.fill-screen {\n  margin: 0;\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n}\n\n/* Applied to top level container (generally .escher-container) when Escher\nfills the screen. These make sure Escher completely fills the screen, even after\nresizes. */\n.fill-screen-div {\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  width: 100% !important;\n  height: 100% !important;\n  z-index: 1000;\n}\n\n/* The zoom container classes. */\n.escher-container .escher-zoom-container,\n.escher-container .escher-3d-transform-container,\n.escher-container svg.escher-svg {\n  width: 100% !important;\n  height: 100% !important;\n  overflow: hidden;\n}\n\n.escher-container .escher-zoom-container {\n  height: calc(100% - 40px) !important;\n  margin-top: 40px !important;\n}\n\n#selection-info-container {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: calc(calc(100% - 410px) / 2);\n  height: 40px;\n  background-color: transparent;\n  z-index: 10000;\n  text-align: left;\n  padding-top: 6px;\n  padding-left: 10px;\n  box-sizing: border-box;\n  align-content: center;\n}\n\n#selection-info-container H3 {\n  margin: 0;\n  padding: 0;\n  display: inline;\n}\n\n/* SVG text should not be selectable */\n.escher-container svg text {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n/* Status */\n.escher-container #status {\n  position:absolute;\n  bottom:10px;\n  left: 20px;\n  color: red;\n  background-color: white;\n  font-size: 16px\n}\n\n/* Search & Menu */\n.escher-container .search-menu-container {\n  position: absolute;\n  width: 100%;\n  top: 0px;\n  left: 0px;\n  margin: 0;\n  text-align: center;\n  pointer-events: none;\n}\n.escher-container .search-menu-container-inline {\n  box-sizing: border-box;\n  width: 320px;\n  display: inline-block;\n  text-align: left;\n  pointer-events: auto;\n}\n@media (min-width: 550px) {\n  .escher-container .search-menu-container-inline {\n    width: 410px;\n  }\n}\n\n/* Reaction input */\n.escher-container #rxn-input {\n  z-index: 10;\n  width: 200px;\n}\n.escher-container .input-close-button {\n  position: absolute;\n  right: 0px;\n  width: 18px;\n  bottom: 0px;\n  padding: 0px;\n  border-width: 0px;\n  margin: 0px;\n  background: none;\n  font-size: 20px;\n  font-weight: normal;\n  top: -8px;\n}\n.escher-container .input-close-button:hover {\n  color: #ff3333;\n  font-weight: bold;\n}\n\n/* text edit input */\n.escher-container #text-edit-input input {\n  width: 500px;\n  border: 1px solid #cccccc;\n  font-size: 22px;\n}\n\n.escher-container #tooltip-container {\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n/* Buttons */\n.escher-container .btn {\n  color: white!important;\n  border: 1px solid #2E2F2F;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  cursor: pointer;\n}\n\n.escher-container .btn:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container g.reaction path.segment {\n  \n  stroke-width: 3px;\n}\n/* first shortest */\n.escher-container g.segment-group.shortest-path path.segment, .escher-container g.segment-group.shortest-path-1 path.segment {\n  stroke: rgb(0, 0, 0) !important;\n  stroke-width: 14px !important;\n}\n\n.escher-container g.segment-group.shortest-path path.arrowhead, .escher-container g.segment-group.shortest-path-1 path.arrowhead {\n  fill: rgb(0, 0, 0) !important;\n}\n\n/* second shortest */\n.escher-container g.segment-group.shortest-path.shortest-path-2 path.segment {\n  stroke: rgb(59, 59, 59);\n  stroke-width: 14px;\n}\n\n.escher-container g.segment-group.shortest-path.shortest-path-2 path.arrowhead {\n  fill: rgb(59, 59, 59);\n}\n\n/* third shortest */\n.escher-container g.segment-group.shortest-path.shortest-path-3 path.segment {\n  stroke: rgb(87, 79, 79);\n  stroke-width: 14px;\n}\n\n.escher-container g.segment-group.shortest-path.shortest-path-3 path.arrowhead {\n  fill: rgb(87, 79, 79);\n}\n\n/* fourth shortest */\n.escher-container g.segment-group.shortest-path.shortest-path-4 path.segment {\n  stroke: rgb(150, 150, 150);\n  stroke-width: 14px;\n}\n\n.escher-container g.segment-group.shortest-path.shortest-path-4 path.arrowhead {\n  fill: rgb(150, 150, 150);\n}\n\n',"",{version:3,sources:["webpack://./src/css/Builder.css"],names:[],mappings:"AAAA,eAAe;;AAEf,kDAAkD;AAClD;EACE,sEAAsE;EACtE,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;EAClB,eAAe;EACf,cAAc;;AAEhB;;AAEA;gCACgC;AAChC;EACE,YAAY;EACZ,WAAW;AACb;AACA;EACE,SAAS;EACT,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;EACZ,WAAW;AACb;;AAEA;;UAEU;AACV;EACE,SAAS;EACT,UAAU;EACV,eAAe;EACf,QAAQ;EACR,WAAW;EACX,SAAS;EACT,UAAU;EACV,sBAAsB;EACtB,uBAAuB;EACvB,aAAa;AACf;;AAEA,gCAAgC;AAChC;;;EAGE,sBAAsB;EACtB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE,oCAAoC;EACpC,2BAA2B;AAC7B;;AAEA;EACE,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,mCAAmC;EACnC,YAAY;EACZ,6BAA6B;EAC7B,cAAc;EACd,gBAAgB;EAChB,gBAAgB;EAChB,kBAAkB;EAClB,sBAAsB;EACtB,qBAAqB;AACvB;;AAEA;EACE,SAAS;EACT,UAAU;EACV,eAAe;AACjB;;AAEA,sCAAsC;AACtC;EACE,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA,WAAW;AACX;EACE,iBAAiB;EACjB,WAAW;EACX,UAAU;EACV,UAAU;EACV,uBAAuB;EACvB;AACF;;AAEA,kBAAkB;AAClB;EACE,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,SAAS;EACT,SAAS;EACT,kBAAkB;EAClB,oBAAoB;AACtB;AACA;EACE,sBAAsB;EACtB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,oBAAoB;AACtB;AACA;EACE;IACE,YAAY;EACd;AACF;;AAEA,mBAAmB;AACnB;EACE,WAAW;EACX,YAAY;AACd;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,WAAW;EACX,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,WAAW;EACX,gBAAgB;EAChB,eAAe;EACf,mBAAmB;EACnB,SAAS;AACX;AACA;EACE,cAAc;EACd,iBAAiB;AACnB;;AAEA,oBAAoB;AACpB;EACE,YAAY;EACZ,yBAAyB;EACzB,eAAe;AACjB;;AAEA;EACE,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA,YAAY;AACZ;EACE,sBAAsB;EACtB,yBAAyB;EACzB,+DAA+D;EAC/D,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,+DAA+D;AACjE;;AAEA;;EAEE,iBAAiB;AACnB;AACA,mBAAmB;AACnB;EACE,+BAA+B;EAC/B,6BAA6B;AAC/B;;AAEA;EACE,6BAA6B;AAC/B;;AAEA,oBAAoB;AACpB;EACE,uBAAuB;EACvB,kBAAkB;AACpB;;AAEA;EACE,qBAAqB;AACvB;;AAEA,mBAAmB;AACnB;EACE,uBAAuB;EACvB,kBAAkB;AACpB;;AAEA;EACE,qBAAqB;AACvB;;AAEA,oBAAoB;AACpB;EACE,0BAA0B;EAC1B,kBAAkB;AACpB;;AAEA;EACE,wBAAwB;AAC1B",sourcesContent:['/* Containers */\r\n\r\n/* The top level container for an Escher Builder */\r\n.escher-container {\r\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important;\r\n  background-color: #F3F3F3;\r\n  text-align: center;\r\n  position: relative;\r\n  font-size: 14px;\r\n  color: #333333;\r\n  \r\n}\r\n\r\n/* Applied to the body when Escher fills the screen. This stops browser from\r\nshowing scroll-end animations. */\r\nhtml.fill-screen {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\nbody.fill-screen {\r\n  margin: 0;\r\n  position: relative;\r\n  overflow: hidden;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n/* Applied to top level container (generally .escher-container) when Escher\r\nfills the screen. These make sure Escher completely fills the screen, even after\r\nresizes. */\r\n.fill-screen-div {\r\n  margin: 0;\r\n  padding: 0;\r\n  position: fixed;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  z-index: 1000;\r\n}\r\n\r\n/* The zoom container classes. */\r\n.escher-container .escher-zoom-container,\r\n.escher-container .escher-3d-transform-container,\r\n.escher-container svg.escher-svg {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden;\r\n}\r\n\r\n.escher-container .escher-zoom-container {\r\n  height: calc(100% - 40px) !important;\r\n  margin-top: 40px !important;\r\n}\r\n\r\n#selection-info-container {\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: calc(calc(100% - 410px) / 2);\r\n  height: 40px;\r\n  background-color: transparent;\r\n  z-index: 10000;\r\n  text-align: left;\r\n  padding-top: 6px;\r\n  padding-left: 10px;\r\n  box-sizing: border-box;\r\n  align-content: center;\r\n}\r\n\r\n#selection-info-container H3 {\r\n  margin: 0;\r\n  padding: 0;\r\n  display: inline;\r\n}\r\n\r\n/* SVG text should not be selectable */\r\n.escher-container svg text {\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n/* Status */\r\n.escher-container #status {\r\n  position:absolute;\r\n  bottom:10px;\r\n  left: 20px;\r\n  color: red;\r\n  background-color: white;\r\n  font-size: 16px\r\n}\r\n\r\n/* Search & Menu */\r\n.escher-container .search-menu-container {\r\n  position: absolute;\r\n  width: 100%;\r\n  top: 0px;\r\n  left: 0px;\r\n  margin: 0;\r\n  text-align: center;\r\n  pointer-events: none;\r\n}\r\n.escher-container .search-menu-container-inline {\r\n  box-sizing: border-box;\r\n  width: 320px;\r\n  display: inline-block;\r\n  text-align: left;\r\n  pointer-events: auto;\r\n}\r\n@media (min-width: 550px) {\r\n  .escher-container .search-menu-container-inline {\r\n    width: 410px;\r\n  }\r\n}\r\n\r\n/* Reaction input */\r\n.escher-container #rxn-input {\r\n  z-index: 10;\r\n  width: 200px;\r\n}\r\n.escher-container .input-close-button {\r\n  position: absolute;\r\n  right: 0px;\r\n  width: 18px;\r\n  bottom: 0px;\r\n  padding: 0px;\r\n  border-width: 0px;\r\n  margin: 0px;\r\n  background: none;\r\n  font-size: 20px;\r\n  font-weight: normal;\r\n  top: -8px;\r\n}\r\n.escher-container .input-close-button:hover {\r\n  color: #ff3333;\r\n  font-weight: bold;\r\n}\r\n\r\n/* text edit input */\r\n.escher-container #text-edit-input input {\r\n  width: 500px;\r\n  border: 1px solid #cccccc;\r\n  font-size: 22px;\r\n}\r\n\r\n.escher-container #tooltip-container {\r\n  -ms-touch-action: none;\r\n  touch-action: none;\r\n}\r\n\r\n/* Buttons */\r\n.escher-container .btn {\r\n  color: white!important;\r\n  border: 1px solid #2E2F2F;\r\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\r\n  background-color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.escher-container .btn:active {\r\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\r\n}\r\n\r\n.escher-container g.reaction path.segment {\r\n  \r\n  stroke-width: 3px;\r\n}\r\n/* first shortest */\r\n.escher-container g.segment-group.shortest-path path.segment, .escher-container g.segment-group.shortest-path-1 path.segment {\r\n  stroke: rgb(0, 0, 0) !important;\r\n  stroke-width: 14px !important;\r\n}\r\n\r\n.escher-container g.segment-group.shortest-path path.arrowhead, .escher-container g.segment-group.shortest-path-1 path.arrowhead {\r\n  fill: rgb(0, 0, 0) !important;\r\n}\r\n\r\n/* second shortest */\r\n.escher-container g.segment-group.shortest-path.shortest-path-2 path.segment {\r\n  stroke: rgb(59, 59, 59);\r\n  stroke-width: 14px;\r\n}\r\n\r\n.escher-container g.segment-group.shortest-path.shortest-path-2 path.arrowhead {\r\n  fill: rgb(59, 59, 59);\r\n}\r\n\r\n/* third shortest */\r\n.escher-container g.segment-group.shortest-path.shortest-path-3 path.segment {\r\n  stroke: rgb(87, 79, 79);\r\n  stroke-width: 14px;\r\n}\r\n\r\n.escher-container g.segment-group.shortest-path.shortest-path-3 path.arrowhead {\r\n  fill: rgb(87, 79, 79);\r\n}\r\n\r\n/* fourth shortest */\r\n.escher-container g.segment-group.shortest-path.shortest-path-4 path.segment {\r\n  stroke: rgb(150, 150, 150);\r\n  stroke-width: 14px;\r\n}\r\n\r\n.escher-container g.segment-group.shortest-path.shortest-path-4 path.arrowhead {\r\n  fill: rgb(150, 150, 150);\r\n}\r\n\r\n'],sourceRoot:""}]);const a=s},55:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(148);t.default=function(e){var t=e.className,n=e.included,o=e.vertical,s=e.offset,a=e.length,l=e.style,c=r({visibility:n?"visible":"hidden"},l,o?{bottom:s+"%",height:a+"%"}:{left:s+"%",width:a+"%"});return(0,i.h)("div",{className:t,style:c})}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},60:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,'.escher-container .menu-bar {\n  box-sizing: border-box;\n  list-style-type: none;\n  padding: 0;\n  padding-right: 20px;\n  position: relative;\n  margin: 5px 0px;\n  background-color: white;\n  border: 1px solid #ddd;\n  display: inline-flex;\n  box-sizing: border-box;\n  width: 100%;\n  justify-content: space-between;\n}\n\n.escher-container .dropdown {\n  position: relative;\n  float: left;\n  box-sizing: border-box;\n  font-size: 12px;\n  border-radius: 3px;\n\n  /* these sometimes get overridden */\n  margin: 0 !important;\n  font-weight: normal !important;\n\n  text-align: center;\n  vertical-align: middle;\n  -ms-touch-action: none;\n  touch-action: none;\n  cursor: pointer;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .dropdownButton {\n  color: #d9230f!important;\n  border: 1px solid transparent;\n  padding: 6px 9px;\n}\n\n.escher-container .helpButton {\n  color: #d9230f!important;\n  padding: 0px 5px;\n  background-color: #f5f5f5!important;\n  border: 0!important;\n  text-decoration: unset;\n  height: fit-content;\n  position: absolute;\n  right: 0;\n  font-size: 12px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .dropdownButton:focus, .escher-container .helpButton:focus {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n.escher-container .dropdownButton:hover, .escher-container .helpButton:hover {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n.escher-container .menu-bar .icon-sort-down {\n  position: absolute;\n  font-size: 10px;\n  margin-left: -5px;\n}\n\n@media (min-width: 550px) {\n  .escher-container .menu-bar {\n    padding-right: 25px;\n  }\n\n  .escher-container .dropdown {\n    font-size: 18px;\n  }\n\n  .escher-container .dropdownButton {\n    padding: 6px 10px;\n    padding-right: 16px;\n  }\n\n  .escher-container .helpButton {\n    font-size: 16px;\n  }\n\n  .escher-container .menu-bar .icon-sort-down {\n    font-size: 14px;\n  }\n}\n\n.escher-container .menu {\n  box-sizing: border-box;\n  font-weight: normal!important;\n  word-spacing: 0;\n  position: absolute;\n  white-space: nowrap;\n  top: 103%;\n  left: -1%;\n  z-index: 1000;\n  display: block;\n  float: none;\n  min-width: 160px;\n  padding: 5px 0;\n  list-style: none;\n  font-size: 13px;\n  box-shadow: 0 6px 12px rgba(0,0,0,0.175);\n  background-clip: padding-box;\n  border: 1px solid #ddd;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 0;\n  margin: 0;\n  text-align: left;\n}\n\n.escher-container #rightMenu {\n  left: auto;\n  right: -2%;\n}\n\n.escher-container .menu li:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menu li, .menu label {\n  font-size: 15px;\n  display: block;\n  color: #444444;\n\n  /* these sometimes get overridden */\n  font-weight: normal !important;\n  margin: 0 !important;\n}\n\n.escher-container .menu.ul.li {\n  background-color: rgba(255, 255, 255, 0.95);\n}\n\n.escher-container .menuButton {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 5px 20px;\n  margin: 0;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container label:focus, .menuButton:focus {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menuButton:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container input[type="file"] {\n  display: none;\n}\n\n.escher-container #disabled {\n  color: #e0e0e0;\n}\n\n.escher-container #disabled:hover, #disabled:focus {\n  background-color: rgba(255, 255, 255, 0.95);\n  cursor: default;\n}\n',"",{version:3,sources:["webpack://./src/css/Dropdown.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,qBAAqB;EACrB,UAAU;EACV,mBAAmB;EACnB,kBAAkB;EAClB,eAAe;EACf,uBAAuB;EACvB,sBAAsB;EACtB,oBAAoB;EACpB,sBAAsB;EACtB,WAAW;EACX,8BAA8B;AAChC;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,sBAAsB;EACtB,eAAe;EACf,kBAAkB;;EAElB,mCAAmC;EACnC,oBAAoB;EACpB,8BAA8B;;EAE9B,kBAAkB;EAClB,sBAAsB;EACtB,sBAAsB;EACtB,kBAAkB;EAClB,eAAe;EACf,2BAA2B;EAC3B,yBAAyB;EACzB,wBAAwB;EACxB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,wBAAwB;EACxB,6BAA6B;EAC7B,gBAAgB;AAClB;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,mCAAmC;EACnC,mBAAmB;EACnB,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;EAClB,QAAQ;EACR,eAAe;EACf,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,wBAAwB;EACxB,0BAA0B;AAC5B;;AAEA;EACE,wBAAwB;EACxB,0BAA0B;AAC5B;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE;IACE,mBAAmB;EACrB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;IACjB,mBAAmB;EACrB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,eAAe;EACjB;AACF;;AAEA;EACE,sBAAsB;EACtB,6BAA6B;EAC7B,eAAe;EACf,kBAAkB;EAClB,mBAAmB;EACnB,SAAS;EACT,SAAS;EACT,aAAa;EACb,cAAc;EACd,WAAW;EACX,gBAAgB;EAChB,cAAc;EACd,gBAAgB;EAChB,eAAe;EACf,wCAAwC;EACxC,4BAA4B;EAC5B,sBAAsB;EACtB,2CAA2C;EAC3C,gBAAgB;EAChB,SAAS;EACT,gBAAgB;AAClB;;AAEA;EACE,UAAU;EACV,UAAU;AACZ;;AAEA;EACE,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,cAAc;;EAEd,mCAAmC;EACnC,8BAA8B;EAC9B,oBAAoB;AACtB;;AAEA;EACE,2CAA2C;AAC7C;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,iBAAiB;EACjB,SAAS;EACT,eAAe;EACf,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,2CAA2C;EAC3C,eAAe;AACjB",sourcesContent:['.escher-container .menu-bar {\r\n  box-sizing: border-box;\r\n  list-style-type: none;\r\n  padding: 0;\r\n  padding-right: 20px;\r\n  position: relative;\r\n  margin: 5px 0px;\r\n  background-color: white;\r\n  border: 1px solid #ddd;\r\n  display: inline-flex;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n}\r\n\r\n.escher-container .dropdown {\r\n  position: relative;\r\n  float: left;\r\n  box-sizing: border-box;\r\n  font-size: 12px;\r\n  border-radius: 3px;\r\n\r\n  /* these sometimes get overridden */\r\n  margin: 0 !important;\r\n  font-weight: normal !important;\r\n\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  -ms-touch-action: none;\r\n  touch-action: none;\r\n  cursor: pointer;\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.escher-container .dropdownButton {\r\n  color: #d9230f!important;\r\n  border: 1px solid transparent;\r\n  padding: 6px 9px;\r\n}\r\n\r\n.escher-container .helpButton {\r\n  color: #d9230f!important;\r\n  padding: 0px 5px;\r\n  background-color: #f5f5f5!important;\r\n  border: 0!important;\r\n  text-decoration: unset;\r\n  height: fit-content;\r\n  position: absolute;\r\n  right: 0;\r\n  font-size: 12px;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.escher-container .dropdownButton:focus, .escher-container .helpButton:focus {\r\n  color: #91170a!important;\r\n  text-decoration: underline;\r\n}\r\n\r\n.escher-container .dropdownButton:hover, .escher-container .helpButton:hover {\r\n  color: #91170a!important;\r\n  text-decoration: underline;\r\n}\r\n\r\n.escher-container .menu-bar .icon-sort-down {\r\n  position: absolute;\r\n  font-size: 10px;\r\n  margin-left: -5px;\r\n}\r\n\r\n@media (min-width: 550px) {\r\n  .escher-container .menu-bar {\r\n    padding-right: 25px;\r\n  }\r\n\r\n  .escher-container .dropdown {\r\n    font-size: 18px;\r\n  }\r\n\r\n  .escher-container .dropdownButton {\r\n    padding: 6px 10px;\r\n    padding-right: 16px;\r\n  }\r\n\r\n  .escher-container .helpButton {\r\n    font-size: 16px;\r\n  }\r\n\r\n  .escher-container .menu-bar .icon-sort-down {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n.escher-container .menu {\r\n  box-sizing: border-box;\r\n  font-weight: normal!important;\r\n  word-spacing: 0;\r\n  position: absolute;\r\n  white-space: nowrap;\r\n  top: 103%;\r\n  left: -1%;\r\n  z-index: 1000;\r\n  display: block;\r\n  float: none;\r\n  min-width: 160px;\r\n  padding: 5px 0;\r\n  list-style: none;\r\n  font-size: 13px;\r\n  box-shadow: 0 6px 12px rgba(0,0,0,0.175);\r\n  background-clip: padding-box;\r\n  border: 1px solid #ddd;\r\n  background-color: rgba(255, 255, 255, 0.95);\r\n  border-radius: 0;\r\n  margin: 0;\r\n  text-align: left;\r\n}\r\n\r\n.escher-container #rightMenu {\r\n  left: auto;\r\n  right: -2%;\r\n}\r\n\r\n.escher-container .menu li:hover {\r\n  background-color: #d9230f;\r\n  color: #FFFFFF;\r\n}\r\n\r\n.escher-container .menu li, .menu label {\r\n  font-size: 15px;\r\n  display: block;\r\n  color: #444444;\r\n\r\n  /* these sometimes get overridden */\r\n  font-weight: normal !important;\r\n  margin: 0 !important;\r\n}\r\n\r\n.escher-container .menu.ul.li {\r\n  background-color: rgba(255, 255, 255, 0.95);\r\n}\r\n\r\n.escher-container .menuButton {\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  padding: 5px 20px;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.escher-container label:focus, .menuButton:focus {\r\n  background-color: #d9230f;\r\n  color: #FFFFFF;\r\n}\r\n\r\n.escher-container .menuButton:hover {\r\n  background-color: #d9230f;\r\n  color: #FFFFFF;\r\n}\r\n\r\n.escher-container input[type="file"] {\r\n  display: none;\r\n}\r\n\r\n.escher-container #disabled {\r\n  color: #e0e0e0;\r\n}\r\n\r\n.escher-container #disabled:hover, #disabled:focus {\r\n  background-color: rgba(255, 255, 255, 0.95);\r\n  cursor: default;\r\n}\r\n'],sourceRoot:""}]);const a=s},63:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(148),o=l(n(55)),s=l(n(711)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(46));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));r.onEnd=function(){r.setState({dragging:!1}),r.removeDocumentEvents(),r.props.onAfterChange(r.getValue())};var i=void 0!==n.defaultValue?n.defaultValue:n.min,o=void 0!==n.value?n.value:i;return r.state={value:r.trimAlignValue(o),dragging:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(e){if("value"in e||"min"in e||"max"in e){var t=this.state.value,n=void 0!==e.value?e.value:t,r=this.trimAlignValue(n,e);r!==t&&(this.setState({value:r}),a.isValueOutOfRange(n,e)&&this.props.onChange(r))}},t.prototype.onChange=function(e){var t=this.props;!("value"in t)&&this.setState(e);var n=e.value;t.onChange(n)},t.prototype.onStart=function(e){this.setState({dragging:!0});var t=this.props,n=this.getValue();t.onBeforeChange(n);var r=this.calcValueByPos(e);this.startValue=r,this.startPosition=e,r!==n&&this.onChange({value:r})},t.prototype.onMove=function(e,t){a.pauseEvent(e);var n=this.state.value,r=this.calcValueByPos(t);r!==n&&this.onChange({value:r})},t.prototype.onKeyboard=function(e){var t=a.getKeyboardValueMutator(e);if(t){a.pauseEvent(e);var n=this.state.value,r=t(n,this.props),i=this.trimAlignValue(r);if(i===n)return;this.onChange({value:i})}},t.prototype.getValue=function(){return this.state.value},t.prototype.getLowerBound=function(){return this.props.min},t.prototype.getUpperBound=function(){return this.state.value},t.prototype.trimAlignValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r({},this.props,t),i=a.ensureValueInRange(e,n);return a.ensureValuePrecision(i,n)},t.prototype.render=function(){var e=this,t=this.props,n=t.prefixCls,s=t.vertical,a=t.included,l=t.disabled,c=t.minimumTrackStyle,u=t.trackStyle,h=t.handleStyle,d=t.min,p=t.max,f=t.handle,g=this.state,m=g.value,b=g.dragging,A=this.calcOffset(m),_=f({className:n+"-handle",vertical:s,offset:A,value:m,dragging:b,disabled:l,min:d,max:p,style:h[0]||h,ref:function(t){return e.saveHandle(0,t)}}),v=u[0]||u;return{tracks:(0,i.h)(o.default,{className:n+"-track",vertical:s,included:a,offset:0,length:A,style:r({},c,v)}),handles:_}},t}(i.Component);t.default=(0,s.default)(c)},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},s=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],u=o[c]||0,h="".concat(c," ").concat(u);o[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var f=i(p,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:f,references:1})}s.push(h)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=n(o[s]);t[a].references--}for(var l=r(e,i),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},88:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(817)),o=r(n(228)),s=!0,a=!1,l=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function c(e){return null==e}var u=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){c(e.which)&&(e.which=c(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,r=void 0,i=void 0,o=t.wheelDelta,s=t.axis,a=t.wheelDeltaY,l=t.wheelDeltaX,c=t.detail;o&&(i=o/120),c&&(i=0-(c%3==0?c/3:c)),void 0!==s&&(s===e.HORIZONTAL_AXIS?(r=0,n=0-i):s===e.VERTICAL_AXIS&&(n=0,r=i)),void 0!==a&&(r=a/120),void 0!==l&&(n=-1*l/120),n||r||(r=i),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==i&&(e.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,r=void 0,i=void 0,o=e.target,s=t.button;return o&&c(e.pageX)&&!c(t.clientX)&&(r=(n=o.ownerDocument||document).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===o?e.toElement:e.fromElement),e}}];function h(){return s}function d(){return a}function p(e){var t=e.type,n="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;i.default.call(this),this.nativeEvent=e;var r=d;"defaultPrevented"in e?r=e.defaultPrevented?h:d:"getPreventDefault"in e?r=e.getPreventDefault()?h:d:"returnValue"in e&&(r=e.returnValue===a?h:d),this.isDefaultPrevented=r;var o=[],s=void 0,c=void 0,p=l.concat();for(u.forEach((function(e){t.match(e.reg)&&(p=p.concat(e.props),e.fix&&o.push(e.fix))})),s=p.length;s;)this[c=p[--s]]=e[c];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),s=o.length;s;)(0,o[--s])(this,e);this.timeStamp=e.timeStamp||Date.now()}var f=i.default.prototype;(0,o.default)(p.prototype,f,{constructor:p,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=a,f.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=s,f.stopPropagation.call(this)}}),t.default=p,e.exports=t.default},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},127:e=>{"use strict";e.exports="data:font/woff2;base64,d09GMgABAAAAABSEAA8AAAAAKYwAABQtAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACFTAgOCZwMEQgKokydUgsyAAE2AiQDYAQgBYVNB4IkDIEcG9olRQdi2DgAkKevQfZ/eUAPUZDaPxUJDEJLnohMXeoSzSTvLPuPoZSK0N3HNEK3dXCNblg/nElbz3Svvz7T5zDlQBf+ZoQks358P/U9M3PvfSQiWwbZTzbLiIoxoBDos0KKw6iCU4JVu0OyS7z87WYBrPLHtSfeTT+psSVIBamRdVozmECd5ugcidQc2s6cJ2HzUDFKA5vXgDFxRSb2/VRmNEDAh2z/YV7/DUxhpTKDB3JHwvNpS7moElbgKz98ow2QAXWU8PpCUlDyrV3ULurtqqc1Wyo6O61NpcNLr3fK37KdMtGbHYh2WEYKPf3/1irt/zVdt7UQYnWw5FbIkGTnqqthq6p7ZoF6Zml6FmcnsHQEvYeo7oQJqX0nA0t8EwB2YZ8XiUImLsrF+gglYzmcOaRmoyYvjP/H1N6nZmy6hqaI34iGGXC0dxtvjXcCAuBiyAJeWSsdQ+hy5fZVNFKgghd53JIub1QrsGddUFCAdsJgV5TT9ElogB/yLwB89Pbnpz9iOAYYWkBf1qHzq2fxm7q3UDmy04oX5Fv4rLgIMAbTYAK/X7Im+hpffYHwaHa9wDVt9i6AUA78J9ajv62/8d9ef+PtW+iOH+pIR6ii+MTQyu0h3YHy/+HBhgMXHgIIIoQwIqJi4hKSUtJABqQwgBspD522tb0rBQF1BqZ1BqF1BkXrDJrWGQytM1i0zmDTOoND6wwurTN4tM4QoHWGIK0zhGidIUzrDBFaZ4jSOkOs5A0lQ7zkjWMMiZI37jAkS954y5AqeQs9B9Lwn2uRQb+A42EYRT6cIXT4A+buV2BsQfdL2pf2+DNs+dwONs5MdddYC8pgWQcdCMvJOwjk8r6DoVatQyDNoQwvzfg+cUpKvvCw70tHdRnmtwMhoDD7uUFdH3Rc4eXkaTvesDD7XWg0u3RDYKrv4jHeT17BobAXu1Tk2kANESfJ4Hg8pJzcN2ukEX5To9KvrjsGl4fTIWYfLGJx8jsoh5r2lHDo+qmKdT1T949MvUQpEOaGbuukuESG9BAKfjNI9qX9cD7AVemlc2zt3pMJmAhSjLolYCPAKTgSwL6ZsndpLGkZ3nKWzyJhyl3lTIfTMTY5Qh6j9BA/RlJUHx0aMhSU5UawWAcs9djqjbURyg5jau7AB4p18JIjVPXNsYvrALxWhuidZd48pc39b816Gap3oNJOSLXJkxg02igU74LTxibOcczksIDDXgd2MdiLO+pVgO8zfNiHvpsdsHYOByLpDiFOz1Q4LQdnKOaY35AGZD4XnTPA8tA/tl4DXtSL/ICA1ckVLKMsybD1izSGrkfWGY+TW1A0VoCY6A+qP5Fg2TryCYj9JhASyuR/GOxBVutgjdr42DrCKFxZ5WxM6IiglIJUmO9Lm1ugPhIihUcwEjqi2C2D5CFnKpxp/UKUSdrXhCgLmk8MH76Fon4G8S7Box444q/unfDh66LO2DIWr5hAQaz/XcbmpaHiiXoEy7D5Ek4wsi00VkGs1gjTDUeZbz8sdYaRndV/3Eff8IDNn7U3OBLmmAhMYgxHHYj7li3ABR1ABAsdRVp9ZEnMFPDqt0BMvQwJqSeo4DUv6TQznUV05sKM9157SOQNlZJo9fGR3uJOdKRQkOw50ishyBCGBiLQSBRkiYYmYqCZWNBCbGglTkcf1PZTYvKHb0Glgj46Ci+O7M8pSBm/dy4UdBp/ly2HGcKuYzdUjhcCIrphG+awHQV9FMyjYAcKdqJgFwp2o2APCvaidA1A1rwVBocmMln6evX67sxQZiBca4cgSC+fnZ1jGCJjOZEZzUvaqx84VxvNYcSeZ0qosRps0zG8Kzomh+Fp1NAfNc2B87vGIK+kbh/HDBxn39ylIZdDsDJIHYHuMNjQpTIWk3pelgnImoxlD8By/gtyTKK6suaYKhZCnGqXmEbhkLonlYyB31H637UfHuv4prOEXWMjpL6bipS8+NgxA5AirR5l3ioSlEC4Tuixt9cOqMhaO4W7mW2USlQvRj0yJbw2nGxbvAmHShZzZh5Ii43RD7I5l9L66HHqKGHYVnUa6OxXpEkUU6No5qaSalHm1GmQGxOfzCqRiyQd5SWjuBzBtlgNnDdJohWUkiqt40ZbRgsMUSl7bUegZHYG0X2a6Y2OOTsoIZp0gkDXlr4L5htweXIEUaPK9boFSxHbyvxV5VioZE2tqV5okSmucuuM3Y5693aL7cD9BrpzorT6+5GLUiToKp3euBlTXde9QREaIyzIfwunGWoziUHWYlWGYqIn3HXXwyemPv7SYQeMfsbLYMZrG7wCZr3N1SK8LrCdKsalkBVD0bDagFRo+snqQSZQ2WqLjVR9j1S6JDq9huLGaU8OtT//K8YBLPQRQ9gT13TJ2FBpslFGWO/ATM8iaveN101WJ0KTiPq4x0+2+foOnVteoNjE7t7s7d+HArrUMenCEpheYP9cSA1VKhm1frFUfclOijdzxjyGuCnfI6xl6BECvwjAgJAO+bhOIgE6BgGYEBqaSfk+AcseszGCXDGA+RjpAoYQKRIiJUKkTEhXmsNVUsVVUsNVUsdV3eDjbtIUd7oFArBNyOvIhCuka62gVwxgP0beAATgMEYwKgZwHKPHJynbNOc8b5qq29ILY4aGnhvcImjKxWccfFhSxFYUsG6heYG4MeZxa8z76QOasIsjF/YUcKCAYwstiMKTsYBnYwEvxgJeHYAbBdwp1AMFi/g0FvFlLOLbWMSPA/ClgB9F17//6lu1g7ZM9nsc72uf8tuybeXyUt+WdG5L8ofuv1BPUQCBdvzCoEUZbMgM/SB/ANQ7aPYYoPvssWlVWcAg6PUGDFlHi6c68q0tra3JpBNobMgMBy1j7WQE2wbsvL0n7zRE8pe4uhYJ3wKxgeI39tPC5gGjiLSYBLiO1JqXEoh5BIjnLRDgkTzTcVvJAFBj06BKUyDaEQNWigaNzni4EuyZ7FFAPgYqoXGMTmp2GJPznaZEPNB4uc2aLgJ88iZz7WCAugAFcHsEzUGdyr3XYhw4JTGvAsmmL4HUPpVDVCObYB8whAigLkyBuCbBCno6SK1tbJLRUYzo+L1wZSMhXG1NxRSk0TE0NmgfdjbUhZqldUc9DVSs203QXqOPNHmmkp0B3CInz5vMOs15pvgGhf6oRaT6UwIf/pDBqKbeKTKASUlIOfhQPOl1affAKA+3SZ/CkhSYzfxHgNFeiz5O/MU9atJ5dqXx0Dn6zEHKddZ0/jABgzCBwQEwAB8j4HIAAkECHMAgCaCQX871g7B+Pfg8+PXoAqh+yKUHQDFaYM9kxtMvsSyYHUQxZjhosthaYWJACPXz6wD+jkGUG2LTXiQYSWh70nY+HjadjcJT0m0YfnP5QOO9jRMsp0dHnaKKClhQ5vJkMh4xIzB7BAxQ6xfQXgnthowxpMgiip94+aaERm9WFjHoFlDMsGDqsMgM1Pi0F6KHhCdWqhuE0PI2ekAEesIafVDGOgEAif+7htdNeXy+JuoCnUS4XVPW+jxDDqcw3C4gzj7spINoz+A3GQdIkA87bUEPBLUG/V08sUInYwcA+73TNrT5JGvA/8WT0WsxnHSeBVzfH21NJolHtz1yEPKa5PlEHLL/0iYcAbtLGMUkYO+UI8bWejJ8gJrCWdMQRLkxLu0Fg40+kmfytEwRWMDxVgpLlpkHCRhxlrdaxnjLixfINEKh//37r/gqEPya8uvcuX74DwwtXrLwM/tV/Hyp8G0KHDw3F5tnDgKij9f/MvDLIr8AIJkTT7cJ/YcUfqmLbVSit6ZNVPcjfJ8Ge695mKhnZuZGRNHahsmKQ6iQo9sNT8x/h5h5ohTbYncMHZDIse1onLSnWonMEu/4fmmKHIVVIVe0tUlk0rbWYhk2iMpQdB4zpmSrZUh2a5tWpmCwHGz//nfdLCRhuysf2j+kzdEycYu0tmZPmZkpiUV3YHLJUFW78gNbxRy748ABSY6EyYv5Zoa80DjGddgT4hMSGISprLTH2nfttiMhvcuKWK/8nRS16AtO8DPtiHXEx6j4hRuTMcWfQKzIE8uVPs2csLxvfdPf3zxWyLQHFXLUYCC02sE3whvRc4xVCwB9T8+Tni4dGIdGdG0J37q/6ts2edjgnJRAHpM9FMRCz5xZqGKQ7A8feVLOR572qHPhwrNnUC7+Ff3+q/u12b+beC1xpP12CP2Mq3BvAM+U9l7/yJWGfhSl8ObNU89bJmtJnTs3tWXVxBd+fD2yotWzNksBbO48hRiXz3YtrAbIPYqlK5W7Al35u9autCgqNJbcO0oleCyXrIpxvZr+yjV9OXjxd/w7fHHD2Mzv3tWVSb0JLc7acKwVJW58w/+YoKHu9FNrkQRNtlsnPlU4jhk35ecsz9XJypCOAtZbYTFKW9hfYeyV6wOe8PqVaxo/RhdICo6qJD9o+LNPD0vLVkx9MjW7kBMhrWSCg9MqN59XHRPt2rRJl/nJNfZHVX+ci+4JcEF6+73/4evjJ8+SNZtIW19JxXI4SX1XuzF9/W/21WNzeRulUGAUOLljfEaSjSWIDC/h1ariQjLD0MkR4yeWNa39CLyfxXDYv/+/76+iCCQIhiYa4bhgaejt47K+KSxb7bffss6rUHiWVciwIMRWwNr7opSRup6ex2CP+V6P5XFwj0ncJGZyJJcuNRQbVD25upb8LnCfvKNtccesA4EdhW1NcjMwz1DcwDYWN4qOFwk8bUVi8i/KM1ZzHR2dDkTKLfH5SrhaxN7ZaUWsoc2OaLNamko5Yh2sagQ3uiPLQ/UZN7IjPtTcn3xzeGThQvBYZCjmtvYDKtV+TgVsHhCFdBB5DHQ2JuvgsupLS4Zz7xjYDCwEVWH/VsT/kNJ6FteRJe1tjSyqqioCRKyqKXyYIEz2B4/5/39HrCNMZEe0T/7i4qK1cGjikpGepeMrz9+oT/TYKls/uVxNpMpEyqpG8KzixTsRfyc6qXyZPwPs/Mpu3rqufyybxFu/Xcr8X3n0Xsj/kFciGmSFxFa1rpHPYdY/ks38vw9yp/xIcsXGMIGoBCbeBIE2AdxNpBNiGvqK2faGiKXAUlqI4YFMZlBTIqFMo891Qokqsd1zTQLIyeV1C15lguCgP9rhj/rGNPUVmzNhrqFZaNKWHE9XsqkNLOwh0Ug0kp7OdMrnXyss14JwKxPxtcw0mpgOpjo6z95Bc8RiCJUgkE0mEDZBdDedHOc1JkhPt/ZsOs0m83U3TnFTbOGhTlLS3RUTViCClGpUgWIVhCESEL1Nk1/IxLTJ+nCgu7VBu1ssIALi0hzlWiFxSW4mkW6cLDwwUyDSdQPnCxKC1CBMwk+hQdC0AbeD4jKYVWU+8nBXV7wrP2rSd3qtK8cOOseu19HCZEspSrI3Q2aPImGR8IsKkAMPjleD7ZJrU80iQ+Y54BDKQfLg2p5bBUAVTQQ63N6ezbZ3j7fm/WxbOhaLRv3U8WQ8ZFr7ine6cuw1VmQ7xJVwrcT7NNxOkUA2g1Rl4Tk1uEbbXSylyegatH4/4BHKEnXbrmPXelJIvsGVk6ts7J62hqhDBsQlLUwGhlBTzLAMrKcIwbFDTjUcZDvgsiHbVGF5nnUSluW9Cs/yDp47W3nlxfLRIwdLe9Z3LSbyiU5a70fET+MsTLQ5SguVPtnSWOx11d+2FhbNNbASVk8tw0q9HxDBSQDyKgRyMLtvy0OnFbHxYC5BxsAhq7q/XC7G7UEe8lOV9u3dMzvT62cP28H5ja+0ZlhUPEYCCRomLJNFI+RYugRlxCipgWCBrBpsx34OF0a5ZkOTMIEEVViOY5VhWU4FjuUcnp8bH03Ekwm/M+H7nkm+zYuOTQIaJEFLWqQEpdVzGDAZ3gABQqhCtJYyRHQFWvThtJ+IJzt9yzT3FQ/CddxNjxzL2QySZVubhkBMsI+SqepTiLw/QDapkwv3da/q8uXRwV3F+bnZ6bHRgf54Oh7tSLbFE77wCgcXxkfbFctYWy4bi0aYHDCXPP4I3UuN6JyZzM5Mt5OaULfjSXZ3vxsUdybqGkMwv6JdO9Wd9QfC9wQCQMCHd/2Q1oTn3rV5UgeAv7xoXb1N+7/6dQQTzW2wwRbaGhEgQZkC+BkoSnVGhLWjUfwcLZtnPf8OIqyzd77iyecadvxEEOewEp61GtuYcQFmBUbObnwMwIdCAdDOmN/LBOPOYynBxngpw8K8EoquKAVaKtXwcEwZ0FdLXfSpru4h7tMQkHIAXMSXoZQQKVzKCFGrEtCCUqDzpRqp9isDeqbUxQm69QQPnf32f8WQWu7J/Wr11RFPTuSvLn6prYj+ElExLjg/DMtduLfOONiO4YGhbOQLm4bfulsduX37/GjW+BrX/WmnzhjCSFNvGsu4hut4gJvYQBUXcBs53ZbRI2fE0C87Jue0UbkoC2Fi/VVUcDlZwZ1o7wJT3YIq/tT5m7pKqHOiunwmB5yZj32FpY7YZBV37EUruMkZO916AufEexus8ecMGzCEwHXvKsqrMGrOyp28hbuZGjE8985L6N2U6GI5a7PWnOtsdfGlzlDegEXUbeKZzRg0qFsjg94HF/+QTExCijQZssgmh1zyKEBBClGYIhSlGMUpQUlKUZoy1AC+dsn8Kxa0imXS9tijgcLpjaodhyTutBNa1qrV3LmesZjip5WLif0QmHs3Q9uZC17UmS6MchrGZ+6FKjdjvOKFsWfx4FN7DNZI7/bNyq0LhXgurUJFW7FkJqPtW4HXauzVkeHqcoXK5ds6Jk47kXK6cKReMAouXogIXhHAvp/g9SOl20QfLx+hz2vsen0b1tI20Ht7V/eJPwXgzZb8KQmwsp3vg4dLt4rbT6XhLOlu+4mNyTCslLPb2mzQz+waSMU0n8GeFXTibYR6f4KdLVvqY9v8Hv59fdZgZQU="},148:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Component:()=>P,cloneElement:()=>h,createElement:()=>a,createRef:()=>L,default:()=>U,h:()=>a,options:()=>i,render:()=>F,rerender:()=>g});var r=function(){},i={},o=[],s=[];function a(e,t){var n,a,l,c,u=s;for(c=arguments.length;c-- >2;)o.push(arguments[c]);for(t&&null!=t.children&&(o.length||o.push(t.children),delete t.children);o.length;)if((a=o.pop())&&void 0!==a.pop)for(c=a.length;c--;)o.push(a[c]);else"boolean"==typeof a&&(a=null),(l="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(l=!1)),l&&n?u[u.length-1]+=a:u===s?u=[a]:u.push(a),n=l;var h=new r;return h.nodeName=e,h.children=u,h.attributes=null==t?void 0:t,h.key=null==t?void 0:t.key,void 0!==i.vnode&&i.vnode(h),h}function l(e,t){for(var n in t)e[n]=t[n];return e}function c(e,t){e&&("function"==typeof e?e(t):e.current=t)}var u="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function h(e,t){return a(e.nodeName,l(l({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var d=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function f(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(i.debounceRendering||u)(g)}function g(){for(var e;e=p.pop();)e._dirty&&I(e)}function m(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&b(e,t.nodeName):n||e._componentConstructor===t.nodeName}function b(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function A(e){var t=l({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)c(n,null),c(r,e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===d.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,y,s):e.removeEventListener(t,y,s),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var a=i&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function y(e){return this._listeners[e.type](i.event&&i.event(e)||e)}var w=[],x=0,C=!1,E=!1;function B(){for(var e;e=w.shift();)i.afterMount&&i.afterMount(e),e.componentDidMount&&e.componentDidMount()}function k(e,t,n,r,i,o){x++||(C=null!=i&&void 0!==i.ownerSVGElement,E=null!=e&&!("__preactattr_"in e));var s=S(e,t,n,r,o);return i&&s.parentNode!==i&&i.appendChild(s),--x||(E=!1,o||B()),s}function S(e,t,n,r,i){var o=e,s=C;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),z(e,!0))),o.__preactattr_=!0,o;var a,l,c=t.nodeName;if("function"==typeof c)return function(e,t,n,r){for(var i=e&&e._component,o=i,s=e,a=i&&e._componentConstructor===t.nodeName,l=a,c=A(t);i&&!l&&(i=i._parentComponent);)l=i.constructor===t.nodeName;return i&&l&&(!r||i._component)?(D(i,c,3,n,r),e=i.base):(o&&!a&&(j(o),e=s=null),i=O(t.nodeName,c,n),e&&!i.nextBase&&(i.nextBase=e,s=null),D(i,c,1,n,r),e=i.base,s&&e!==s&&(s._component=null,z(s,!1))),e}(e,t,n,r);if(C="svg"===c||"foreignObject"!==c&&C,c=String(c),(!e||!b(e,c))&&(a=c,(l=C?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,o=l,e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),z(e,!0)}var u=o.firstChild,h=o.__preactattr_,d=t.children;if(null==h){h=o.__preactattr_={};for(var p=o.attributes,f=p.length;f--;)h[p[f].name]=p[f].value}return!E&&d&&1===d.length&&"string"==typeof d[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=d[0]&&(u.nodeValue=d[0]):(d&&d.length||null!=u)&&function(e,t,n,r,i){var o,s,a,l,c,u=e.childNodes,h=[],d={},p=0,f=0,g=u.length,b=0,A=t?t.length:0;if(0!==g)for(var v=0;v<g;v++){var y=u[v],w=y.__preactattr_;null!=(x=A&&w?y._component?y._component.__key:w.key:null)?(p++,d[x]=y):(w||(void 0!==y.splitText?!i||y.nodeValue.trim():i))&&(h[b++]=y)}if(0!==A)for(v=0;v<A;v++){var x;if(c=null,null!=(x=(l=t[v]).key))p&&void 0!==d[x]&&(c=d[x],d[x]=void 0,p--);else if(f<b)for(o=f;o<b;o++)if(void 0!==h[o]&&m(s=h[o],l,i)){c=s,h[o]=void 0,o===b-1&&b--,o===f&&f++;break}c=S(c,l,n,r),a=u[v],c&&c!==e&&c!==a&&(null==a?e.appendChild(c):c===a.nextSibling?_(a):e.insertBefore(c,a))}if(p)for(var v in d)void 0!==d[v]&&z(d[v],!1);for(;f<=b;)void 0!==(c=h[b--])&&z(c,!1)}(o,d,n,r,E||null!=h.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||v(e,r,n[r],n[r]=void 0,C);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||v(e,r,n[r],n[r]=t[r],C)}(o,t.attributes,h),C=s,o}function z(e,t){var n=e._component;n?j(n):(null!=e.__preactattr_&&c(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||_(e),M(e))}function M(e){for(e=e.lastChild;e;){var t=e.previousSibling;z(e,!0),e=t}}var N=[];function O(e,t,n){var r,i=N.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),P.call(r,t,n)):((r=new P(t,n)).constructor=e,r.render=T);i--;)if(N[i].constructor===e)return r.nextBase=N[i].nextBase,N.splice(i,1),r;return r}function T(e,t,n){return this.constructor(e,n)}function D(e,t,n,r,o){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&e.base?f(e):I(e,1,o)),c(e.__ref,e))}function I(e,t,n,r){if(!e._disable){var o,s,a,c=e.props,u=e.state,h=e.context,d=e.prevProps||c,p=e.prevState||u,f=e.prevContext||h,g=e.base,m=e.nextBase,b=g||m,_=e._component,v=!1,y=f;if(e.constructor.getDerivedStateFromProps&&(u=l(l({},u),e.constructor.getDerivedStateFromProps(c,u)),e.state=u),g&&(e.props=d,e.state=p,e.context=f,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,u,h)?v=!0:e.componentWillUpdate&&e.componentWillUpdate(c,u,h),e.props=c,e.state=u,e.context=h),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!v){o=e.render(c,u,h),e.getChildContext&&(h=l(l({},h),e.getChildContext())),g&&e.getSnapshotBeforeUpdate&&(y=e.getSnapshotBeforeUpdate(d,p));var C,E,S=o&&o.nodeName;if("function"==typeof S){var M=A(o);(s=_)&&s.constructor===S&&M.key==s.__key?D(s,M,1,h,!1):(C=s,e._component=s=O(S,M,h),s.nextBase=s.nextBase||m,s._parentComponent=e,D(s,M,0,h,!1),I(s,1,n,!0)),E=s.base}else a=b,(C=_)&&(a=e._component=null),(b||1===t)&&(a&&(a._component=null),E=k(a,o,h,n||!g,b&&b.parentNode,!0));if(b&&E!==b&&s!==_){var N=b.parentNode;N&&E!==N&&(N.replaceChild(E,b),C||(b._component=null,z(b,!1)))}if(C&&j(C),e.base=E,E&&!r){for(var T=e,P=e;P=P._parentComponent;)(T=P).base=E;E._component=T,E._componentConstructor=T.constructor}}for(!g||n?w.push(e):v||(e.componentDidUpdate&&e.componentDidUpdate(d,p,y),i.afterUpdate&&i.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);x||r||B()}}function j(e){i.beforeUnmount&&i.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?j(n):t&&(null!=t.__preactattr_&&c(t.__preactattr_.ref,null),e.nextBase=t,_(t),N.push(e),M(t)),c(e.__ref,null)}function P(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function F(e,t,n){return k(n,e,{},!1,t,!1)}function L(){return{}}l(P.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),f(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),I(this,2)},render:function(){}});const U={h:a,createElement:a,cloneElement:h,createRef:L,Component:P,render:F,rerender:g,options:i}},177:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".escher-container .settingsBackground {\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9;\n  background: rgba(0,0,0,.4);\n  padding: 5% 0 80px;\n  text-align: center;\n}\n\n.escher-container .scale-editor .domain-input {\n  color: #333;\n}\n\n.escher-container .settingsBoxContainer button {\n  position: absolute;\n  top: 5px;\n  right: 20px;\n  z-index: 10;\n  text-align: center;\n  vertical-align: middle;\n  font-weight: normal!important;\n  width: 34px;\n  height: 30px;\n  margin: 0;\n  padding: unset;\n  font-size: 14px!important;\n  border-radius: 3px;\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n.escher-container .settingsBoxContainer button:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .settingsBoxContainer .discardChanges {\n  right: 60px;\n}\n\n.escher-container .settingsBoxContainer {\n  color: rgb(119, 119, 119);\n  display: inline-block;\n  position: relative;\n  width: 90%;\n  max-width: 520px;\n  height: 100%;\n  z-index: 10;\n}\n\n.escher-container .settingsBox {\n  font-size: 13px;\n  box-sizing: border-box;\n  display: inline-block;\n  max-height: 100%;\n  width: 100%;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  background: rgba(255, 255, 255, 0.953);\n  padding: 8px;\n  margin: 0;\n  border: 1px solid #ddd;\n  text-align: left;\n}\n\n.escher-container .settingsBox * {\n  box-sizing: border-box;\n}\n\n.escher-container .settingsBox .title {\n  font-size: 17px;\n  font-weight: 700;\n  color: #777777;\n}\n\n.escher-container .settingsBox .subheading {\n  font-size: 13px;\n  font-weight: 700;\n  margin-top: 15px;\n  color: #777777;\n}\n\n.escher-container .settingsBox table {\n  border-collapse: collapse;\n}\n\n.escher-container .settingsBox label {\n  display: inline;\n}\n\n.escher-container .settingsBox .radioSelection {\n  cursor: default;\n}\n\n.escher-container .radioSelection td {\n  padding: 3px 5px;\n}\n\n.escher-container .radioSelection input[type=radio] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .radioSelection .optionLabel {\n  width: 88px;\n}\n\n.escher-container .radioSelection .optionLabelWide {\n  width: 192px;\n}\n\n.escher-container .radioSelection .optionGroup {\n  margin-right: 10px\n}\n\n.escher-container .settingsBox .singleLine {\n  display: flex;\n}\n\n.escher-container .settingsContainer label {\n  display: block;\n  margin-bottom: 0;\n}\n\n.escher-container .settingsBoxContainer input[type=checkbox] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .settingsTip {\n  font-size: 13px;\n}\n\n.escher-container .settingsBoxContainer hr {\n  margin: 18px 0;\n  border: 0;\n  border-top: 1px solid #dddddd;\n}\n\n.escher-container .scaleTitle {\n  margin-top: 15px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .selector {\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  padding-top: 2px;\n}\n\n.escher-container .selectorTitle {\n  background-color: white;\n  border: 1px solid #a9a9a9;\n  padding-left: 4px;\n  cursor: default;\n  width: 162px;\n}\n\n.escher-container .selectorTitle:hover:not(.disabled) {\n  border-color: black;\n}\n\n.escher-container .selectorTitle.disabled {\n  background-color: #f1ecfa;\n}\n\n.escher-container .selectorMenu {\n  position: absolute;\n  z-index: 4;\n  background-color: white;\n  border: 1px solid #a9a9a9;\n  min-width: 162px;\n}\n\n.escher-container .scaleSelection {\n  cursor: default;\n  padding: 0 6px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .scaleSelection:hover {\n  background-color: dodgerblue;\n  color: white;\n}\n\n.escher-container .settingsBox .icon-sort-down {\n  position: absolute;\n  top: 0;\n}\n\n.escher-container .settingsBox .tooltipOption {\n  margin-left: 10px;\n}\n","",{version:3,sources:["webpack://./src/css/SettingsMenu.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,WAAW;EACX,YAAY;EACZ,UAAU;EACV,0BAA0B;EAC1B,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,QAAQ;EACR,WAAW;EACX,WAAW;EACX,kBAAkB;EAClB,sBAAsB;EACtB,6BAA6B;EAC7B,WAAW;EACX,YAAY;EACZ,SAAS;EACT,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA;EACE,+DAA+D;AACjE;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,yBAAyB;EACzB,qBAAqB;EACrB,kBAAkB;EAClB,UAAU;EACV,gBAAgB;EAChB,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,eAAe;EACf,sBAAsB;EACtB,qBAAqB;EACrB,gBAAgB;EAChB,WAAW;EACX,kBAAkB;EAClB,kBAAkB;EAClB,sCAAsC;EACtC,YAAY;EACZ,SAAS;EACT,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,cAAc;AAChB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,SAAS;EACT,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,YAAY;AACd;;AAEA;EACE;AACF;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,cAAc;EACd,gBAAgB;AAClB;;AAEA;EACE,SAAS;EACT,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,cAAc;EACd,SAAS;EACT,6BAA6B;AAC/B;;AAEA;EACE,gBAAgB;EAChB,aAAa;EACb,8BAA8B;AAChC;;AAEA;EACE,kBAAkB;EAClB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;EACE,uBAAuB;EACvB,yBAAyB;EACzB,iBAAiB;EACjB,eAAe;EACf,YAAY;AACd;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,uBAAuB;EACvB,yBAAyB;EACzB,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,aAAa;EACb,8BAA8B;AAChC;;AAEA;EACE,4BAA4B;EAC5B,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,MAAM;AACR;;AAEA;EACE,iBAAiB;AACnB",sourcesContent:[".escher-container .settingsBackground {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 9;\r\n  background: rgba(0,0,0,.4);\r\n  padding: 5% 0 80px;\r\n  text-align: center;\r\n}\r\n\r\n.escher-container .scale-editor .domain-input {\r\n  color: #333;\r\n}\r\n\r\n.escher-container .settingsBoxContainer button {\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 20px;\r\n  z-index: 10;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  font-weight: normal!important;\r\n  width: 34px;\r\n  height: 30px;\r\n  margin: 0;\r\n  padding: unset;\r\n  font-size: 14px!important;\r\n  border-radius: 3px;\r\n  -ms-touch-action: none;\r\n  touch-action: none;\r\n}\r\n\r\n.escher-container .settingsBoxContainer button:active {\r\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\r\n}\r\n\r\n.escher-container .settingsBoxContainer .discardChanges {\r\n  right: 60px;\r\n}\r\n\r\n.escher-container .settingsBoxContainer {\r\n  color: rgb(119, 119, 119);\r\n  display: inline-block;\r\n  position: relative;\r\n  width: 90%;\r\n  max-width: 520px;\r\n  height: 100%;\r\n  z-index: 10;\r\n}\r\n\r\n.escher-container .settingsBox {\r\n  font-size: 13px;\r\n  box-sizing: border-box;\r\n  display: inline-block;\r\n  max-height: 100%;\r\n  width: 100%;\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n  background: rgba(255, 255, 255, 0.953);\r\n  padding: 8px;\r\n  margin: 0;\r\n  border: 1px solid #ddd;\r\n  text-align: left;\r\n}\r\n\r\n.escher-container .settingsBox * {\r\n  box-sizing: border-box;\r\n}\r\n\r\n.escher-container .settingsBox .title {\r\n  font-size: 17px;\r\n  font-weight: 700;\r\n  color: #777777;\r\n}\r\n\r\n.escher-container .settingsBox .subheading {\r\n  font-size: 13px;\r\n  font-weight: 700;\r\n  margin-top: 15px;\r\n  color: #777777;\r\n}\r\n\r\n.escher-container .settingsBox table {\r\n  border-collapse: collapse;\r\n}\r\n\r\n.escher-container .settingsBox label {\r\n  display: inline;\r\n}\r\n\r\n.escher-container .settingsBox .radioSelection {\r\n  cursor: default;\r\n}\r\n\r\n.escher-container .radioSelection td {\r\n  padding: 3px 5px;\r\n}\r\n\r\n.escher-container .radioSelection input[type=radio] {\r\n  margin: 0;\r\n  margin-top: 4px;\r\n  margin-right: 4px;\r\n}\r\n\r\n.escher-container .radioSelection .optionLabel {\r\n  width: 88px;\r\n}\r\n\r\n.escher-container .radioSelection .optionLabelWide {\r\n  width: 192px;\r\n}\r\n\r\n.escher-container .radioSelection .optionGroup {\r\n  margin-right: 10px\r\n}\r\n\r\n.escher-container .settingsBox .singleLine {\r\n  display: flex;\r\n}\r\n\r\n.escher-container .settingsContainer label {\r\n  display: block;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.escher-container .settingsBoxContainer input[type=checkbox] {\r\n  margin: 0;\r\n  margin-top: 4px;\r\n  margin-right: 4px;\r\n}\r\n\r\n.escher-container .settingsTip {\r\n  font-size: 13px;\r\n}\r\n\r\n.escher-container .settingsBoxContainer hr {\r\n  margin: 18px 0;\r\n  border: 0;\r\n  border-top: 1px solid #dddddd;\r\n}\r\n\r\n.escher-container .scaleTitle {\r\n  margin-top: 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.escher-container .selector {\r\n  position: relative;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n  padding-top: 2px;\r\n}\r\n\r\n.escher-container .selectorTitle {\r\n  background-color: white;\r\n  border: 1px solid #a9a9a9;\r\n  padding-left: 4px;\r\n  cursor: default;\r\n  width: 162px;\r\n}\r\n\r\n.escher-container .selectorTitle:hover:not(.disabled) {\r\n  border-color: black;\r\n}\r\n\r\n.escher-container .selectorTitle.disabled {\r\n  background-color: #f1ecfa;\r\n}\r\n\r\n.escher-container .selectorMenu {\r\n  position: absolute;\r\n  z-index: 4;\r\n  background-color: white;\r\n  border: 1px solid #a9a9a9;\r\n  min-width: 162px;\r\n}\r\n\r\n.escher-container .scaleSelection {\r\n  cursor: default;\r\n  padding: 0 6px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.escher-container .scaleSelection:hover {\r\n  background-color: dodgerblue;\r\n  color: white;\r\n}\r\n\r\n.escher-container .settingsBox .icon-sort-down {\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.escher-container .settingsBox .tooltipOption {\r\n  margin-left: 10px;\r\n}\r\n"],sourceRoot:""}]);const a=s},198:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(148),a=(r=n(942))&&r.__esModule?r:{default:r};t.default=function(e){var t=e.className,n=e.vertical,r=e.marks,l=e.included,c=e.upperBound,u=e.lowerBound,h=e.max,d=e.min,p=Object.keys(r),f=p.length,g=.9*(f>1?100/(f-1):100),m=h-d,b=p.map(parseFloat).sort((function(e,t){return e-t})).map((function(e){var h,p=!l&&e===c||l&&e<=c&&e>=u,f=(0,a.default)(((h={})[t+"-text"]=!0,h[t+"-text-active"]=p,h)),b=n?{marginBottom:"-50%",bottom:(e-d)/m*100+"%"}:{width:g+"%",marginLeft:-g/2+"%",left:(e-d)/m*100+"%"},A=r[e],_="object"===(void 0===A?"undefined":o(A)),v=_?A.label:A,y=_?i({},b,A.style):b;return(0,s.h)("span",{className:f,style:y,key:e},v)}));return(0,s.h)("div",{className:t},b)}},203:(e,t,n)=>{"use strict";n(63);var r=n(633);Object.defineProperty(t,"Q6",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},223:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){function o(t){var r=new i.default(t);n.call(e,r)}if(e.addEventListener){var s=(a=!1,"object"==typeof r?a=r.capture||!1:"boolean"==typeof r&&(a=r),e.addEventListener(t,o,r||!1),{v:{remove:function(){e.removeEventListener(t,o,a)}}});if("object"==typeof s)return s.v}else if(e.attachEvent)return e.attachEvent("on"+t,o),{remove:function(){e.detachEvent("on"+t,o)}};var a};var r,i=(r=n(88))&&r.__esModule?r:{default:r};e.exports=t.default},228:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(a[c]=o[c]);if(t){s=t(o);for(var u=0;u<s.length;u++)r.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},239:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".escher-tooltip *{\n    line-height: 1.42857143;\n    box-sizing: border-box;\n  }\n  \n  .escher-tooltip button {\n    color: white;\n    border: 1px solid #2E2F2F;\n    background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n    background-color: white;\n    border-color: #474949;\n    line-height: 1;\n    border-radius: 4px;\n    text-align: center;\n    vertical-align: middle;\n    cursor: pointer;\n    font-size: 90%;\n    font-weight: 400;\n    height: 23px;\n    width: auto;\n  }\n  \n  .escher-tooltip .buttonBar {\n    margin-top: 3px;\n    position: static;\n  }\n  \n  .escher-tooltip button.active {\n    background-image: linear-gradient(#ffa500, #ff9523 6%, #fc8014);\n  }\n  \n  .escher-tooltip button:disabled {\n    border: 1px solid #2E2F2F;\n    color: #eee;\n    background-color: #ffa500;\n    background-image: none;\n    cursor: not-allowed;\n  }\n  \n  .escher-tooltip .input {\n    line-height: 1;\n    border-radius: 4px;\n    vertical-align: middle;\n    font-size: 90%;\n    height: 23px;\n    color: black;\n    background-color: #F0F0F0;\n    border: 1px solid #797979;\n    width: 47%;\n    text-align: center;\n    cursor: text;\n  }\n  \n  .escher-tooltip .biggId {\n    font-size: 20px;\n    font-weight: bold;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  \n  .escher-tooltip .name {\n    height: 21px;\n    font-size: 15px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  \n  .escher-tooltip .interfacePanel {\n    flex-direction: column;\n    width: 100%;\n  }\n  \n  .escher-tooltip .labels, .escher-tooltip .inputPanel, .escher-tooltip .buttonBar, .escher-tooltip .interfacePanel {\n    display: -webkit-flex;\n    display: flex;\n    justify-content: space-between;\n  }\n  \n  .escher-tooltip .slider {\n    display: -webkit-flex;\n    display: flex;\n    flex-direction: column;\n    align-self: center;\n  }\n  \n  .escher-distribution-histogram {\n    width: 100%;\n    height: 100px;\n  }","",{version:3,sources:["webpack://./src/css/DistributionTooltipComponent.css"],names:[],mappings:"AAAA;IACI,uBAAuB;IACvB,sBAAsB;EACxB;;EAEA;IACE,YAAY;IACZ,yBAAyB;IACzB,+DAA+D;IAC/D,uBAAuB;IACvB,qBAAqB;IACrB,cAAc;IACd,kBAAkB;IAClB,kBAAkB;IAClB,sBAAsB;IACtB,eAAe;IACf,cAAc;IACd,gBAAgB;IAChB,YAAY;IACZ,WAAW;EACb;;EAEA;IACE,eAAe;IACf,gBAAgB;EAClB;;EAEA;IACE,+DAA+D;EACjE;;EAEA;IACE,yBAAyB;IACzB,WAAW;IACX,yBAAyB;IACzB,sBAAsB;IACtB,mBAAmB;EACrB;;EAEA;IACE,cAAc;IACd,kBAAkB;IAClB,sBAAsB;IACtB,cAAc;IACd,YAAY;IACZ,YAAY;IACZ,yBAAyB;IACzB,yBAAyB;IACzB,UAAU;IACV,kBAAkB;IAClB,YAAY;EACd;;EAEA;IACE,eAAe;IACf,iBAAiB;IACjB,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;EAEA;IACE,YAAY;IACZ,eAAe;IACf,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;EAEA;IACE,sBAAsB;IACtB,WAAW;EACb;;EAEA;IACE,qBAAqB;IACrB,aAAa;IACb,8BAA8B;EAChC;;EAEA;IACE,qBAAqB;IACrB,aAAa;IACb,sBAAsB;IACtB,kBAAkB;EACpB;;EAEA;IACE,WAAW;IACX,aAAa;EACf",sourcesContent:[".escher-tooltip *{\r\n    line-height: 1.42857143;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  .escher-tooltip button {\r\n    color: white;\r\n    border: 1px solid #2E2F2F;\r\n    background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\r\n    background-color: white;\r\n    border-color: #474949;\r\n    line-height: 1;\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n    cursor: pointer;\r\n    font-size: 90%;\r\n    font-weight: 400;\r\n    height: 23px;\r\n    width: auto;\r\n  }\r\n  \r\n  .escher-tooltip .buttonBar {\r\n    margin-top: 3px;\r\n    position: static;\r\n  }\r\n  \r\n  .escher-tooltip button.active {\r\n    background-image: linear-gradient(#ffa500, #ff9523 6%, #fc8014);\r\n  }\r\n  \r\n  .escher-tooltip button:disabled {\r\n    border: 1px solid #2E2F2F;\r\n    color: #eee;\r\n    background-color: #ffa500;\r\n    background-image: none;\r\n    cursor: not-allowed;\r\n  }\r\n  \r\n  .escher-tooltip .input {\r\n    line-height: 1;\r\n    border-radius: 4px;\r\n    vertical-align: middle;\r\n    font-size: 90%;\r\n    height: 23px;\r\n    color: black;\r\n    background-color: #F0F0F0;\r\n    border: 1px solid #797979;\r\n    width: 47%;\r\n    text-align: center;\r\n    cursor: text;\r\n  }\r\n  \r\n  .escher-tooltip .biggId {\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n  \r\n  .escher-tooltip .name {\r\n    height: 21px;\r\n    font-size: 15px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n  \r\n  .escher-tooltip .interfacePanel {\r\n    flex-direction: column;\r\n    width: 100%;\r\n  }\r\n  \r\n  .escher-tooltip .labels, .escher-tooltip .inputPanel, .escher-tooltip .buttonBar, .escher-tooltip .interfacePanel {\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .escher-tooltip .slider {\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-self: center;\r\n  }\r\n  \r\n  .escher-distribution-histogram {\r\n    width: 100%;\r\n    height: 100px;\r\n  }"],sourceRoot:""}]);const a=s},311:e=>{"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&s[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},354:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},368:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(354),i=n.n(r),o=n(314),s=n.n(o),a=n(417),l=n.n(a),c=new URL(n(427),n.b),u=new URL(n(127),n.b),h=new URL(n(785),n.b),d=new URL(n(625),n.b),p=new URL(n(941),n.b),f=s()(i()),g=l()(c),m=l()(c,{hash:"#iefix"}),b=l()(u),A=l()(h),_=l()(d),v=l()(p,{hash:"#fontello"});f.push([e.id,`@font-face {\n  font-family: 'fontello';\n  src: url(${g});\n  src: url(${m}) format('embedded-opentype'),\n       url(${b}) format('woff2'),\n       url(${A}) format('woff'),\n       url(${_}) format('truetype'),\n       url(${v}) format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */\n/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */\n/*\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  @font-face {\n    font-family: 'fontello';\n    src: url('../font/fontello.svg?38609741#fontello') format('svg');\n  }\n}\n*/\n[class^="icon-"]:before, [class*=" icon-"]:before {\n  font-family: "fontello";\n  font-style: normal;\n  font-weight: normal;\n  speak: never;\n\n  display: inline-block;\n  text-decoration: inherit;\n  width: 1em;\n  margin-right: .2em;\n  text-align: center;\n  /* opacity: .8; */\n\n  /* For safety - reset parent styles, that can break glyph codes*/\n  font-variant: normal;\n  text-transform: none;\n\n  /* fix buttons height, for twitter bootstrap */\n  line-height: 1em;\n\n  /* Animation center compensation - margins should be symmetric */\n  /* remove if not needed */\n  margin-left: .2em;\n\n  /* you can be more comfortable with increased icons size */\n  /* font-size: 120%; */\n\n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n\n  /* Uncomment for 3D effect */\n  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */\n}\n\n.icon-ok:before { content: '\\e800'; } /* '' */\n.icon-cancel:before { content: '\\e801'; } /* '' */\n.icon-plus:before { content: '\\e802'; } /* '' */\n.icon-down-big:before { content: '\\e803'; } /* '' */\n.icon-left-big:before { content: '\\e804'; } /* '' */\n.icon-right-big:before { content: '\\e805'; } /* '' */\n.icon-up-big:before { content: '\\e806'; } /* '' */\n.icon-left-open:before { content: '\\e807'; } /* '' */\n.icon-right-open:before { content: '\\e808'; } /* '' */\n.icon-wrench:before { content: '\\e809'; } /* '' */\n.icon-resize-full:before { content: '\\e80a'; } /* '' */\n.icon-cw:before { content: '\\e80b'; } /* '' */\n.icon-arrows-outside:before { content: '\\e80c'; } /* '' */\n.icon-arrows-inside:before { content: '\\e80d'; } /* '' */\n.icon-trash-empty:before { content: '\\e80e'; } /* '' */\n.icon-font:before { content: '\\e80f'; } /* '' */\n.icon-zoom-in:before { content: '\\e810'; } /* '' */\n.icon-zoom-out:before { content: '\\e811'; } /* '' */\n.icon-move:before { content: '\\f047'; } /* '' */\n.icon-resize-full-alt:before { content: '\\f0b2'; } /* '' */\n.icon-blank:before { content: '\\f0c8'; } /* '' */\n.icon-sort-down:before { content: '\\f0dd'; } /* '' */\n.icon-mouse-pointer:before { content: '\\f245'; } /* '' */\n.icon-merge:before { content: '\\26AF'; }\n.icon-shortest-path:before { content: ' \\1F3F3'; }`,"",{version:3,sources:["webpack://./icons/css/fontello.css"],names:[],mappings:"AAAA;EACE,uBAAuB;EACvB,4CAAyC;EACzC;;;;4DAIgE;EAChE,mBAAmB;EACnB,kBAAkB;AACpB;AACA,gGAAgG;AAChG,2FAA2F;AAC3F;;;;;;;CAOC;AACD;EACE,uBAAuB;EACvB,kBAAkB;EAClB,mBAAmB;EACnB,YAAY;;EAEZ,qBAAqB;EACrB,wBAAwB;EACxB,UAAU;EACV,kBAAkB;EAClB,kBAAkB;EAClB,iBAAiB;;EAEjB,gEAAgE;EAChE,oBAAoB;EACpB,oBAAoB;;EAEpB,8CAA8C;EAC9C,gBAAgB;;EAEhB,gEAAgE;EAChE,yBAAyB;EACzB,iBAAiB;;EAEjB,0DAA0D;EAC1D,qBAAqB;;EAErB,6CAA6C;EAC7C,mCAAmC;EACnC,kCAAkC;;EAElC,4BAA4B;EAC5B,uDAAuD;AACzD;;AAEA,kBAAkB,gBAAgB,EAAE,EAAE,QAAQ;AAC9C,sBAAsB,gBAAgB,EAAE,EAAE,QAAQ;AAClD,oBAAoB,gBAAgB,EAAE,EAAE,QAAQ;AAChD,wBAAwB,gBAAgB,EAAE,EAAE,QAAQ;AACpD,wBAAwB,gBAAgB,EAAE,EAAE,QAAQ;AACpD,yBAAyB,gBAAgB,EAAE,EAAE,QAAQ;AACrD,sBAAsB,gBAAgB,EAAE,EAAE,QAAQ;AAClD,yBAAyB,gBAAgB,EAAE,EAAE,QAAQ;AACrD,0BAA0B,gBAAgB,EAAE,EAAE,QAAQ;AACtD,sBAAsB,gBAAgB,EAAE,EAAE,QAAQ;AAClD,2BAA2B,gBAAgB,EAAE,EAAE,QAAQ;AACvD,kBAAkB,gBAAgB,EAAE,EAAE,QAAQ;AAC9C,8BAA8B,gBAAgB,EAAE,EAAE,QAAQ;AAC1D,6BAA6B,gBAAgB,EAAE,EAAE,QAAQ;AACzD,2BAA2B,gBAAgB,EAAE,EAAE,QAAQ;AACvD,oBAAoB,gBAAgB,EAAE,EAAE,QAAQ;AAChD,uBAAuB,gBAAgB,EAAE,EAAE,QAAQ;AACnD,wBAAwB,gBAAgB,EAAE,EAAE,QAAQ;AACpD,oBAAoB,gBAAgB,EAAE,EAAE,QAAQ;AAChD,+BAA+B,gBAAgB,EAAE,EAAE,QAAQ;AAC3D,qBAAqB,gBAAgB,EAAE,EAAE,QAAQ;AACjD,yBAAyB,gBAAgB,EAAE,EAAE,QAAQ;AACrD,6BAA6B,gBAAgB,EAAE,EAAE,QAAQ;AACzD,qBAAqB,gBAAgB,EAAE;AACvC,6BAA6B,kBAAkB,EAAE",sourcesContent:["@font-face {\r\n  font-family: 'fontello';\r\n  src: url('../font/fontello.eot?38609741');\r\n  src: url('../font/fontello.eot?38609741#iefix') format('embedded-opentype'),\r\n       url('../font/fontello.woff2?38609741') format('woff2'),\r\n       url('../font/fontello.woff?38609741') format('woff'),\r\n       url('../font/fontello.ttf?38609741') format('truetype'),\r\n       url('../font/fontello.svg?38609741#fontello') format('svg');\r\n  font-weight: normal;\r\n  font-style: normal;\r\n}\r\n/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */\r\n/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */\r\n/*\r\n@media screen and (-webkit-min-device-pixel-ratio:0) {\r\n  @font-face {\r\n    font-family: 'fontello';\r\n    src: url('../font/fontello.svg?38609741#fontello') format('svg');\r\n  }\r\n}\r\n*/\r\n[class^=\"icon-\"]:before, [class*=\" icon-\"]:before {\r\n  font-family: \"fontello\";\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  speak: never;\r\n\r\n  display: inline-block;\r\n  text-decoration: inherit;\r\n  width: 1em;\r\n  margin-right: .2em;\r\n  text-align: center;\r\n  /* opacity: .8; */\r\n\r\n  /* For safety - reset parent styles, that can break glyph codes*/\r\n  font-variant: normal;\r\n  text-transform: none;\r\n\r\n  /* fix buttons height, for twitter bootstrap */\r\n  line-height: 1em;\r\n\r\n  /* Animation center compensation - margins should be symmetric */\r\n  /* remove if not needed */\r\n  margin-left: .2em;\r\n\r\n  /* you can be more comfortable with increased icons size */\r\n  /* font-size: 120%; */\r\n\r\n  /* Font smoothing. That was taken from TWBS */\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n\r\n  /* Uncomment for 3D effect */\r\n  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */\r\n}\r\n\r\n.icon-ok:before { content: '\\e800'; } /* '' */\r\n.icon-cancel:before { content: '\\e801'; } /* '' */\r\n.icon-plus:before { content: '\\e802'; } /* '' */\r\n.icon-down-big:before { content: '\\e803'; } /* '' */\r\n.icon-left-big:before { content: '\\e804'; } /* '' */\r\n.icon-right-big:before { content: '\\e805'; } /* '' */\r\n.icon-up-big:before { content: '\\e806'; } /* '' */\r\n.icon-left-open:before { content: '\\e807'; } /* '' */\r\n.icon-right-open:before { content: '\\e808'; } /* '' */\r\n.icon-wrench:before { content: '\\e809'; } /* '' */\r\n.icon-resize-full:before { content: '\\e80a'; } /* '' */\r\n.icon-cw:before { content: '\\e80b'; } /* '' */\r\n.icon-arrows-outside:before { content: '\\e80c'; } /* '' */\r\n.icon-arrows-inside:before { content: '\\e80d'; } /* '' */\r\n.icon-trash-empty:before { content: '\\e80e'; } /* '' */\r\n.icon-font:before { content: '\\e80f'; } /* '' */\r\n.icon-zoom-in:before { content: '\\e810'; } /* '' */\r\n.icon-zoom-out:before { content: '\\e811'; } /* '' */\r\n.icon-move:before { content: '\\f047'; } /* '' */\r\n.icon-resize-full-alt:before { content: '\\f0b2'; } /* '' */\r\n.icon-blank:before { content: '\\f0c8'; } /* '' */\r\n.icon-sort-down:before { content: '\\f0dd'; } /* '' */\r\n.icon-mouse-pointer:before { content: '\\f245'; } /* '' */\r\n.icon-merge:before { content: '\\26AF'; }\r\n.icon-shortest-path:before { content: ' \\1F3F3'; }"],sourceRoot:""}]);const y=f},392:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".escher-container .search-container {\n  display: flex;\n  flex-direction: row;\n  background-color: rgba(255, 255, 255, 0.95);\n  padding: 3px;\n  border: 1px solid #DDD;\n}\n\n.escher-container .search-container .search-field {\n  flex: 0 0 auto;\n  color: #777;\n  border: 1px solid #DDD;\n  width: 114px;\n  height: 29px;\n  border-radius: 3px;\n  font-size: 13px;\n}\n\n.escher-container .search-container .search-counter {\n  flex: 1;\n  color: #777;\n  font-size: 13px;\n  padding: 9px 0 0 6px;\n}\n\n.escher-container .search-container .search-bar-button {\n  flex: 0 0 auto;\n  border-radius: 4px;\n  text-align: center;\n  vertical-align: middle;\n  font-size: 14px;\n  font-weight: 400;\n  height: 29px;\n  width: 34px;\n  margin: 3px;\n}\n\n.escher-container .search-container .search-bar-button.left {\n  border-top-right-radius: 0px;\n  border-bottom-right-radius: 0px;\n  margin-right: 0;\n}\n\n.escher-container .search-container .search-bar-button.right {\n  border-top-left-radius: 0px;\n  border-bottom-left-radius: 0px;\n  margin-left: 0;\n}\n\n.escher-container .search-container .search-bar-button:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n","",{version:3,sources:["webpack://./src/css/SearchBar.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,2CAA2C;EAC3C,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,cAAc;EACd,WAAW;EACX,sBAAsB;EACtB,YAAY;EACZ,YAAY;EACZ,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,OAAO;EACP,WAAW;EACX,eAAe;EACf,oBAAoB;AACtB;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,WAAW;EACX,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,+BAA+B;EAC/B,eAAe;AACjB;;AAEA;EACE,2BAA2B;EAC3B,8BAA8B;EAC9B,cAAc;AAChB;;AAEA;EACE,+DAA+D;AACjE",sourcesContent:[".escher-container .search-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  background-color: rgba(255, 255, 255, 0.95);\r\n  padding: 3px;\r\n  border: 1px solid #DDD;\r\n}\r\n\r\n.escher-container .search-container .search-field {\r\n  flex: 0 0 auto;\r\n  color: #777;\r\n  border: 1px solid #DDD;\r\n  width: 114px;\r\n  height: 29px;\r\n  border-radius: 3px;\r\n  font-size: 13px;\r\n}\r\n\r\n.escher-container .search-container .search-counter {\r\n  flex: 1;\r\n  color: #777;\r\n  font-size: 13px;\r\n  padding: 9px 0 0 6px;\r\n}\r\n\r\n.escher-container .search-container .search-bar-button {\r\n  flex: 0 0 auto;\r\n  border-radius: 4px;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  height: 29px;\r\n  width: 34px;\r\n  margin: 3px;\r\n}\r\n\r\n.escher-container .search-container .search-bar-button.left {\r\n  border-top-right-radius: 0px;\r\n  border-bottom-right-radius: 0px;\r\n  margin-right: 0;\r\n}\r\n\r\n.escher-container .search-container .search-bar-button.right {\r\n  border-top-left-radius: 0px;\r\n  border-bottom-left-radius: 0px;\r\n  margin-left: 0;\r\n}\r\n\r\n.escher-container .search-container .search-bar-button:active {\r\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\r\n}\r\n"],sourceRoot:""}]);const a=s},411:(e,t,n)=>{var r;!function(i,o){if(i){for(var s,a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)a[111+h]="f"+h;for(h=0;h<=9;++h)a[h+96]=h.toString();A.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},A.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},A.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},A.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},A.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(b(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},A.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},A.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);s=null},A.init=function(){var e=A(o);for(var t in e)"_"!==t.charAt(0)&&(A[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},A.init(),i.Mousetrap=A,e.exports&&(e.exports=A),void 0===(r=function(){return A}.call(t,n,t,e))||(e.exports=r)}function d(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function p(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return a[e.which]?a[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function g(e,t,n){return n||(n=function(){if(!s)for(var e in s={},a)e>95&&e<112||a.hasOwnProperty(e)&&(s[a[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function m(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],u[r]&&(r=u[r]),t&&"keypress"!=t&&c[r]&&(r=c[r],o.push("shift")),f(r)&&o.push(r);return{key:r,modifiers:o,action:t=g(r,o,t)}}function b(e,t){return null!==e&&e!==o&&(e===t||b(e.parentNode,t))}function A(e){var t=this;if(e=e||o,!(t instanceof A))return new A(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},i=!1,s=!1,a=!1;function l(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(a=!1)}function c(e,n,i,o,s,a){var l,c,u,h,d=[],p=i.type;if(!t._callbacks[e])return[];for("keyup"==p&&f(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(c=t._callbacks[e][l],(o||!c.seq||r[c.seq]==c.level)&&p==c.action&&("keypress"==p&&!i.metaKey&&!i.ctrlKey||(u=n,h=c.modifiers,u.sort().join(",")===h.sort().join(",")))){var g=!o&&c.combo==s,m=o&&c.seq==o&&c.level==a;(g||m)&&t._callbacks[e].splice(l,1),d.push(c)}return d}function u(e,n,r,i){t.stopCallback(n,n.target||n.srcElement,r,i)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=p(e);n&&("keyup"!=e.type||i!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function g(e,o,s,h,d){t._directMap[e+":"+s]=o;var f,b=(e=e.replace(/\s+/g," ")).split(" ");b.length>1?function(e,t,o,s){function c(t){return function(){a=t,++r[e],clearTimeout(n),n=setTimeout(l,1e3)}}function h(t){u(o,t,e),"keyup"!==s&&(i=p(t)),setTimeout(l,10)}r[e]=0;for(var d=0;d<t.length;++d){var f=d+1===t.length?h:c(s||m(t[d+1]).action);g(t[d],f,s,e,d)}}(e,b,o,s):(f=m(e,s),t._callbacks[f.key]=t._callbacks[f.key]||[],c(f.key,f.modifiers,{type:f.action},h,e,d),t._callbacks[f.key][h?"unshift":"push"]({callback:o,modifiers:f.modifiers,action:f.action,seq:h,level:d,combo:e}))}t._handleKey=function(e,t,n){var r,i=c(e,t,n),o={},h=0,d=!1;for(r=0;r<i.length;++r)i[r].seq&&(h=Math.max(h,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=h)continue;d=!0,o[i[r].seq]=1,u(i[r].callback,n,i[r].combo,i[r].seq)}else d||u(i[r].callback,n,i[r].combo);var p="keypress"==n.type&&s;n.type!=a||f(e)||p||l(o),s=d&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)g(e[r],t,n)},d(e,"keypress",h),d(e,"keydown",h),d(e,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},417:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},427:(e,t,n)=>{"use strict";e.exports=n.p+"f6999b429dec7cda7474.eot?38609741"},497:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".escher-container .button-panel {\n  position: absolute;\n  left: 4px;\n  top: 20%;\n  margin-top: -32px;\n  padding-left: 0;\n  touch-action: none;\n}\n\n.escher-container .button-panel>li {\n  margin-top: 5px;\n  display: block;\n\n  /* these sometimes get overridden */\n  margin-left: 0 !important;\n}\n\n.escher-container .grouping {\n  display: block;\n}\n\n.escher-container .buttonGroup {\n  display: block;\n  margin-bottom: -1px;\n  padding: 5px 0px;\n  border-radius: 0;\n}\n\n.escher-container .grouping>.buttonGroup:first-child {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n}\n\n.escher-container .grouping>.buttonGroup:last-child {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n.escher-container .button-panel>.grouping:last-child {\n  margin-top: 4px;\n}\n\n.escher-container #currentMode,\n.escher-container .active-button {\n  background-image: linear-gradient(#8F4F3F,#834c3c 6%,#8d3a2d) !important;\n}\n\n.escher-container .buttonGroup.btn {\n  margin-top: -1px;\n}\n\n.escher-container .button {\n  border-radius: 4px;\n}\n\n.escher-container .button.btn, .escher-container .buttonGroup.btn {\n  padding: unset;\n  color: white!important;\n  border: 1px solid #474949;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  font-size: 14px!important;\n  font-weight: 400;\n  width: 40px;\n  height: 40px;\n}\n\n.escher-container .button-panel .button:active, .escher-container .buttonGroup label:active, .escher-container .button-panel .buttonGroup:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .button-panel .fa {\n  font-size: 24px;\n}\n\n/* Icons */\n.escher-container .button-panel [class^='icon-'] {\n  font-size: 23px;\n}\n\n.escher-container .kth-reaction-arrows {\n  display: flex;\n    width: 40px;\n    flex-direction: row;\n}\n\n.escher-container .kth-reaction-arrows button.btn {\n  width: 20px;\n  height: 20px;\n}\n\n.escher-container .kth-reaction-arrows button.btn i {\n  font-size: 12px;\n}","",{version:3,sources:["webpack://./src/css/ButtonPanel.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,cAAc;;EAEd,mCAAmC;EACnC,yBAAyB;AAC3B;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,cAAc;EACd,mBAAmB;EACnB,gBAAgB;EAChB,gBAAgB;AAClB;;AAEA;EACE,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,8BAA8B;EAC9B,+BAA+B;AACjC;;AAEA;EACE,eAAe;AACjB;;AAEA;;EAEE,wEAAwE;AAC1E;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,sBAAsB;EACtB,yBAAyB;EACzB,+DAA+D;EAC/D,uBAAuB;EACvB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,yBAAyB;EACzB,gBAAgB;EAChB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,+DAA+D;AACjE;;AAEA;EACE,eAAe;AACjB;;AAEA,UAAU;AACV;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;IACX,WAAW;IACX,mBAAmB;AACvB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,eAAe;AACjB",sourcesContent:[".escher-container .button-panel {\r\n  position: absolute;\r\n  left: 4px;\r\n  top: 20%;\r\n  margin-top: -32px;\r\n  padding-left: 0;\r\n  touch-action: none;\r\n}\r\n\r\n.escher-container .button-panel>li {\r\n  margin-top: 5px;\r\n  display: block;\r\n\r\n  /* these sometimes get overridden */\r\n  margin-left: 0 !important;\r\n}\r\n\r\n.escher-container .grouping {\r\n  display: block;\r\n}\r\n\r\n.escher-container .buttonGroup {\r\n  display: block;\r\n  margin-bottom: -1px;\r\n  padding: 5px 0px;\r\n  border-radius: 0;\r\n}\r\n\r\n.escher-container .grouping>.buttonGroup:first-child {\r\n  border-top-left-radius: 4px;\r\n  border-top-right-radius: 4px;\r\n}\r\n\r\n.escher-container .grouping>.buttonGroup:last-child {\r\n  border-bottom-left-radius: 4px;\r\n  border-bottom-right-radius: 4px;\r\n}\r\n\r\n.escher-container .button-panel>.grouping:last-child {\r\n  margin-top: 4px;\r\n}\r\n\r\n.escher-container #currentMode,\r\n.escher-container .active-button {\r\n  background-image: linear-gradient(#8F4F3F,#834c3c 6%,#8d3a2d) !important;\r\n}\r\n\r\n.escher-container .buttonGroup.btn {\r\n  margin-top: -1px;\r\n}\r\n\r\n.escher-container .button {\r\n  border-radius: 4px;\r\n}\r\n\r\n.escher-container .button.btn, .escher-container .buttonGroup.btn {\r\n  padding: unset;\r\n  color: white!important;\r\n  border: 1px solid #474949;\r\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\r\n  background-color: white;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  cursor: pointer;\r\n  font-size: 14px!important;\r\n  font-weight: 400;\r\n  width: 40px;\r\n  height: 40px;\r\n}\r\n\r\n.escher-container .button-panel .button:active, .escher-container .buttonGroup label:active, .escher-container .button-panel .buttonGroup:active {\r\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\r\n}\r\n\r\n.escher-container .button-panel .fa {\r\n  font-size: 24px;\r\n}\r\n\r\n/* Icons */\r\n.escher-container .button-panel [class^='icon-'] {\r\n  font-size: 23px;\r\n}\r\n\r\n.escher-container .kth-reaction-arrows {\r\n  display: flex;\r\n    width: 40px;\r\n    flex-direction: row;\r\n}\r\n\r\n.escher-container .kth-reaction-arrows button.btn {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.escher-container .kth-reaction-arrows button.btn i {\r\n  font-size: 12px;\r\n}"],sourceRoot:""}]);const a=s},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},587:e=>{function t(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+t);return n}function n(){this.step="    ",this.shift=t(this.step)}function r(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function i(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+t+t+"AND ").replace(/ BETWEEN /gi,"~::~"+t+"BETWEEN ").replace(/ CASE /gi,"~::~"+t+"CASE ").replace(/ ELSE /gi,"~::~"+t+"ELSE ").replace(/ END /gi,"~::~"+t+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+t+"ON ").replace(/ OR /gi,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+t).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+t+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}n.prototype.xml=function(e,n){var r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),i=r.length,o=!1,s=0,a="",l=0,c=n?t(n):this.shift;for(l=0;l<i;l++)r[l].search(/<!/)>-1?(a+=c[s]+r[l],o=!0,(r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1||r[l].search(/!DOCTYPE/)>-1)&&(o=!1)):r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1?(a+=r[l],o=!1):/^<\w/.exec(r[l-1])&&/^<\/\w/.exec(r[l])&&/^<[\w:\-\.\,]+/.exec(r[l-1])==/^<\/[\w:\-\.\,]+/.exec(r[l])[0].replace("/","")?(a+=r[l],o||s--):r[l].search(/<\w/)>-1&&-1==r[l].search(/<\//)&&-1==r[l].search(/\/>/)?a=a+=o?r[l]:c[s++]+r[l]:r[l].search(/<\w/)>-1&&r[l].search(/<\//)>-1?a=a+=o?r[l]:c[s]+r[l]:r[l].search(/<\//)>-1?a=a+=o?r[l]:c[--s]+r[l]:r[l].search(/\/>/)>-1?a=a+=o?r[l]:c[s]+r[l]:r[l].search(/<\?/)>-1||r[l].search(/xmlns\:/)>-1||r[l].search(/xmlns\=/)>-1?a+=c[s]+r[l]:a+=r[l];return"\n"==a[0]?a.slice(1):a},n.prototype.json=function(e,t){return t=t||this.step,"undefined"==typeof JSON?e:"string"==typeof e?JSON.stringify(JSON.parse(e),null,t):"object"==typeof e?JSON.stringify(e,null,t):e},n.prototype.css=function(e,n){var r=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),i=r.length,o=0,s="",a=0,l=n?t(n):this.shift;for(a=0;a<i;a++)/\{/.exec(r[a])?s+=l[o++]+r[a]:/\}/.exec(r[a])?s+=l[--o]+r[a]:(/\*\\/.exec(r[a]),s+=l[o]+r[a]);return s.replace(/^\n{1,}/,"")},n.prototype.sql=function(e,n){var o=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),s=o.length,a=[],l=0,c=this.step,u=0,h="",d=0,p=n?t(n):this.shift;for(d=0;d<s;d++)a=d%2?a.concat(o[d]):a.concat(i(o[d],c));for(s=a.length,d=0;d<s;d++)u=r(a[d],u),/\s{0,}\s{0,}SELECT\s{0,}/.exec(a[d])&&(a[d]=a[d].replace(/\,/g,",\n"+c+c)),/\s{0,}\s{0,}SET\s{0,}/.exec(a[d])&&(a[d]=a[d].replace(/\,/g,",\n"+c+c)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(a[d])?h+=p[++l]+a[d]:/\'/.exec(a[d])?(u<1&&l&&l--,h+=a[d]):(h+=p[l]+a[d],u<1&&l&&l--);return h.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},n.prototype.xmlmin=function(e,t){return(t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},n.prototype.jsonmin=function(e){return"undefined"==typeof JSON?e:JSON.stringify(JSON.parse(e),null,0)},n.prototype.cssmin=function(e,t){return(t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},n.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},e.exports=new n},625:(e,t,n)=>{"use strict";e.exports=n.p+"38097d81662c76279920.ttf?38609741"},633:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(148),o=u(n(942)),s=u(n(833)),a=u(n(55)),l=u(n(711)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(46));function u(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));r.onEnd=function(){r.setState({handle:null}),r.removeDocumentEvents(),r.props.onAfterChange(r.getValue())};var i=n.count,o=n.min,s=n.max,a=Array.apply(null,Array(i+1)).map((function(){return o})),l="defaultValue"in n?n.defaultValue:a,c=(void 0!==n.value?n.value:l).map((function(e){return r.trimAlignValue(e)})),u=c[0]===s?0:c.length-1;return r.state={handle:null,recent:u,bounds:c},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;if(("value"in e||"min"in e||"max"in e)&&(this.props.min!==e.min||this.props.max!==e.max||!(0,s.default)(this.props.value,e.value))){var n=this.state.bounds,r=(e.value||n).map((function(n){return t.trimAlignValue(n,e)}));r.length===n.length&&r.every((function(e,t){return e===n[t]}))||(this.setState({bounds:r}),n.some((function(t){return c.isValueOutOfRange(t,e)}))&&this.props.onChange(r))}},t.prototype.onChange=function(e){var t=this.props;"value"in t?void 0!==e.handle&&this.setState({handle:e.handle}):this.setState(e);var n=r({},this.state,e).bounds;t.onChange(n)},t.prototype.onStart=function(e){var t=this.props,n=this.state,r=this.getValue();t.onBeforeChange(r);var i=this.calcValueByPos(e);this.startValue=i,this.startPosition=e;var o=this.getClosestBound(i),s=this.getBoundNeedMoving(i,o);if(this.setState({handle:s,recent:s}),i!==r[s]){var a=[].concat(n.bounds);a[s]=i,this.onChange({bounds:a})}},t.prototype.onMove=function(e,t){c.pauseEvent(e);var n=this.props,r=this.state,i=this.calcValueByPos(t);if(i!==r.bounds[r.handle]){var o=[].concat(r.bounds);o[r.handle]=i;var s=r.handle;if(!1!==n.pushable){var a=r.bounds[s];this.pushSurroundingHandles(o,s,a)}else n.allowCross&&(o.sort((function(e,t){return e-t})),s=o.indexOf(i));this.onChange({handle:s,bounds:o})}},t.prototype.onKeyboard=function(e){var t=this,n=c.getKeyboardValueMutator(e);if(n){var r=Object.keys(this.handlesRefs).reduce((function(e,n,r){return null!==e?e:t.handlesRefs[n].base===document.activeElement?r:e}),null);if(null===r)return void console.log("No handle ref");c.pauseEvent(e);var i=this.state.bounds[r],o=n(i,this.props),s=this.trimAlignValue(o);if(s===i)return;var a=[].concat(this.state.bounds);a[r]=s;var l=r;if(!1!==this.props.pushable){var u=this.state.bounds[l];this.pushSurroundingHandles(a,l,u)}else this.props.allowCross&&(a.sort((function(e,t){return e-t})),l=a.indexOf(s));this.onChange({handle:l,bounds:a})}},t.prototype.getValue=function(){return this.state.bounds},t.prototype.getClosestBound=function(e){for(var t=this.state.bounds,n=0,r=1;r<t.length-1;++r)e>t[r]&&(n=r);return Math.abs(t[n+1]-e)<Math.abs(t[n]-e)&&(n+=1),n},t.prototype.getBoundNeedMoving=function(e,t){var n=this.state,r=n.bounds,i=n.recent,o=t,s=r[t+1]===r[t];return s&&(o=i),s&&e!==r[t+1]&&(o=e<r[t+1]?t:t+1),o},t.prototype.getLowerBound=function(){return this.state.bounds[0]},t.prototype.getUpperBound=function(){var e=this.state.bounds;return e[e.length-1]},t.prototype.getPoints=function(){var e=this.props,t=e.marks,n=e.step,i=e.min,o=e.max,s=this._getPointsCache;if(!s||s.marks!==t||s.step!==n){var a=r({},t);if(null!==n)for(var l=i;l<=o;l+=n)a[l]=l;var c=Object.keys(a).map(parseFloat);c.sort((function(e,t){return e-t})),this._getPointsCache={marks:t,step:n,points:c}}return this._getPointsCache.points},t.prototype.pushSurroundingHandles=function(e,t,n){var r=this.props.pushable,i=e[t],o=0;if(e[t+1]-i<r&&(o=1),i-e[t-1]<r&&(o=-1),0!==o){var s=t+o,a=o*(e[s]-i);this.pushHandle(e,s,o,r-a)||(e[t]=n)}},t.prototype.pushHandle=function(e,t,n,r){for(var i=e[t],o=e[t];n*(o-i)<r;){if(!this.pushHandleOnePoint(e,t,n))return e[t]=i,!1;o=e[t]}return!0},t.prototype.pushHandleOnePoint=function(e,t,n){var r=this.getPoints(),i=r.indexOf(e[t])+n;if(i>=r.length||i<0)return!1;var o=t+n,s=r[i],a=this.props.pushable,l=n*(e[o]-s);return!!this.pushHandle(e,o,n,a-l)&&(e[t]=s,!0)},t.prototype.trimAlignValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r({},this.props,t),i=c.ensureValueInRange(e,n),o=this.ensureValueNotConflict(i,n);return c.ensureValuePrecision(o,n)},t.prototype.ensureValueNotConflict=function(e,t){var n=t.allowCross,r=this.state||{},i=r.handle,o=r.bounds;if(!n&&null!=i){if(i>0&&e<=o[i-1])return o[i-1];if(i<o.length-1&&e>=o[i+1])return o[i+1]}return e},t.prototype.render=function(){var e=this,t=this.state,n=t.handle,r=t.bounds,s=this.props,l=s.prefixCls,c=s.vertical,u=s.included,h=s.disabled,d=s.min,p=s.max,f=s.handle,g=s.trackStyle,m=s.handleStyle,b=r.map((function(t){return e.calcOffset(t)})),A=l+"-handle",_=r.map((function(t,r){var i;return f({className:(0,o.default)((i={},i[A]=!0,i[A+"-"+(r+1)]=!0,i)),vertical:c,offset:b[r],value:t,dragging:n===r,index:r,min:d,max:p,disabled:h,style:m[r],ref:function(t){return e.saveHandle(r,t)}})}));return{tracks:r.slice(0,-1).map((function(e,t){var n,r=t+1,s=(0,o.default)(((n={})[l+"-track"]=!0,n[l+"-track-"+r]=!0,n));return(0,i.h)(a.default,{className:s,vertical:c,included:u,offset:b[r-1],length:b[r]-b[r-1],style:g[t],key:r})})),handles:_}},t}(i.Component);h.defaultProps={count:1,allowCross:!0,pushable:!1},t.default=(0,l.default)(h)},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},663:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".rc-slider {\n  position: relative;\n  height: 14px;\n  padding: 5px 0;\n  width: 100%;\n  border-radius: 6px;\n  -ms-touch-action: none;\n      touch-action: none;\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider * {\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-rail {\n  position: absolute;\n  width: 100%;\n  background-color: #e9e9e9;\n  height: 4px;\n  border-radius: 6px;\n}\n.rc-slider-track {\n  position: absolute;\n  left: 0;\n  height: 4px;\n  border-radius: 6px;\n  background-color: #abe2fb;\n}\n.rc-slider-handle {\n  position: absolute;\n  margin-left: -7px;\n  margin-top: -5px;\n  width: 14px;\n  height: 14px;\n  cursor: pointer;\n  cursor: -webkit-grab;\n  cursor: grab;\n  border-radius: 50%;\n  border: solid 2px #96dbfa;\n  background-color: #fff;\n  -ms-touch-action: pan-x;\n      touch-action: pan-x;\n}\n.rc-slider-handle:hover {\n  border-color: #57c5f7;\n}\n.rc-slider-handle:active {\n  border-color: #57c5f7;\n  box-shadow: 0 0 5px #57c5f7;\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n.rc-slider-handle:focus {\n  border-color: #57c5f7;\n  box-shadow: 0 0 0 5px #96dbfa;\n  outline: none;\n}\n.rc-slider-mark {\n  position: absolute;\n  top: 18px;\n  left: 0;\n  width: 100%;\n  font-size: 12px;\n}\n.rc-slider-mark-text {\n  position: absolute;\n  display: inline-block;\n  vertical-align: middle;\n  text-align: center;\n  cursor: pointer;\n  color: #999;\n}\n.rc-slider-mark-text-active {\n  color: #666;\n}\n.rc-slider-step {\n  position: absolute;\n  width: 100%;\n  height: 4px;\n  background: transparent;\n}\n.rc-slider-dot {\n  position: absolute;\n  bottom: -2px;\n  margin-left: -4px;\n  width: 8px;\n  height: 8px;\n  border: 2px solid #e9e9e9;\n  background-color: #fff;\n  cursor: pointer;\n  border-radius: 50%;\n  vertical-align: middle;\n}\n.rc-slider-dot:first-child {\n  margin-left: -4px;\n}\n.rc-slider-dot:last-child {\n  margin-left: -4px;\n}\n.rc-slider-dot-active {\n  border-color: #96dbfa;\n}\n.rc-slider-disabled {\n  background-color: #e9e9e9;\n}\n.rc-slider-disabled .rc-slider-track {\n  background-color: #ccc;\n}\n.rc-slider-disabled .rc-slider-handle,\n.rc-slider-disabled .rc-slider-dot {\n  border-color: #ccc;\n  box-shadow: none;\n  background-color: #fff;\n  cursor: not-allowed;\n}\n.rc-slider-disabled .rc-slider-mark-text,\n.rc-slider-disabled .rc-slider-dot {\n  cursor: not-allowed !important;\n}\n.rc-slider-vertical {\n  width: 14px;\n  height: 100%;\n  padding: 0 5px;\n}\n.rc-slider-vertical .rc-slider-rail {\n  height: 100%;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-track {\n  left: 5px;\n  bottom: 0;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-handle {\n  margin-left: -5px;\n  margin-bottom: -7px;\n  -ms-touch-action: pan-y;\n      touch-action: pan-y;\n}\n.rc-slider-vertical .rc-slider-mark {\n  top: 0;\n  left: 18px;\n  height: 100%;\n}\n.rc-slider-vertical .rc-slider-step {\n  height: 100%;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-dot {\n  left: 2px;\n  margin-bottom: -4px;\n}\n.rc-slider-vertical .rc-slider-dot:first-child {\n  margin-bottom: -4px;\n}\n.rc-slider-vertical .rc-slider-dot:last-child {\n  margin-bottom: -4px;\n}\n.rc-slider-tooltip-zoom-down-enter,\n.rc-slider-tooltip-zoom-down-appear {\n  -webkit-animation-duration: .3s;\n          animation-duration: .3s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  display: block !important;\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.rc-slider-tooltip-zoom-down-leave {\n  -webkit-animation-duration: .3s;\n          animation-duration: .3s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  display: block !important;\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.rc-slider-tooltip-zoom-down-enter.rc-slider-tooltip-zoom-down-enter-active,\n.rc-slider-tooltip-zoom-down-appear.rc-slider-tooltip-zoom-down-appear-active {\n  -webkit-animation-name: rcSliderTooltipZoomDownIn;\n          animation-name: rcSliderTooltipZoomDownIn;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.rc-slider-tooltip-zoom-down-leave.rc-slider-tooltip-zoom-down-leave-active {\n  -webkit-animation-name: rcSliderTooltipZoomDownOut;\n          animation-name: rcSliderTooltipZoomDownOut;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.rc-slider-tooltip-zoom-down-enter,\n.rc-slider-tooltip-zoom-down-appear {\n  -webkit-transform: scale(0, 0);\n          transform: scale(0, 0);\n  -webkit-animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n          animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n}\n.rc-slider-tooltip-zoom-down-leave {\n  -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n          animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n}\n@-webkit-keyframes rcSliderTooltipZoomDownIn {\n  0% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n  100% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@keyframes rcSliderTooltipZoomDownIn {\n  0% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n  100% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@-webkit-keyframes rcSliderTooltipZoomDownOut {\n  0% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n}\n@keyframes rcSliderTooltipZoomDownOut {\n  0% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n}\n.rc-slider-tooltip {\n  position: absolute;\n  left: -9999px;\n  top: -9999px;\n  visibility: visible;\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-tooltip * {\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-tooltip-hidden {\n  display: none;\n}\n.rc-slider-tooltip-placement-top {\n  padding: 4px 0 8px 0;\n}\n.rc-slider-tooltip-inner {\n  padding: 6px 2px;\n  min-width: 24px;\n  height: 24px;\n  font-size: 12px;\n  line-height: 1;\n  color: #fff;\n  text-align: center;\n  text-decoration: none;\n  background-color: #6c6c6c;\n  border-radius: 6px;\n  box-shadow: 0 0 4px #d9d9d9;\n}\n.rc-slider-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n.rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {\n  bottom: 4px;\n  left: 50%;\n  margin-left: -4px;\n  border-width: 4px 4px 0;\n  border-top-color: #6c6c6c;\n}\n","",{version:3,sources:["webpack://./node_modules/rc-slider-preact/lib/index.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,YAAY;EACZ,cAAc;EACd,WAAW;EACX,kBAAkB;EAClB,sBAAsB;MAClB,kBAAkB;EACtB,sBAAsB;EACtB,6CAA6C;AAC/C;AACA;EACE,sBAAsB;EACtB,6CAA6C;AAC/C;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,yBAAyB;EACzB,WAAW;EACX,kBAAkB;AACpB;AACA;EACE,kBAAkB;EAClB,OAAO;EACP,WAAW;EACX,kBAAkB;EAClB,yBAAyB;AAC3B;AACA;EACE,kBAAkB;EAClB,iBAAiB;EACjB,gBAAgB;EAChB,WAAW;EACX,YAAY;EACZ,eAAe;EACf,oBAAoB;EACpB,YAAY;EACZ,kBAAkB;EAClB,yBAAyB;EACzB,sBAAsB;EACtB,uBAAuB;MACnB,mBAAmB;AACzB;AACA;EACE,qBAAqB;AACvB;AACA;EACE,qBAAqB;EACrB,2BAA2B;EAC3B,wBAAwB;EACxB,gBAAgB;AAClB;AACA;EACE,qBAAqB;EACrB,6BAA6B;EAC7B,aAAa;AACf;AACA;EACE,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,WAAW;EACX,eAAe;AACjB;AACA;EACE,kBAAkB;EAClB,qBAAqB;EACrB,sBAAsB;EACtB,kBAAkB;EAClB,eAAe;EACf,WAAW;AACb;AACA;EACE,WAAW;AACb;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,WAAW;EACX,uBAAuB;AACzB;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,iBAAiB;EACjB,UAAU;EACV,WAAW;EACX,yBAAyB;EACzB,sBAAsB;EACtB,eAAe;EACf,kBAAkB;EAClB,sBAAsB;AACxB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,qBAAqB;AACvB;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,sBAAsB;AACxB;AACA;;EAEE,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,mBAAmB;AACrB;AACA;;EAEE,8BAA8B;AAChC;AACA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;AAChB;AACA;EACE,YAAY;EACZ,UAAU;AACZ;AACA;EACE,SAAS;EACT,SAAS;EACT,UAAU;AACZ;AACA;EACE,iBAAiB;EACjB,mBAAmB;EACnB,uBAAuB;MACnB,mBAAmB;AACzB;AACA;EACE,MAAM;EACN,UAAU;EACV,YAAY;AACd;AACA;EACE,YAAY;EACZ,UAAU;AACZ;AACA;EACE,SAAS;EACT,mBAAmB;AACrB;AACA;EACE,mBAAmB;AACrB;AACA;EACE,mBAAmB;AACrB;AACA;;EAEE,+BAA+B;UACvB,uBAAuB;EAC/B,iCAAiC;UACzB,yBAAyB;EACjC,yBAAyB;EACzB,oCAAoC;UAC5B,4BAA4B;AACtC;AACA;EACE,+BAA+B;UACvB,uBAAuB;EAC/B,iCAAiC;UACzB,yBAAyB;EACjC,yBAAyB;EACzB,oCAAoC;UAC5B,4BAA4B;AACtC;AACA;;EAEE,iDAAiD;UACzC,yCAAyC;EACjD,qCAAqC;UAC7B,6BAA6B;AACvC;AACA;EACE,kDAAkD;UAC1C,0CAA0C;EAClD,qCAAqC;UAC7B,6BAA6B;AACvC;AACA;;EAEE,8BAA8B;UACtB,sBAAsB;EAC9B,iEAAiE;UACzD,yDAAyD;AACnE;AACA;EACE,yEAAyE;UACjE,iEAAiE;AAC3E;AACA;EACE;IACE,UAAU;IACV,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;EACA;IACE,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;AACF;AACA;EACE;IACE,UAAU;IACV,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;EACA;IACE,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;AACF;AACA;EACE;IACE,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;EACA;IACE,UAAU;IACV,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;AACF;AACA;EACE;IACE,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;EACA;IACE,UAAU;IACV,kCAAkC;YAC1B,0BAA0B;IAClC,8BAA8B;YACtB,sBAAsB;EAChC;AACF;AACA;EACE,kBAAkB;EAClB,aAAa;EACb,YAAY;EACZ,mBAAmB;EACnB,sBAAsB;EACtB,6CAA6C;AAC/C;AACA;EACE,sBAAsB;EACtB,6CAA6C;AAC/C;AACA;EACE,aAAa;AACf;AACA;EACE,oBAAoB;AACtB;AACA;EACE,gBAAgB;EAChB,eAAe;EACf,YAAY;EACZ,eAAe;EACf,cAAc;EACd,WAAW;EACX,kBAAkB;EAClB,qBAAqB;EACrB,yBAAyB;EACzB,kBAAkB;EAClB,2BAA2B;AAC7B;AACA;EACE,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,yBAAyB;EACzB,mBAAmB;AACrB;AACA;EACE,WAAW;EACX,SAAS;EACT,iBAAiB;EACjB,uBAAuB;EACvB,yBAAyB;AAC3B",sourcesContent:[".rc-slider {\n  position: relative;\n  height: 14px;\n  padding: 5px 0;\n  width: 100%;\n  border-radius: 6px;\n  -ms-touch-action: none;\n      touch-action: none;\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider * {\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-rail {\n  position: absolute;\n  width: 100%;\n  background-color: #e9e9e9;\n  height: 4px;\n  border-radius: 6px;\n}\n.rc-slider-track {\n  position: absolute;\n  left: 0;\n  height: 4px;\n  border-radius: 6px;\n  background-color: #abe2fb;\n}\n.rc-slider-handle {\n  position: absolute;\n  margin-left: -7px;\n  margin-top: -5px;\n  width: 14px;\n  height: 14px;\n  cursor: pointer;\n  cursor: -webkit-grab;\n  cursor: grab;\n  border-radius: 50%;\n  border: solid 2px #96dbfa;\n  background-color: #fff;\n  -ms-touch-action: pan-x;\n      touch-action: pan-x;\n}\n.rc-slider-handle:hover {\n  border-color: #57c5f7;\n}\n.rc-slider-handle:active {\n  border-color: #57c5f7;\n  box-shadow: 0 0 5px #57c5f7;\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n.rc-slider-handle:focus {\n  border-color: #57c5f7;\n  box-shadow: 0 0 0 5px #96dbfa;\n  outline: none;\n}\n.rc-slider-mark {\n  position: absolute;\n  top: 18px;\n  left: 0;\n  width: 100%;\n  font-size: 12px;\n}\n.rc-slider-mark-text {\n  position: absolute;\n  display: inline-block;\n  vertical-align: middle;\n  text-align: center;\n  cursor: pointer;\n  color: #999;\n}\n.rc-slider-mark-text-active {\n  color: #666;\n}\n.rc-slider-step {\n  position: absolute;\n  width: 100%;\n  height: 4px;\n  background: transparent;\n}\n.rc-slider-dot {\n  position: absolute;\n  bottom: -2px;\n  margin-left: -4px;\n  width: 8px;\n  height: 8px;\n  border: 2px solid #e9e9e9;\n  background-color: #fff;\n  cursor: pointer;\n  border-radius: 50%;\n  vertical-align: middle;\n}\n.rc-slider-dot:first-child {\n  margin-left: -4px;\n}\n.rc-slider-dot:last-child {\n  margin-left: -4px;\n}\n.rc-slider-dot-active {\n  border-color: #96dbfa;\n}\n.rc-slider-disabled {\n  background-color: #e9e9e9;\n}\n.rc-slider-disabled .rc-slider-track {\n  background-color: #ccc;\n}\n.rc-slider-disabled .rc-slider-handle,\n.rc-slider-disabled .rc-slider-dot {\n  border-color: #ccc;\n  box-shadow: none;\n  background-color: #fff;\n  cursor: not-allowed;\n}\n.rc-slider-disabled .rc-slider-mark-text,\n.rc-slider-disabled .rc-slider-dot {\n  cursor: not-allowed !important;\n}\n.rc-slider-vertical {\n  width: 14px;\n  height: 100%;\n  padding: 0 5px;\n}\n.rc-slider-vertical .rc-slider-rail {\n  height: 100%;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-track {\n  left: 5px;\n  bottom: 0;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-handle {\n  margin-left: -5px;\n  margin-bottom: -7px;\n  -ms-touch-action: pan-y;\n      touch-action: pan-y;\n}\n.rc-slider-vertical .rc-slider-mark {\n  top: 0;\n  left: 18px;\n  height: 100%;\n}\n.rc-slider-vertical .rc-slider-step {\n  height: 100%;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-dot {\n  left: 2px;\n  margin-bottom: -4px;\n}\n.rc-slider-vertical .rc-slider-dot:first-child {\n  margin-bottom: -4px;\n}\n.rc-slider-vertical .rc-slider-dot:last-child {\n  margin-bottom: -4px;\n}\n.rc-slider-tooltip-zoom-down-enter,\n.rc-slider-tooltip-zoom-down-appear {\n  -webkit-animation-duration: .3s;\n          animation-duration: .3s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  display: block !important;\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.rc-slider-tooltip-zoom-down-leave {\n  -webkit-animation-duration: .3s;\n          animation-duration: .3s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  display: block !important;\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.rc-slider-tooltip-zoom-down-enter.rc-slider-tooltip-zoom-down-enter-active,\n.rc-slider-tooltip-zoom-down-appear.rc-slider-tooltip-zoom-down-appear-active {\n  -webkit-animation-name: rcSliderTooltipZoomDownIn;\n          animation-name: rcSliderTooltipZoomDownIn;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.rc-slider-tooltip-zoom-down-leave.rc-slider-tooltip-zoom-down-leave-active {\n  -webkit-animation-name: rcSliderTooltipZoomDownOut;\n          animation-name: rcSliderTooltipZoomDownOut;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.rc-slider-tooltip-zoom-down-enter,\n.rc-slider-tooltip-zoom-down-appear {\n  -webkit-transform: scale(0, 0);\n          transform: scale(0, 0);\n  -webkit-animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n          animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n}\n.rc-slider-tooltip-zoom-down-leave {\n  -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n          animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n}\n@-webkit-keyframes rcSliderTooltipZoomDownIn {\n  0% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n  100% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@keyframes rcSliderTooltipZoomDownIn {\n  0% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n  100% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@-webkit-keyframes rcSliderTooltipZoomDownOut {\n  0% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n}\n@keyframes rcSliderTooltipZoomDownOut {\n  0% {\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n}\n.rc-slider-tooltip {\n  position: absolute;\n  left: -9999px;\n  top: -9999px;\n  visibility: visible;\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-tooltip * {\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-tooltip-hidden {\n  display: none;\n}\n.rc-slider-tooltip-placement-top {\n  padding: 4px 0 8px 0;\n}\n.rc-slider-tooltip-inner {\n  padding: 6px 2px;\n  min-width: 24px;\n  height: 24px;\n  font-size: 12px;\n  line-height: 1;\n  color: #fff;\n  text-align: center;\n  text-decoration: none;\n  background-color: #6c6c6c;\n  border-radius: 6px;\n  box-shadow: 0 0 4px #d9d9d9;\n}\n.rc-slider-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n.rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {\n  bottom: 4px;\n  left: 50%;\n  margin-left: -4px;\n  border-width: 4px 4px 0;\n  border-top-color: #6c6c6c;\n}\n"],sourceRoot:""}]);const a=s},711:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t,n;return n=t=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.onMouseDown=function(e){if(0===e.button){var t=r.props.vertical,n=u.getMousePosition(t,e);if(u.isEventFromHandle(e,r.handlesRefs)){var i=u.getHandleCenterPosition(t,e.target);r.dragOffset=n-i,n=i}else r.dragOffset=0;r.onStart(n),r.addDocumentMouseEvents(),u.pauseEvent(e)}},r.onTouchStart=function(e){if(!u.isNotTouchEvent(e)){var t=r.props.vertical,n=u.getTouchPosition(t,e);if(u.isEventFromHandle(e,r.handlesRefs)){var i=u.getHandleCenterPosition(t,e.target);r.dragOffset=n-i,n=i}else r.dragOffset=0;r.onStart(n),r.addDocumentTouchEvents(),u.pauseEvent(e)}},r.onFocus=function(e){var t=r.props.vertical;if(u.isEventFromHandle(e,r.handlesRefs)){var n=u.getHandleCenterPosition(t,e.target);r.dragOffset=0,r.onStart(n),u.pauseEvent(e)}},r.onBlur=function(e){r.onEnd(e)},r.onMouseMove=function(e){if(r.sliderRef){var t=u.getMousePosition(r.props.vertical,e);r.onMove(e,t-r.dragOffset)}else r.onEnd()},r.onTouchMove=function(e){if(!u.isNotTouchEvent(e)&&r.sliderRef){var t=u.getTouchPosition(r.props.vertical,e);r.onMove(e,t-r.dragOffset)}else r.onEnd()},r.onKeyDown=function(e){r.sliderRef&&u.isEventFromHandle(e,r.handlesRefs)&&r.onKeyboard(e)},r.saveSlider=function(e){r.sliderRef=e},r.handlesRefs={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount&&e.prototype.componentWillUnmount.call(this),this.removeDocumentEvents()},t.prototype.addDocumentTouchEvents=function(){this.onTouchMoveListener=(0,o.default)(document,"touchmove",this.onTouchMove),this.onTouchUpListener=(0,o.default)(document,"touchend",this.onEnd)},t.prototype.addDocumentMouseEvents=function(){this.onMouseMoveListener=(0,o.default)(document,"mousemove",this.onMouseMove),this.onMouseUpListener=(0,o.default)(document,"mouseup",this.onEnd)},t.prototype.removeDocumentEvents=function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()},t.prototype.getSliderStart=function(){var e=this.sliderRef.getBoundingClientRect();return this.props.vertical?e.top:e.left},t.prototype.getSliderLength=function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width},t.prototype.calcValue=function(e){var t=this.props,n=t.vertical,r=t.min,i=t.max,o=Math.abs(Math.max(e,0)/this.getSliderLength());return n?(1-o)*(i-r)+r:o*(i-r)+r},t.prototype.calcValueByPos=function(e){var t=e-this.getSliderStart();return this.trimAlignValue(this.calcValue(t))},t.prototype.calcOffset=function(e){var t=this.props,n=t.min;return(e-n)/(t.max-n)*100},t.prototype.saveHandle=function(e,t){this.handlesRefs[e]=t},t.prototype.render=function(){var t,n=this.props,o=n.prefixCls,c=n.className,u=n.marks,h=n.dots,p=n.step,f=n.included,g=n.disabled,m=n.vertical,b=n.min,A=n.max,_=n.children,v=n.maximumTrackStyle,y=n.style,w=n.railStyle,x=n.dotStyle,C=n.activeDotStyle,E=e.prototype.render.call(this),B=E.tracks,k=E.handles,S=(0,s.default)(o,((t={})[o+"-with-marks"]=Object.keys(u).length,t[o+"-disabled"]=g,t[o+"-vertical"]=m,t[c]=c,t));return(0,i.h)("div",{ref:this.saveSlider,className:S,onTouchStart:g?d:this.onTouchStart,onMouseDown:g?d:this.onMouseDown,onKeyDown:g?d:this.onKeyDown,onFocus:g?d:this.onFocus,onBlur:g?d:this.onBlur,style:y},(0,i.h)("div",{className:o+"-rail",style:r({},v,w)}),B,(0,i.h)(a.default,{prefixCls:o,vertical:m,marks:u,dots:h,step:p,included:f,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:A,min:b,dotStyle:x,activeDotStyle:C}),k,(0,i.h)(l.default,{className:o+"-mark",vertical:m,marks:u,included:f,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:A,min:b}),_)},t}(e),t.displayName="ComponentEnhancer("+e.displayName+")",t.defaultProps=r({},e.defaultProps,{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){e.index;var t=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["index"]);return delete t.dragging,(0,i.h)(c.default,t)},onBeforeChange:d,onChange:d,onAfterChange:d,included:!0,disabled:!1,dots:!1,vertical:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),n};var i=n(148),o=h(n(223)),s=h(n(942)),a=h(n(871)),l=h(n(198)),c=h(n(828)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(46));function h(e){return e&&e.__esModule?e:{default:e}}function d(){}},785:e=>{"use strict";e.exports="data:font/woff;base64,d09GRgABAAAAABhEAA8AAAAAKYwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAARAAAAGA+JlQSY21hcAAAAdgAAADYAAACzKklpk1jdnQgAAACsAAAAAsAAAAOAAAAAGZwZ20AAAK8AAAG7QAADgxiLvl6Z2FzcAAACawAAAAIAAAACAAAABBnbHlmAAAJtAAACvYAABFKvTTjOWhlYWQAABSsAAAAMwAAADYpwHgoaGhlYQAAFOAAAAAfAAAAJAc7A2pobXR4AAAVAAAAADAAAABgUSz//GxvY2EAABUwAAAAMgAAADIx5S1+bWF4cAAAFWQAAAAgAAAAIAFVDr5uYW1lAAAVhAAAAXUAAALNzZ0bHHBvc3QAABb8AAAAygAAASRoLw4GcHJlcAAAF8gAAAB6AAAAnH62O7Z4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgYU5inMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDAdeMHxyZQ76n8UQxbyGYSZQmBFFERMAdMgMwHic7ZLNbQJBDEbfwLIhCQTI3zbAMQeaQHSUgnLiTBU0wf07jmgAPjNWlPSAV28lWzPelZ+BCTA2X6aDsqcQ8eNqudXHPN3qHd/OX5gyoteq7uqhHuvpvL1cQPzP/0Txnc3vE/nIPTt/uefB3R7d/5kZc59bsGTFK2+888Eng4/33GMWr7LObIh5N8KREs8VJeFUSXhVEr6VeP4osQmU2AlKbAclsQdKbAwl8XdKbBEl9okSm0WJHaPEtlFi796ihjeAemh4F6jHhreCemp4PzhvGwxXhX1MfHicY2BABgAADgABAHicrVdrWxvHFZ7VDYwBA0LYzbruKGNRlx3JJHEcYisO2WVRHCWpwLjddW67SLhNk16S3ug1vV+UP3NWtE+db/lpec/MSgEH3KfPUz7ovDPzzpzrnFlIaEnifhTGUnYfifmdLlXuPYjohkvX4uShHN6PqNBIP5sW06LfV/tuvU4iJhGorZFwRJD4TXI0yeRhkwpa1VW9SUUtB0fF5ZrwA6oGMkn8rLAc+FmjGFAh2DuUNKsAgnRApd7hqFAo4BiqH1yu8+xovub4lyWg8kdVp4o1RaIXHcSjFadgFJY0FT2qBRHro5UgyAmuHEj6vEel1Qeja85cEPZDqoRRnYqNePetCGR3GEnq9TC1CTZtMNqIY5lZNiy6hql8JGmd19eZ+XkvkojGMJU004sSzEhem2F0k9HNxE3iOHYRLZoN+iR2IxJdJtcxdrt0hdGVbvpoQfSZ8ags9uN4kMbkeHGcexDLAfxRftykspawoNRI4dNU0ItoSvk0rXxkAFuSJlVMuBEJOcim9n3Ji+yua83nXxJJ2KfyWh2LgRzKIXRl6+UGIrQTJT033Y0jFddjSZv3Iqy5HJfclCZNaToXeCNRsGmexlD5CuWi/JQK+w/J6cMQmlpr0jkt2dp5uFUS+5JPoM0kZkqyZayd0aNz8yII/bX6pHDO65OFNGtPcTyYEMD1RIZDlXJSTbCFywkh6cLIsZVIrUq3rIq5M7bTVewS7peuHd80r41DR3OzohhCi6vq8RqK+ILOCoWQBulWkxY0qFLSheA1PgAAGaIFHu1itGDytYiDFkxQJGLQh2ZaDBI5TCQtImxNWtLdvSgrDbbiqzR3oA6bVNXdnah7z066dcxXzfyyzsRScD/KlpYCclKfFj2+cigtP7vAPwv4IWcFuSg2elHG4YO//hAZhtqFtbrCtjF27TpvwU3mmRiedGB/B7Mnk3VGCjMhqgrxQkHdGTmOY7JV0yIThXAvoiXly5DmUX5ziHDiy+Q/ly45YlFUhe/7HIFlrDlptjzt0aee+zTCtQIfa16TLurMYXkJ8Wb5NZ0VWT6lsxJLV2dllpd1VmH5dZ1Nsbyis2mW39DZOZaeVuP4UyVBpJVskfMO35Ym6WOLK5PFj+xi89ji6mTxY7sotaAL3pl+wql/W1fZz+P+1eGfhF1Pwz+WCv6xvAr/WDbgH8tV+Mfym/CP5TX4x/Jb8I/lGvxj2dKybQr2uobaS4lE03OSwKQUl7DFNbuu6bpH13Efn8FV6MgzsqnSDcWN/YkMl71/dpzibL4ScsXRM2tZ2amFEZoie/ncsfCcxbmh5fPG8udxmuWEX9WJa3uqLTwvVv4l+G/rjtrIbjg19vUm4gEHTrcflyXdaNILunWx3aSN/0ZFYfdBfxEpEisN2ZIdbgkI7d3hsKM66CERHj50XbxIG45TW0aEb6F3rdBF0Epopw1Dy2aFT+cD72DYUlK2hzjz9kmabNnzqKL8MVtSwj1lcyc6KsmydI9Kq+WnYp877QyatjI71HZCleDx65pwt7OvUilIBorKeFSxXApSFzjhTvf4nhSmof+rbeRYQcM2v1gzgdGC805RomxPraCJIBllFFz5K6fiRDaiwUYU8Zt30i91oRDa41hIzJZX81ioNsL00mSJZsz6tuqwUs7inUkI2RkbaRJ7UUu28aCz9fmkZLvyVFClgdHd498uNomnVXueLcUl//IxS4JxuhL+wHnc5XGKN9E/WhzFbboYRD0Xb6psx61s3VnGvX3lxOqu2zux6p+690k7Ak23vCcp3NJ02xvCNq4xOHUmFQlt0Tp2hMZlrs9VG/kUH2i+dZ0LVOH6tHDz7PnbOpvBWzPe8j+WdOf/VcXsE/extkKrOlYv9Ti3s4MGfMsbR+VVjG57dZXHJfdmEoK7CEHNXnt8jeCGV1t0E7f8tTPmuzjOWa7SC8Cva3oR4g2OYohwy208vONovam5oOkNwG/rkRDbAD0Ah8GOHjlmZhfAzNxjTgdgjzkM7jOHwXeYw+C7+gi9MACKgByDYn3k2LkHQHbuLeY5jN5mnkHvMM+gd5ln0HusMwRIWCeDlHUy2GedDPrMeRVgwBwGB8xh8JA5DL5n7NoC+r6xi9H7xi5GPzB2MfrA2MXoQ2MXox8auxj9yNjF6MeIcXuSwJ+YEW0CfmThK4Afc9DNyMfop3hrc87PLGTOzw3HyTm/wOaXJqf+0ozMjkMLecevLGT6r3FOTviNhUz4rYVM+B24dybn/d6MDP0TC5n+BwuZ/kfszAl/spAJf7aQCX8B9+XJeX81I0P/m4VM/7uFTP8HduaEf1rIhKGFTPhUj86bL1uquKNSoRjinya0wdj3aPqAild7h+PHuvkFJdoBQQAAAAABAAH//wAPeJyVWGtsXMUVnjNz79zXenfv7n1svOv1PuxdZ+04wev1FttJNq/GIRvZDkjBoDhNazBxIohQGlAhqUXiqEFtgqKAUoRS2th/qjaCtiqCH02lSqhCVYsqaJAqfje0avlRhFTT3PTM3HUejRBgWXNn7pw753znPUuA4B9boheISzoa7TEgAE1CgS4QnC7g5lHHdxhf1QuOBrxQhtLgRhga6AQ5eGwpHuTiffHg77FYE5+L8DiOzTj1PNyIxcCTy/gSPBGPN2N4KLnxMX2PniJdJNtIF1bFNQXZNRlQQhcABL+M4yi8vbfbiSHDtaCJQXAtr7CuS9a47Xv0vZDtYsgGn/Fb61hscTF22BOTpaXY3YSxfkEgZfoPSzCLFMnqRokoTJHoT6nAUDl78MHIPgqEkfFitbtYLXKe6QXX4eUiDlqxUKrXcCjXBofqVRxGYMDz3eqAxxI571rOO+jl4JqfBVxk/YM4EYs3xNuPPHzrftR66+UEuZTnT+wEypMluUZHKkZvGoXBilXcmi+19P9msYUMA55rh0piJ9zgRW8YB9ddjc/FSnZ7R2XJGfFWu/Bc1gnOuy4ckkt3EU53VKAvEzy1KIilHN9jU/SfpIN0NfKEstArThGpFiK0QoRSSr5XlLKgNop535OGEyLVYcVSeVTGVFeHPLrijrjBeceBQ+6wVwn5dsH09mxl0Rl1elsbcFBK7C32CBcNZamhLFkpC6NsQbw9hWoBuodQCvsIUBj3uku36SV0nHyhtB4Gh/x8y4N81EvNkXqpeN6l4KmOrq4OOH3JQ2kEYweGhWYcp+KOupdQY9kKLKFoKGvwoiNleZ2doH8L7RPXKGFoH0bYAjoJEFQSHPXdWkuO0Ivt0FFqdsud6y05TiDIEWepp7MFH3mgAKM4uDCYkeoR8kEpA6dbuhOaQeGlHL+lF9hW4hC/4UAYuysO4vuUp3oNerc16JngKqw2zb1Wxgq+aVlw0cyae0360+CD4KqcmvAjfMJFy9prZlt8jqzwMe7kk0lIPi1l1w24qWOHzuHxGWsvsugJPpCH4aEmHAj2h9xhNfSEBIJQpiLkdZS9ir6vI7d+Um2sK4HCesoJRhXkSxgqWkHbKxSDVOQMsqLxTHFNKqHydG99sBSlWRjqXpEJstDtaFEoF0oYHRibQieuPyTk9P7iZB2aak/Bo8EJtP4I6v9Z7wH4YVv6ufHHzp17LPf1VYZx6RCt7MzHzI6oRxO5hNL+aXDCcdZj3MCz9Qc+9Lp3TsO5d1+gTpwntOljo3TVGscUeKj0lYcQT4qsI/c0+ns6VyGSRASDB2izBUMEFgN2K+cOO357XWABmeVC38H8sgFWsh/GWhTuTI4y8GFJfXPCdGLLMQe8jDXxlhrlDRV+5eSMiTe5mKtvTcp9D1SNvzlpZpEwiuQ0ggR8I4e/3lw08OMWhYjBGwFimUIs68j6xvAaAFX4AqIgwNAy8xiVwOhxoiIOFQ4Qqih0CkNT2S9wTpbLyXJXdSV39kKhtBFKxUKUOllaHRiqC3BZQDtphX66gSEYvz6EacOJL/tJe9fuw8Nzzf7+5tzw5qOrFZs3VcpHL+/b8+rhMaXx9IWHd19YP2b30d8tR7018V27kPAI0g/XOKi7lCi/bwK2Hrl4+eKRrRvuHUskEY+KtvkjO0n/RSIkSdpJnvSQJxtPlHPUIKVOalrdWQo6a9rA7ksB36GAzDrC6SJgEIsY1jzRTTB1mMdkA/wUIaiQqTawiKlb5qzQ2X5VxOVkoZBOF3oKPV3FdD6dTyRsO2En3WSUd/bCYD8UouBkYWADlKu1almr2lW3qpWrzC265bqbd6tuvezSB9P9Q/1pOTzuONmsI4eHfj8zAy+IYTrd2k33fxfXwWHxcugWZQvzK+zXLHcb5qcb30bMlsCsGwKzKTCTFCbWndI3ETjmNgELURvzCA4QtsSsAlfniaqeJMRC6EIvumnoIXTyVZCzELIdKqA7hJwPFfA5yIOx5ZkZ+vzyndDhQ3xx/SgOf74DOuEyFkWdj5FOspaMkC1klsw09u/ZRrm+Or/Kxiwm/FlFP+aEA5lXKCUaJ9pxEiWGHjVmY21Uj5iUg85niWZZ2h6iadY+YmnW+CMz+6cfnrp/93hzx/ZNG50upyT+inGB1A4dvma3uoMvWCftvI1qqeZRMVAtl8pFrqkyaGxRYjEX2MWwqI0Axo0I/E4Q0Z819S7dlMPZW9MzphZONXMsiOg6hXeprgenl9OK+jpX4B+mPjTYHazrHoSaoPtZ2ejzfuFXjPLP0dBvBFfES9gkxs+ZBzPUvv5xxDFNhz6yCX1evR85Xv+4f+vmfpqUQux1M5B19pqtnPhjtINGJsgvG8aGobyhqFhDd75mTjzYqIRpEK3AVDqPWQQT5nGNYzZBL8O8uUfUiX2i3o6nd75m3fWFApQzyo+jf/K7v/gqx09NNZK6rk/oE82d9+0YGa4U05M6VjvQfK86UC+h7pV6Gqp+MgvYwPmeHNBOfqGkFXhxcCMVRQb/y4OltTQKPhoVk3cdabQC5j5e5vDivuZwp+WuC2rQ1pXJePzkK2P8yeRuz1gXt3SraSgUime6Kq+4dIfGma1QFL3gpz6LDkM8Z+Vc7IDyz+VUh66h7Z8BwA8C3qdwbqbi8CCcjwSf9L4zmPxOvp0bceaZzKQm6KlkHCk1SrmiGA8NfQ1yL0cjCROPBstVrQg6OGE3btyYQzu1YV/cR7aJSOlMUaYkEyIftHFsdraABgNgaCpWMs64gjUA0KqgYWI09FPEJFwx+QHsoEVnxDDcNMPQpjBmjP3E0IzJ9aO1qpN0nWLJKRYtESkrbXX59rZ6BG5vq33MG9zxMDQcUf54UdQLJUt9B+1CR0ztWIR3aRE4ppkQ4cek34vF2Ll3z+E/ZCujzpWZZybOPdago4fOLJ45NArbrrhwPvwoghk9/OiY8O9j5qrZc/Sldy7w7wcvd1TcK9s2zL3wkzOPDyubH31p1zMzV1zhMDd1FcNKfw/Z3Nho6AgYSzQjWVAZ9i2KqpzCJIS5hR4QTRXWzFnCVJVNodup+9Ej1Um/iNooFTXeEWoiH+LHRPDFqIPfSLyw+UsilRC/BDjR/82xa2w32Up2N8aJaZgLFhrdwJKg6doCF00AEBl4eI9jxxHOyQjoAPoefOiwD/OBDuObGutHR+4drPb3JbGed7v5pCOrgGxQMZkVhW1b7XJJ2lz4Qau/wU6tA6rCH1oXHU9kQ1dct+Q955p1xso6V8einnUW28yzlhcdu+qIiVi3NrDXXNlAcpiOWl+G7vaTV+4iYU+3jQw01m6oVQsKZYP5XDphxylWQEqbYa+g3rrVlobr6eF7ZfOjibamA2TGL2MPVEb7aTL9C1Njg1fW0LjlVnof8D1sAevlUl0GgIaZQ+zSP7z99oTdJ3ojw7QnxcIwfdH19dkTuLKimuZhX+ebhlhP2qbhi57P07SoRbuQIpFMYavku+LjSdv1kTiVTMhvmXH3loF4V7BPyRpqN6I3G9ZaVdwC5C0nH5axurzyTW+5/tGW6ekt1N8yTeeuX9s8Dd/YRFPiIc96n46Cj8UV7xXkzntFyREndt/yB3EguvkyGmcZjQOfRL1/x3BpLbcaVHHeLH0e/TQjfsuIisareecdoSddlL9lSH0nPY6Hl0QTLdSNQteHqgM+fTphGqn3D/NI27ei7fzg5VCVmhbD6EJlBJ+2ZdQK7v73ssVMn22Xqvkf5KrRDQAAeJxjYGRgYADiWc6vouP5bb4y8DO/AIowPI6e5Qqj///7n878gjkIyOVgYAKJAgB0aQ2lAHicY2BkYGAO+p8FJF/8//f/P/MLBqAICpAAALabB6oAeJxjfsHAwAzCglC8AIgjoRjIZjoFwQjx//+YkfWAxBf8/w/GLxB6mawh+gBKQRNoAAAAAAA4AIIAygEOAVQBmgHeAhICSAKwAxYDfgP4BHYFOgYOBqQHEgeaCBgIPghmCKUAAAABAAAAGABoAAYAAAAAAAIAIABIAI0AAACJDgwAAAAAeJx1kMtqwkAUhv/x0otCW1rotrMqSmnUYDeCIFh0026kuC0xxiQSMzIZBV+j79CH6Uv0Wfobx1KUJkzmO9+cOTM5AK7xDYHd88SxY4EzRjsu4BRdy0X6Z8sl8ovlMqp4s3xC/265ggeElqu4wQcriNI5ozk+LQtciUvLBVyIO8tF+kfLJXLXchm34tXyCb1vuYKxyCxXcS+++mq50XEYGVnr16XbdNtyspGKKk69RHorEymdyZ6cqdQESaIcXy32PArCVeLpfbifx4HOYpXKltPcq2GQBtozwXRbPVuHrjEzOdNqIQc2Qy61mge+cSJjlp1G4+956ENhiQ00YrYqgoFEjbbO2UWTo02aMEMyc5cVI4WHhMbDijuifCVj3OOYMUppA2YkZAc+v4sjPyKF3J+wij5aPYzHpO0Zce4lWqzbPMoaktI808vt9PfuGdY8zaU13LW9pc5vJTE4qCHZj+3anMand/KuGNoOGnz/+b8f4GeETQAAAHicbY7JcsIwEETVxhgvMZCQhXyEPkqYMVYha1Ra4gpfH2xyyCF9me55NV0jMvFQLf7XERlWyLFGgQ1KVKjR4Akttthhj2e84IBXvOEdHzjiU2R8LTplOzK5MymUZ56sPOlLaaiPs6m8vgyLK5JbFgthR7Z+oNkWkyfbDY2noG8k+2RM1k1b5T1PQXKKQZ+p/Y3azqmJXoVB0ujid96zjZsb83iH5TLvN/nIX7T7UymVieuTUfZaBfZRzs+2I6dA0rG2kbwQP878THMAAHicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZ2J02MjBoQWguFHonAwMDNxJrJwMzA4PLRhXGjsCIDQ4dESB+istGDRB/BwcDRIDBJVJ6ozpIaBdHAwMji0NHcghMAgQ2MvBp7WD837qBpXcjE4PLZtYUNgYXFwCUHCoHAAA="},817:(e,t)=>{"use strict";function n(){return!1}function r(){return!0}function i(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype={isEventObject:1,constructor:i,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=i,e.exports=t.default},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},828:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(148),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.vertical,o=e.offset,s=e.style,a=e.disabled,l=e.min,c=e.max,u=e.value,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","vertical","offset","style","disabled","min","max","value"]),d=r({},s,n?{bottom:o+"%"}:{left:o+"%"}),p={};return void 0!==u&&(p=r({},p,{"aria-valuemin":l,"aria-valuemax":c,"aria-valuenow":u,"aria-disabled":!!a})),(0,i.h)("div",r({role:"slider","aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,tabIndex:"0"},p,h,{className:t,style:d}))},t}(i.Component);t.default=o},833:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},858:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(354),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".escher-container .scaleEditor * {\n  font-size: 12px;\n  color: #777;\n  box-sizing: border-box;\n}\n\n.escher-container .scaleEditor {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.escher-container .scaleTrack {\n  position: relative;\n  display: flex;\n  height: 30px;\n  margin-bottom: 9px;\n  margin-top: 30px;\n  margin-left: 55px;\n  font-size: 15px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .scaleTrack.disabled {\n  background: #f1ecfa;\n  color: #b19ec0;\n  padding: 4px 0;\n  justify-content: center;\n}\n\n.escher-container .gradient {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n\n.escher-container .scaleLabels {\n  display: inline-flex;\n  flex-direction: column;\n  font-size: 12px;\n}\n\n.escher-container .scaleLabels label {\n  margin-bottom: 6px;\n}\n\n.escher-container .noDataStyle {\n  position: relative;\n  margin-top: 20px;\n}\n\n.escher-container .noDataStyle .styleHeader {\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.escher-container .noDataStyle label {\n  margin-right: 5px;\n}\n\n.escher-container .noDataStyle input[type=text] {\n  margin-right: 10px;\n  padding: 3px 0px;\n  width: 86px;\n}\n\n.escher-container .noDataStyle input[type=color] {\n  position: absolute;\n  padding: 0px;\n  border: 1px solid black;\n  left: 103px;\n  height: 24px;\n  width: 21px;\n}\n\n.escher-container .scaleEditor .icon-plus {\n  cursor: pointer;\n  position: absolute;\n  font-size: 14px;\n  right: 19px;\n}\n","",{version:3,sources:["webpack://./src/css/ScaleSlider.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,WAAW;EACX,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;EACjB,eAAe;EACf,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,cAAc;EACd,cAAc;EACd,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,oBAAoB;EACpB,sBAAsB;EACtB,eAAe;AACjB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,uBAAuB;EACvB,WAAW;EACX,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,eAAe;EACf,WAAW;AACb",sourcesContent:[".escher-container .scaleEditor * {\r\n  font-size: 12px;\r\n  color: #777;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.escher-container .scaleEditor {\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.escher-container .scaleTrack {\r\n  position: relative;\r\n  display: flex;\r\n  height: 30px;\r\n  margin-bottom: 9px;\r\n  margin-top: 30px;\r\n  margin-left: 55px;\r\n  font-size: 15px;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.escher-container .scaleTrack.disabled {\r\n  background: #f1ecfa;\r\n  color: #b19ec0;\r\n  padding: 4px 0;\r\n  justify-content: center;\r\n}\r\n\r\n.escher-container .gradient {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  cursor: pointer;\r\n}\r\n\r\n.escher-container .scaleLabels {\r\n  display: inline-flex;\r\n  flex-direction: column;\r\n  font-size: 12px;\r\n}\r\n\r\n.escher-container .scaleLabels label {\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.escher-container .noDataStyle {\r\n  position: relative;\r\n  margin-top: 20px;\r\n}\r\n\r\n.escher-container .noDataStyle .styleHeader {\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.escher-container .noDataStyle label {\r\n  margin-right: 5px;\r\n}\r\n\r\n.escher-container .noDataStyle input[type=text] {\r\n  margin-right: 10px;\r\n  padding: 3px 0px;\r\n  width: 86px;\r\n}\r\n\r\n.escher-container .noDataStyle input[type=color] {\r\n  position: absolute;\r\n  padding: 0px;\r\n  border: 1px solid black;\r\n  left: 103px;\r\n  height: 24px;\r\n  width: 21px;\r\n}\r\n\r\n.escher-container .scaleEditor .icon-plus {\r\n  cursor: pointer;\r\n  position: absolute;\r\n  font-size: 14px;\r\n  right: 19px;\r\n}\r\n"],sourceRoot:""}]);const a=s},871:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(148),s=(r=n(942))&&r.__esModule?r:{default:r};t.default=function(e){var t=e.prefixCls,n=e.vertical,r=e.marks,a=e.dots,l=e.step,c=e.included,u=e.lowerBound,h=e.upperBound,d=e.max,p=e.min,f=e.dotStyle,g=e.activeDotStyle,m=d-p,b=function(e,t,n,r,i,o){var s=Object.keys(t).map(parseFloat);if(n)for(var a=i;a<=o;a+=r)s.indexOf(a)>=0||s.push(a);return s}(0,r,a,l,p,d).map((function(e){var r,a=Math.abs(e-p)/m*100+"%",l=!c&&e===h||c&&e<=h&&e>=u,d=i(n?{bottom:a}:{left:a},f);l&&(d=i({},d,g));var b=(0,s.default)(((r={})[t+"-dot"]=!0,r[t+"-dot-active"]=l,r));return(0,o.h)("span",{className:b,style:d,key:e})}));return(0,o.h)("div",{className:t+"-step"},b)}},894:(e,t,n)=>{var r=n(311),i=Object.prototype.hasOwnProperty,o=Array.prototype.splice,s=Object.prototype.toString,a=function(e){return s.call(e).slice(8,-1)},l=Object.assign||function(e,t){return c(t).forEach((function(n){i.call(t,n)&&(e[n]=t[n])})),e},c="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function u(e){if(Array.isArray(e))return l(e.constructor(e.length),e);if("Map"===a(e))return new Map(e);if("Set"===a(e))return new Set(e);if(e&&"object"==typeof e){var t=Object.getPrototypeOf(e);return l(Object.create(t),e)}return e}function h(){var e=l({},d);return t.extend=function(t,n){e[t]=n},t.isEquals=function(e,t){return e===t},t;function t(n,o){"function"==typeof o&&(o={$apply:o}),Array.isArray(n)&&Array.isArray(o)||r(!Array.isArray(o),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),r("object"==typeof o&&null!==o,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var s=n;return c(o).forEach((function(r){if(i.call(e,r)){var l=n===s;s=e[r](o[r],s,o,n),l&&t.isEquals(s,n)&&(s=n)}else{var c="Map"===a(n)?t(n.get(r),o[r]):t(n[r],o[r]),h="Map"===a(s)?s.get(r):s[r];t.isEquals(c,h)&&(void 0!==c||i.call(n,r))||(s===n&&(s=u(n)),"Map"===a(s)?s.set(r,c):s[r]=c)}})),s}}var d={$push:function(e,t,n){return f(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return f(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,i){return function(e,t){r(Array.isArray(e),"Expected $splice target to be an array; got %s",e),m(t.$splice)}(t,n),e.forEach((function(e){m(e),t===i&&e.length&&(t=u(i)),o.apply(t,e)})),t},$set:function(e,t,n){return function(e){r(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(n),e},$toggle:function(e,t){g(e,"$toggle");var n=e.length?u(t):t;return e.forEach((function(e){n[e]=!t[e]})),n},$unset:function(e,t,n,r){return g(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=u(r)),delete t[e])})),t},$add:function(e,t,n,r){return b(t,"$add"),g(e,"$add"),"Map"===a(t)?e.forEach((function(e){var n=e[0],i=e[1];t===r&&t.get(n)!==i&&(t=u(r)),t.set(n,i)})):e.forEach((function(e){t!==r||t.has(e)||(t=u(r)),t.add(e)})),t},$remove:function(e,t,n,r){return b(t,"$remove"),g(e,"$remove"),e.forEach((function(e){t===r&&t.has(e)&&(t=u(r)),t.delete(e)})),t},$merge:function(e,t,n,i){var o,s;return o=t,r((s=e)&&"object"==typeof s,"update(): $merge expects a spec of type 'object'; got %s",s),r(o&&"object"==typeof o,"update(): $merge expects a target of type 'object'; got %s",o),c(e).forEach((function(n){e[n]!==t[n]&&(t===i&&(t=u(i)),t[n]=e[n])})),t},$apply:function(e,t){var n;return r("function"==typeof(n=e),"update(): expected spec of $apply to be a function; got %s.",n),e(t)}},p=h();function f(e,t,n){r(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e),g(t[n],n)}function g(e,t){r(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function m(e){r(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function b(e,t){var n=a(e);r("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",t,n)}e.exports=p,e.exports.default=p,e.exports.newContext=h},902:(e,t)=>{"use strict";t.__esModule=!0;var n={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=n.F1&&t<=n.F13)return!1;switch(t){case n.ALT:case n.CAPS_LOCK:case n.CONTEXT_MENU:case n.CTRL:case n.DOWN:case n.END:case n.ESC:case n.HOME:case n.INSERT:case n.LEFT:case n.MAC_FF_META:case n.META:case n.NUMLOCK:case n.NUM_CENTER:case n.PAGE_DOWN:case n.PAGE_UP:case n.PAUSE:case n.PRINT_SCREEN:case n.RIGHT:case n.SHIFT:case n.UP:case n.WIN_KEY:case n.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=n.ZERO&&e<=n.NINE)return!0;if(e>=n.NUM_ZERO&&e<=n.NUM_MULTIPLY)return!0;if(e>=n.A&&e<=n.Z)return!0;if(-1!==window.navigation.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case n.SPACE:case n.QUESTION_MARK:case n.NUM_PLUS:case n.NUM_MINUS:case n.NUM_PERIOD:case n.NUM_DIVISION:case n.SEMICOLON:case n.DASH:case n.EQUALS:case n.COMMA:case n.PERIOD:case n.SLASH:case n.APOSTROPHE:case n.SINGLE_QUOTE:case n.OPEN_SQUARE_BRACKET:case n.BACKSLASH:case n.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};t.default=n},936:function(e,t,n){var r,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(t,u,h){h||(t=c(t));var d,p=this,f="application/octet-stream"===t.type,g=function(){!function(e,t){for(var n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,e)}catch(e){a(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,i)return d=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=d,r.download=u,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),g(),l(d),p.readyState=p.DONE}));!function(){if((s||f&&o)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,g()},r.readAsDataURL(t),void(p.readyState=p.INIT)}d||(d=n().createObjectURL(t)),f?e.location.href=d:e.open(d,"_blank")||(e.location.href=d),p.readyState=p.DONE,g(),l(d)}()},h=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(e,t,n){return new u(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=i:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r))},941:(e,t,n)=>{"use strict";e.exports=n.p+"ce05f73db5201dc37c29.svg?38609741"},942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};return(()=>{"use strict";n.r(r),n.d(r,{Behavior:()=>Td,Builder:()=>_g,CobraModel:()=>su,DataMenu:()=>vg,EscherMap:()=>Dp,KeyManager:()=>Bp,SearchIndex:()=>Sp,Settings:()=>sf,UndoStack:()=>Cp,ZoomContainer:()=>bd,dataStyles:()=>o,libs:()=>wg,utils:()=>i,version:()=>yg});var e={};n.r(e),n.d(e,{VERSION:()=>s,after:()=>jt,all:()=>nn,allKeys:()=>Ae,any:()=>rn,assign:()=>je,before:()=>Pt,bind:()=>Ct,bindAll:()=>kt,chain:()=>vt,chunk:()=>Un,clone:()=>Ue,collect:()=>Kt,compact:()=>zn,compose:()=>It,constant:()=>ee,contains:()=>on,countBy:()=>_n,create:()=>Le,debounce:()=>Ot,default:()=>Vn,defaults:()=>Pe,defer:()=>Mt,delay:()=>zt,detect:()=>Gt,difference:()=>Nn,drop:()=>kn,each:()=>Xt,escape:()=>lt,every:()=>nn,extend:()=>Ie,extendOwn:()=>je,filter:()=>en,find:()=>Gt,findIndex:()=>Rt,findKey:()=>Lt,findLastIndex:()=>Wt,findWhere:()=>Qt,first:()=>Bn,flatten:()=>Mn,foldl:()=>Jt,foldr:()=>$t,forEach:()=>Xt,functions:()=>Te,get:()=>He,groupBy:()=>bn,has:()=>qe,head:()=>Bn,identity:()=>Ge,include:()=>on,includes:()=>on,indexBy:()=>An,indexOf:()=>Ht,initial:()=>En,inject:()=>Jt,intersection:()=>In,invert:()=>Oe,invoke:()=>sn,isArguments:()=>Z,isArray:()=>Q,isArrayBuffer:()=>L,isBoolean:()=>M,isDataView:()=>G,isDate:()=>I,isElement:()=>N,isEmpty:()=>ue,isEqual:()=>be,isError:()=>P,isFinite:()=>J,isFunction:()=>W,isMap:()=>Be,isMatch:()=>he,isNaN:()=>$,isNull:()=>S,isNumber:()=>D,isObject:()=>k,isRegExp:()=>j,isSet:()=>Se,isString:()=>T,isSymbol:()=>F,isTypedArray:()=>se,isUndefined:()=>z,isWeakMap:()=>ke,isWeakSet:()=>ze,iteratee:()=>Je,keys:()=>ce,last:()=>Sn,lastIndexOf:()=>qt,map:()=>Kt,mapObject:()=>et,matcher:()=>Qe,matches:()=>Qe,max:()=>cn,memoize:()=>St,methods:()=>Te,min:()=>un,mixin:()=>Wn,negate:()=>Dt,noop:()=>tt,now:()=>ot,object:()=>Fn,omit:()=>Cn,once:()=>Ft,pairs:()=>Ne,partial:()=>xt,partition:()=>vn,pick:()=>xn,pluck:()=>an,property:()=>Xe,propertyOf:()=>nt,random:()=>it,range:()=>Ln,reduce:()=>Jt,reduceRight:()=>$t,reject:()=>tn,rest:()=>kn,restArguments:()=>B,result:()=>bt,sample:()=>pn,select:()=>en,shuffle:()=>fn,size:()=>yn,some:()=>rn,sortBy:()=>gn,sortedIndex:()=>Vt,tail:()=>kn,take:()=>Bn,tap:()=>Re,template:()=>mt,templateSettings:()=>ut,throttle:()=>Nt,times:()=>rt,toArray:()=>dn,toPath:()=>We,transpose:()=>jn,unescape:()=>ct,union:()=>Dn,uniq:()=>Tn,unique:()=>Tn,uniqueId:()=>_t,unzip:()=>jn,values:()=>Me,where:()=>ln,without:()=>On,wrap:()=>Tt,zip:()=>Pn});var t={};n.r(t),n.d(t,{$:()=>ds,Bus:()=>us,CompositeUnsubscribe:()=>hi,Desc:()=>Dr,End:()=>Xr,Error:()=>Kr,Event:()=>Yr,EventStream:()=>Lo,Initial:()=>Gr,Next:()=>qr,Observable:()=>Io,Property:()=>jo,Value:()=>Hr,_:()=>cr,combine:()=>Gi,combineAsArray:()=>Hi,combineTemplate:()=>To,combineTwo:()=>Qi,combineWith:()=>qi,concatAll:()=>co,constant:()=>Li,fromArray:()=>qo,fromBinder:()=>Zi,fromCallback:()=>as,fromESObservable:()=>cs,fromEvent:()=>Xo,fromEventTarget:()=>Xo,fromNodeCallback:()=>ls,fromPoll:()=>Ji,fromPromise:()=>rs,getScheduler:()=>br,groupSimultaneous:()=>Vi,hasValue:()=>ii,interval:()=>$i,isEnd:()=>oi,isError:()=>ri,isEvent:()=>ti,isInitial:()=>ni,isNext:()=>si,isProperty:()=>Po,later:()=>Bo,mergeAll:()=>Eo,more:()=>hr,never:()=>Ei,noMore:()=>dr,nullSink:()=>Pr,nullVoidSink:()=>Fr,onValues:()=>Ko,once:()=>fi,repeat:()=>Zo,repeatedly:()=>Jo,retry:()=>es,sequentially:()=>ts,setScheduler:()=>Ar,silence:()=>$o,spy:()=>Ao,try:()=>hs,update:()=>Yo,version:()=>ps,when:()=>Bi,zipAsArray:()=>No,zipWith:()=>Oo});var i={};n.r(i),n.d(i,{_check_filesaver:()=>rl,_ends_with:()=>al,angleNorm:()=>Fl,angle_for_event:()=>Rl,arrayToObject:()=>Al,c_minus_c:()=>kl,c_plus_c:()=>Bl,c_times_scalar:()=>Sl,check_for_parent_tag:()=>Zl,check_undefined:()=>Vl,class_with_optional_new:()=>hl,clone:()=>_l,compare_arrays:()=>bl,compartmentalize:()=>Yl,d3_transform_catch:()=>tc,debounce:()=>xl,decompartmentalize:()=>Hl,distance:()=>Wl,downloadPng:()=>Tl,downloadSvg:()=>Ol,download_json:()=>zl,draw_a_nested_object:()=>fl,draw_an_object:()=>pl,extend:()=>vl,generate_map_id:()=>Kl,get_angle:()=>jl,get_document:()=>$l,get_window:()=>ec,load_css:()=>sl,load_files:()=>cl,load_json:()=>Ml,load_json_or_csv:()=>Nl,load_the_file:()=>ll,make_array:()=>gl,make_array_ref:()=>ml,make_class:()=>ul,mean:()=>ql,median:()=>Gl,name_to_url:()=>Jl,object_slice_for_ids:()=>Cl,object_slice_for_ids_ref:()=>El,quartiles:()=>Ql,random_characters:()=>Xl,remove_child_nodes:()=>ol,rotate_coords:()=>Il,rotate_coords_recursive:()=>Dl,set_options:()=>il,setup_defs:()=>dl,to_degrees:()=>Pl,to_radians:()=>Ll,to_radians_norm:()=>Ul,uniqueConcat:()=>yl,unique_strings_array:()=>wl});var o={};n.r(o),n.d(o,{apply_gene_data_to_reactions:()=>ou,apply_metabolite_data_to_nodes:()=>iu,apply_reaction_data_to_reactions:()=>ru,csv_converter:()=>$c,evaluate_gene_reaction_rule:()=>tu,floatForData:()=>Qc,gene_string_for_data:()=>Kc,genes_for_gene_reaction_rule:()=>eu,importAndCheck:()=>Gc,replace_gene_in_rule:()=>nu,reverse_flux_for_data:()=>Xc,text_for_data:()=>Jc});var s="1.13.7",a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},l=Array.prototype,c=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,h=l.push,d=l.slice,p=c.toString,f=c.hasOwnProperty,g="undefined"!=typeof ArrayBuffer,m="undefined"!=typeof DataView,b=Array.isArray,A=Object.keys,_=Object.create,v=g&&ArrayBuffer.isView,y=isNaN,w=isFinite,x=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],E=Math.pow(2,53)-1;function B(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}function k(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function S(e){return null===e}function z(e){return void 0===e}function M(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)}function N(e){return!(!e||1!==e.nodeType)}function O(e){var t="[object "+e+"]";return function(e){return p.call(e)===t}}const T=O("String"),D=O("Number"),I=O("Date"),j=O("RegExp"),P=O("Error"),F=O("Symbol"),L=O("ArrayBuffer");var U=O("Function"),R=a.document&&a.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof R&&(U=function(e){return"function"==typeof e||!1});const W=U,V=O("Object");var Y=m&&(!/\[native code\]/.test(String(DataView))||V(new DataView(new ArrayBuffer(8)))),H="undefined"!=typeof Map&&V(new Map),q=O("DataView");const G=Y?function(e){return null!=e&&W(e.getInt8)&&L(e.buffer)}:q,Q=b||O("Array");function X(e,t){return null!=e&&f.call(e,t)}var K=O("Arguments");!function(){K(arguments)||(K=function(e){return X(e,"callee")})}();const Z=K;function J(e){return!F(e)&&w(e)&&!isNaN(parseFloat(e))}function $(e){return D(e)&&y(e)}function ee(e){return function(){return e}}function te(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=E}}function ne(e){return function(t){return null==t?void 0:t[e]}}const re=ne("byteLength"),ie=te(re);var oe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const se=g?function(e){return v?v(e)&&!G(e):ie(e)&&oe.test(p.call(e))}:ee(!1),ae=ne("length");function le(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=C.length,r=e.constructor,i=W(r)&&r.prototype||c,o="constructor";for(X(e,o)&&!t.contains(o)&&t.push(o);n--;)(o=C[n])in e&&e[o]!==i[o]&&!t.contains(o)&&t.push(o)}function ce(e){if(!k(e))return[];if(A)return A(e);var t=[];for(var n in e)X(e,n)&&t.push(n);return x&&le(e,t),t}function ue(e){if(null==e)return!0;var t=ae(e);return"number"==typeof t&&(Q(e)||T(e)||Z(e))?0===t:0===ae(ce(e))}function he(e,t){var n=ce(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0}function de(e){return e instanceof de?e:this instanceof de?void(this._wrapped=e):new de(e)}function pe(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,re(e))}de.VERSION=s,de.prototype.value=function(){return this._wrapped},de.prototype.valueOf=de.prototype.toJSON=de.prototype.value,de.prototype.toString=function(){return String(this._wrapped)};var fe="[object DataView]";function ge(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&me(e,t,n,r)}function me(e,t,n,r){e instanceof de&&(e=e._wrapped),t instanceof de&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;if(Y&&"[object Object]"==i&&G(e)){if(!G(t))return!1;i=fe}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0===+e?1/+e==1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t);case"[object ArrayBuffer]":case fe:return me(pe(e),pe(t),n,r)}var o="[object Array]"===i;if(!o&&se(e)){if(re(e)!==re(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(W(s)&&s instanceof s&&W(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!ge(e[l],t[l],n,r))return!1}else{var c,h=ce(e);if(l=h.length,ce(t).length!==l)return!1;for(;l--;)if(!X(t,c=h[l])||!ge(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0}function be(e,t){return ge(e,t)}function Ae(e){if(!k(e))return[];var t=[];for(var n in e)t.push(n);return x&&le(e,t),t}function _e(e){var t=ae(e);return function(n){if(null==n)return!1;var r=Ae(n);if(ae(r))return!1;for(var i=0;i<t;i++)if(!W(n[e[i]]))return!1;return e!==Ce||!W(n[ve])}}var ve="forEach",ye=["clear","delete"],we=["get","has","set"],xe=ye.concat(ve,we),Ce=ye.concat(we),Ee=["add"].concat(ye,ve,"has");const Be=H?_e(xe):O("Map"),ke=H?_e(Ce):O("WeakMap"),Se=H?_e(Ee):O("Set"),ze=O("WeakSet");function Me(e){for(var t=ce(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function Ne(e){for(var t=ce(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function Oe(e){for(var t={},n=ce(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function Te(e){var t=[];for(var n in e)W(e[n])&&t.push(n);return t.sort()}function De(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,l=0;l<a;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}}const Ie=De(Ae),je=De(ce),Pe=De(Ae,!0);function Fe(e){if(!k(e))return{};if(_)return _(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Le(e,t){var n=Fe(e);return t&&je(n,t),n}function Ue(e){return k(e)?Q(e)?e.slice():Ie({},e):e}function Re(e,t){return t(e),e}function We(e){return Q(e)?e:[e]}function Ve(e){return de.toPath(e)}function Ye(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function He(e,t,n){var r=Ye(e,Ve(t));return z(r)?n:r}function qe(e,t){for(var n=(t=Ve(t)).length,r=0;r<n;r++){var i=t[r];if(!X(e,i))return!1;e=e[i]}return!!n}function Ge(e){return e}function Qe(e){return e=je({},e),function(t){return he(t,e)}}function Xe(e){return e=Ve(e),function(t){return Ye(t,e)}}function Ke(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}}function Ze(e,t,n){return null==e?Ge:W(e)?Ke(e,t,n):k(e)&&!Q(e)?Qe(e):Xe(e)}function Je(e,t){return Ze(e,t,1/0)}function $e(e,t,n){return de.iteratee!==Je?de.iteratee(e,t):Ze(e,t,n)}function et(e,t,n){t=$e(t,n);for(var r=ce(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o}function tt(){}function nt(e){return null==e?tt:function(t){return He(e,t)}}function rt(e,t,n){var r=Array(Math.max(0,e));t=Ke(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function it(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}de.toPath=We,de.iteratee=Je;const ot=Date.now||function(){return(new Date).getTime()};function st(e){var t=function(t){return e[t]},n="(?:"+ce(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}}const at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},lt=st(at),ct=st(Oe(at)),ut=de.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ht=/(.)^/,dt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},pt=/\\|'|\r|\n|\u2028|\u2029/g;function ft(e){return"\\"+dt[e]}var gt=/^\s*(\w|\$)+\s*$/;function mt(e,t,n){!t&&n&&(t=n),t=Pe({},t,de.templateSettings);var r=RegExp([(t.escape||ht).source,(t.interpolate||ht).source,(t.evaluate||ht).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,(function(t,n,r,s,a){return o+=e.slice(i,a).replace(pt,ft),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t})),o+="';\n";var s,a=t.variable;if(a){if(!gt.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(a,"_",o)}catch(e){throw e.source=o,e}var l=function(e){return s.call(this,e,de)};return l.source="function("+a+"){\n"+o+"}",l}function bt(e,t,n){var r=(t=Ve(t)).length;if(!r)return W(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=W(o)?o.call(e):o}return e}var At=0;function _t(e){var t=++At+"";return e?e+t:t}function vt(e){var t=de(e);return t._chain=!0,t}function yt(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=Fe(e.prototype),s=e.apply(o,i);return k(s)?s:o}var wt=B((function(e,t){var n=wt.placeholder,r=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===n?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return yt(e,r,this,this,s)};return r}));wt.placeholder=de;const xt=wt,Ct=B((function(e,t,n){if(!W(e))throw new TypeError("Bind must be called on a function");var r=B((function(i){return yt(e,r,t,this,n.concat(i))}));return r})),Et=te(ae);function Bt(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,o=0,s=ae(e);o<s;o++){var a=e[o];if(Et(a)&&(Q(a)||Z(a)))if(t>1)Bt(a,t-1,n,r),i=r.length;else for(var l=0,c=a.length;l<c;)r[i++]=a[l++];else n||(r[i++]=a)}return r}const kt=B((function(e,t){var n=(t=Bt(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Ct(e[r],e)}return e}));function St(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return X(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n}const zt=B((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),Mt=xt(zt,de,1);function Nt(e,t,n){var r,i,o,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:ot(),r=null,s=e.apply(i,o),r||(i=o=null)},c=function(){var c=ot();a||!1!==n.leading||(a=c);var u=t-(c-a);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),a=c,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(r),a=0,r=i=o=null},c}function Ot(e,t,n){var r,i,o,s,a,l=function(){var c=ot()-i;t>c?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(a,o)),r||(o=a=null))},c=B((function(c){return a=this,o=c,i=ot(),r||(r=setTimeout(l,t),n&&(s=e.apply(a,o))),s}));return c.cancel=function(){clearTimeout(r),r=o=a=null},c}function Tt(e,t){return xt(t,e)}function Dt(e){return function(){return!e.apply(this,arguments)}}function It(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function jt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Pt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const Ft=xt(Pt,2);function Lt(e,t,n){t=$e(t,n);for(var r,i=ce(e),o=0,s=i.length;o<s;o++)if(t(e[r=i[o]],r,e))return r}function Ut(e){return function(t,n,r){n=$e(n,r);for(var i=ae(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}const Rt=Ut(1),Wt=Ut(-1);function Vt(e,t,n,r){for(var i=(n=$e(n,r,1))(t),o=0,s=ae(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o}function Yt(e,t,n){return function(r,i,o){var s=0,a=ae(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(d.call(r,s,a),$))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}}const Ht=Yt(1,Rt,Vt),qt=Yt(-1,Wt);function Gt(e,t,n){var r=(Et(e)?Rt:Lt)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function Qt(e,t){return Gt(e,Qe(t))}function Xt(e,t,n){var r,i;if(t=Ke(t,n),Et(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=ce(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e}function Kt(e,t,n){t=$e(t,n);for(var r=!Et(e)&&ce(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o}function Zt(e){return function(t,n,r,i){var o=arguments.length>=3;return function(t,n,r,i){var o=!Et(t)&&ce(t),s=(o||t).length,a=e>0?0:s-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var l=o?o[a]:a;r=n(r,t[l],l,t)}return r}(t,Ke(n,i,4),r,o)}}const Jt=Zt(1),$t=Zt(-1);function en(e,t,n){var r=[];return t=$e(t,n),Xt(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function tn(e,t,n){return en(e,Dt($e(t)),n)}function nn(e,t,n){t=$e(t,n);for(var r=!Et(e)&&ce(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0}function rn(e,t,n){t=$e(t,n);for(var r=!Et(e)&&ce(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1}function on(e,t,n,r){return Et(e)||(e=Me(e)),("number"!=typeof n||r)&&(n=0),Ht(e,t,n)>=0}const sn=B((function(e,t,n){var r,i;return W(t)?i=t:(t=Ve(t),r=t.slice(0,-1),t=t[t.length-1]),Kt(e,(function(e){var o=i;if(!o){if(r&&r.length&&(e=Ye(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))}));function an(e,t){return Kt(e,Xe(t))}function ln(e,t){return en(e,Qe(t))}function cn(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=Et(e)?e:Me(e)).length;a<l;a++)null!=(r=e[a])&&r>o&&(o=r);else t=$e(t,n),Xt(e,(function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o}function un(e,t,n){var r,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=Et(e)?e:Me(e)).length;a<l;a++)null!=(r=e[a])&&r<o&&(o=r);else t=$e(t,n),Xt(e,(function(e,n,r){((i=t(e,n,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o}var hn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function dn(e){return e?Q(e)?d.call(e):T(e)?e.match(hn):Et(e)?Kt(e,Ge):Me(e):[]}function pn(e,t,n){if(null==t||n)return Et(e)||(e=Me(e)),e[it(e.length-1)];var r=dn(e),i=ae(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=it(s,o),l=r[s];r[s]=r[a],r[a]=l}return r.slice(0,t)}function fn(e){return pn(e,1/0)}function gn(e,t,n){var r=0;return t=$e(t,n),an(Kt(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}function mn(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=$e(r,i),Xt(n,(function(t,i){var s=r(t,i,n);e(o,t,s)})),o}}const bn=mn((function(e,t,n){X(e,n)?e[n].push(t):e[n]=[t]})),An=mn((function(e,t,n){e[n]=t})),_n=mn((function(e,t,n){X(e,n)?e[n]++:e[n]=1})),vn=mn((function(e,t,n){e[n?0:1].push(t)}),!0);function yn(e){return null==e?0:Et(e)?e.length:ce(e).length}function wn(e,t,n){return t in n}const xn=B((function(e,t){var n={},r=t[0];if(null==e)return n;W(r)?(t.length>1&&(r=Ke(r,t[1])),t=Ae(e)):(r=wn,t=Bt(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}return n})),Cn=B((function(e,t){var n,r=t[0];return W(r)?(r=Dt(r),t.length>1&&(n=t[1])):(t=Kt(Bt(t,!1,!1),String),r=function(e,n){return!on(t,n)}),xn(e,r,n)}));function En(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Bn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:En(e,e.length-t)}function kn(e,t,n){return d.call(e,null==t||n?1:t)}function Sn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:kn(e,Math.max(0,e.length-t))}function zn(e){return en(e,Boolean)}function Mn(e,t){return Bt(e,t,!1)}const Nn=B((function(e,t){return t=Bt(t,!0,!0),en(e,(function(e){return!on(t,e)}))})),On=B((function(e,t){return Nn(e,t)}));function Tn(e,t,n,r){M(t)||(r=n,n=t,t=!1),null!=n&&(n=$e(n,r));for(var i=[],o=[],s=0,a=ae(e);s<a;s++){var l=e[s],c=n?n(l,s,e):l;t&&!n?(s&&o===c||i.push(l),o=c):n?on(o,c)||(o.push(c),i.push(l)):on(i,l)||i.push(l)}return i}const Dn=B((function(e){return Tn(Bt(e,!0,!0))}));function In(e){for(var t=[],n=arguments.length,r=0,i=ae(e);r<i;r++){var o=e[r];if(!on(t,o)){var s;for(s=1;s<n&&on(arguments[s],o);s++);s===n&&t.push(o)}}return t}function jn(e){for(var t=e&&cn(e,ae).length||0,n=Array(t),r=0;r<t;r++)n[r]=an(e,r);return n}const Pn=B(jn);function Fn(e,t){for(var n={},r=0,i=ae(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function Ln(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}function Un(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(d.call(e,r,r+=t));return n}function Rn(e,t){return e._chain?de(t).chain():t}function Wn(e){return Xt(Te(e),(function(t){var n=de[t]=e[t];de.prototype[t]=function(){var e=[this._wrapped];return h.apply(e,arguments),Rn(this,n.apply(de,e))}})),de}Xt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=l[e];de.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Rn(this,n)}})),Xt(["concat","join","slice"],(function(e){var t=l[e];de.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Rn(this,e)}}));const Vn=de;var Yn=Wn(e);Yn._=Yn;const Hn=Yn;var qn=n(148);function Gn(){}const Qn=Array.isArray||function(e){return e instanceof Array};function Xn(e){return e&&e._isObservable}function Kn(e,t){for(var n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0}function Zn(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function Jn(e,t){return-1!==rr(e,t)}function $n(e,t){for(var n,r=[],i=0;i<t.length;i++)e(n=t[i])&&r.push(n);return r}function er(e){return(t,n)=>e(n,t)}function tr(e,t,n){for(var r=0;r<e.length;r++)t=n(t,e[r]);return t}function nr(e){return e[0]}const rr=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1};function ir(e){return"function"==typeof e}function or(e,t){for(var n,r=[],i=0;i<t.length;i++)n=t[i],r.push(e(n));return r}function sr(e){return e.slice(1,e.length)}function ar(e){return Qn(e)?e:[e]}function lr(e){return"function"==typeof e?e:t=>e}var cr={indexOf:rr,indexWhere:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},head:nr,always:function(e){return()=>e},negate:function(e){return function(t){return!e(t)}},empty:function(e){return 0===e.length},tail:sr,filter:$n,map:or,each:function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},toArray:ar,contains:Jn,id:function(e){return e},last:function(e){return e[e.length-1]},all:Kn,any:Zn,without:function(e,t){return $n((function(t){return t!==e}),t)},remove:function(e,t){var n=rr(t,e);if(n>=0)return t.splice(n,1)},fold:tr,flatMap:function(e,t){return tr(t,[],(function(t,n){return t.concat(e(n))}))},bind:function(e,t){return function(){return e.apply(t,arguments)}},isFunction:ir,toFunction:lr,toString:function e(t){var n={}.hasOwnProperty;try{if(ur++,null==t)return"undefined";if(ir(t))return"function";if(Qn(t))return ur>5?"[..]":"["+or(e,t).toString()+"]";if(null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString)return t.toString();if("object"==typeof t){if(ur>5)return"{..}";var r=[];for(var i in t){if(!n.call(t,i))continue;let o=function(){try{return t[i]}catch(e){return e}}();r.push(e(i)+":"+e(o))}return"{"+r+"}"}return t}finally{ur--}}},ur=0;const hr=void 0,dr="<no-more>";function pr(e,t){if(!t)throw new Error(e)}function fr(e){return pr("not a function : "+e,cr.isFunction(e))}const gr={setTimeout:(e,t)=>setTimeout(e,t),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e),clearTimeout:e=>clearTimeout(e),now:()=>(new Date).getTime()},mr={scheduler:gr};function br(){return mr.scheduler}function Ar(e){mr.scheduler=e}var _r=void 0,vr=[],yr={},wr=[],xr=0,Cr={},Er=!1;function Br(e){e<=xr||(wr[e-1]||(wr[e-1]=[[],0]),xr=e)}function kr(e,t){if(!_r&&!Er)return t();Br(1);for(var n=0;n<xr-1&&!Sr(e,wr[n][0]);)n++;wr[n][0].push([e,t]),_r||zr()}function Sr(e,t){for(var n=0;n<t.length;n++)if(t[n][0].id==e.id)return!0;return!1}function zr(){let e=xr;if(!e)return;let t=!Er;Er=!0;try{for(;xr>=e;){var n=wr[xr-1];if(!n)throw new Error("Unexpected stack top: "+n);var[r,i]=n;if(!(i<r.length)){n[0]=[],n[1]=0;break}var[,o]=r[i];n[1]++,Br(xr+1);var s=!1;try{for(o(),s=!0;xr>e&&0==wr[xr-1][0].length;)xr--}finally{s||(wr=[],xr=0)}}}finally{t&&(Er=!1)}}function Mr(e,t){if(_r){var n=yr[e.id];return void 0===n?(n=yr[e.id]=[t],vr.push(e)):n.push(t)}return t()}function Nr(e,t){var n=vr[e],r=n.id,i=yr[r];vr.splice(e,1),delete yr[r],t&&vr.length>0&&Or(n);for(var o=0;o<i.length;o++)(0,i[o])()}function Or(e){if(!Cr[e.id]){for(var t,n=e.internalDeps(),r=0;r<n.length;r++)Or(t=n[r]),yr[t.id]&&Nr(cr.indexOf(vr,t),!1);Cr[e.id]=!0}}var Tr={toString:function(){return cr.toString({rootEvent:_r,processingAfters:Er,waiterObs:vr,waiters:yr,aftersStack:wr,aftersStackHeight:xr,flushed:Cr})},whenDoneWith:Mr,hasWaiters:function(){return vr.length>0},inTransaction:function(e,t,n,r){if(_r)return n.apply(t,r);_r=e;try{var i=n.apply(t,r);!function(){for(;vr.length>0;)Nr(0,!0);Cr={}}()}finally{_r=void 0,zr()}return i},currentEventId:function(){return _r?_r.id:void 0},wrappedSubscribe:function(e,t,n){fr(n);let r=!1,i=!1,o=()=>{i=!0},s=()=>{r=!0,o()};return o=t((function(t){return kr(e,(function(){r||n(t)===dr&&s()})),hr})),i&&o(),s},afterTransaction:kr,soonButNotYet:function(e,t){_r?Mr(e,t):mr.scheduler.setTimeout(t,0)},isInTransaction:function(){return void 0!==_r}};class Dr{constructor(e,t,n=[]){this._isDesc=!0,this.context=e,this.method=t,this.args=n}deps(){return this.cachedDeps||(this.cachedDeps=jr([this.context].concat(this.args))),this.cachedDeps}toString(){let e=cr.map(cr.toString,this.args);return cr.toString(this.context)+"."+cr.toString(this.method)+"("+e+")"}}function Ir(e,t,...n){const r=e||t;return r&&r._isDesc?e||t:new Dr(e,t,n)}function jr(e){return Qn(e)?cr.flatMap(jr,e):Xn(e)?[e]:(null!=e?e._isSource:void 0)?[e.obs]:[]}const Pr=()=>hr,Fr=()=>hr;function Lr(e,t,n){return n.transform(function(e,t){let n=e;return(e,r)=>{var i=t(n,e),[o,s]=i;n=o;for(var a=hr,l=0;l<s.length;l++)if((a=r(s[l]))===dr)return a;return a}}(e,t),new Dr(n,"withStateMachine",[e,t]))}class Ur{constructor(e){this._isSome=!0,this.isDefined=!0,this.value=e}getOrElse(e){return this.value}get(){return this.value}filter(e){return e(this.value)?new Ur(this.value):Rr}map(e){return new Ur(e(this.value))}forEach(e){e(this.value)}toArray(){return[this.value]}inspect(){return"Some("+this.value+")"}toString(){return this.inspect()}}const Rr={_isNone:!0,getOrElse:e=>e,get(){throw new Error("None.get()")},filter:()=>Rr,map:()=>Rr,forEach(){},isDefined:!1,toArray:()=>[],inspect:()=>"None",toString(){return this.inspect()}};function Wr(){return Rr}var Vr=0;class Yr{constructor(){this.id=++Vr,this.isEvent=!0,this._isEvent=!0,this.isEnd=!1,this.isInitial=!1,this.isNext=!1,this.isError=!1,this.hasValue=!1}filter(e){return!0}inspect(){return this.toString()}log(){return this.toString()}toNext(){return this}}class Hr extends Yr{constructor(e){if(super(),this.hasValue=!0,e instanceof Yr)throw new Kr("Wrapping an event inside other event");this.value=e}fmap(e){return this.apply(e(this.value))}filter(e){return e(this.value)}toString(){return cr.toString(this.value)}log(){return this.value}}class qr extends Hr{constructor(e){super(e),this.isNext=!0,this._isNext=!0}apply(e){return new qr(e)}}class Gr extends Hr{constructor(e){super(e),this.isInitial=!0,this._isInitial=!0}apply(e){return new Gr(e)}toNext(){return new qr(this.value)}}class Qr extends Yr{constructor(){super(...arguments),this.hasValue=!1}fmap(e){return this}}class Xr extends Qr{constructor(){super(...arguments),this.isEnd=!0}toString(){return"<end>"}}class Kr extends Qr{constructor(e){super(),this.isError=!0,this.error=e}toString(){return"<error> "+cr.toString(this.error)}}function Zr(e){return new Gr(e)}function Jr(e){return new qr(e)}function $r(){return new Xr}function ei(e){return e&&e._isEvent?e:Jr(e)}function ti(e){return e&&e._isEvent}function ni(e){return e&&e._isInitial}function ri(e){return e.isError}function ii(e){return e.hasValue}function oi(e){return e.isEnd}function si(e){return e.isNext}function ai(e,t){return e===t}function li(e,t,n){return t.transform(ci(e),n||new Dr(t,"take",[e]))}function ci(e){return(t,n)=>t.hasValue?--e>0?n(t):(0===e&&n(t),n($r()),dr):n(t)}function ui(e,t,n){let r,i=t,o=!1;return r=new jo(new Dr(e,"scan",[t,n]),(t=>{var s=!1,a=Gn,l=hr;const c=function(){return s||(s=o=!0,(l=t(new Gr(i)))===dr&&(a(),a=Gn)),l};return a=e.subscribeInternal((function(e){if(ii(e)){if(o&&e.isInitial)return hr;e.isInitial||c(),s=o=!0;var r=n(i,e.value);return i=r,t(e.apply(r))}return e.isEnd&&(l=c()),l!==dr?t(e):l})),Tr.whenDoneWith(r,c),a}))}class hi{constructor(e=[]){this.unsubscribed=!1,this.unsubscribe=cr.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var t,n=0;n<e.length;n++)t=e[n],this.add(t)}add(e){if(!this.unsubscribed){var t=!1,n=Gn;this.starting.push(e),n=e(this.unsubscribe,(()=>{this.unsubscribed||(t=!0,this.remove(n),cr.remove(e,this.starting))})),this.unsubscribed||t?n():this.subscriptions.push(n),cr.remove(e,this.starting)}}remove(e){if(!this.unsubscribed)return void 0!==cr.remove(e,this.subscriptions)?e():void 0}unsubscribe(){if(!this.unsubscribed){this.unsubscribed=!0;for(var e=this.subscriptions,t=0;t<e.length;t++)e[t]();this.subscriptions=[],this.starting=[]}}count(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length}empty(){return 0===this.count()}}function di(e,t){return function(n){var r=!1,i=!1,o=Gn,s=hr,a=function(){if(!r)return e.forEach((function(e){if(r=!0,(s=n(new Gr(e)))===dr)return o(),o=Gn,Gn}))};return o=t((function(t){return t instanceof Hr?t.isInitial&&!i?(e=new Ur(t.value),hr):(t.isInitial||a(),r=!0,e=new Ur(t.value),n(t)):(t.isEnd&&(s=a()),s!==dr?n(t):s)})),i=!0,a(),o}}function pi(e,t){return fr(t),new jo(e,di(Wr(),t))}function fi(e){const t=new Lo(new Dr("Bacon","once",[e]),(function(n){return Tr.soonButNotYet(t,(function(){n(ei(e)),n($r())})),Gn}));return t}function gi(e,t,n={}){const r=t,i=[r],o=[],s=t._isProperty;let a=!1;const l=(s?pi:Ro)(n.desc||new Dr(t,"flatMap_",[e]),(function(t){const i=new hi,l=[];function c(n){if(s&&n.isInitial){if(a)return hr;a=!0}const r=bi(e(n));return o.push(r),i.add((function(e,n){const i=r.subscribeInternal((function(r){if(r.isEnd)return function(){const e=l.shift();e&&c(e)}(),u(n),dr;{r=r.toNext();const n=t(r);return n===dr&&e(),n}}));return()=>{cr.remove(r,o),i()}}))}function u(e){return e(),i.empty()?t($r()):hr}return i.add((function(e,o){return r.subscribeInternal((function(e){return e.isEnd?u(o):e.isError&&!n.mapError?t(e):n.firstOnly&&i.count()>1?hr:i.unsubscribed?dr:(n.limit&&i.count()>n.limit?l.push(e):c(e),hr)}))})),i.unsubscribe}));return l.internalDeps=function(){return o.length?i.concat(o):i},l}function mi(e){return"function"==typeof e?t=>ii(t)?e(t.value):t:t=>e}function bi(e){return Xn(e)?e:fi(e)}function Ai(e,t){return gi(t,e,{mapError:!0,desc:new Dr(e,"flatMapEvent",[t])})}class _i{constructor(e,t){this._isSource=!0,this.flatten=!0,this.ended=!1,this.obs=e,this.sync=t}subscribe(e){return this.obs.subscribeInternal(e)}toString(){return this.obs.toString()}markEnded(){this.ended=!0}mayHave(e){return!0}}class vi extends _i{consume(){return this.value}push(e){this.value=e}hasAtLeast(e){return!!this.value}}class yi extends _i{constructor(e,t){super(e,t),this.flatten=!1,this.queue=[]}consume(){return this.queue.shift()}push(e){this.queue.push(e)}mayHave(e){return!this.ended||this.queue.length>=e}hasAtLeast(e){return this.queue.length>=e}}class wi extends _i{constructor(e){super(e,!0),this.queue=[]}consume(){const e=this.queue;return this.queue=[],{value:e}}push(e){return this.queue.push(e.value)}hasAtLeast(e){return!0}}function xi(e){return null!=e&&(e._isSource?e.sync:e._isEventStream)}function Ci(e){return null!=e&&e._isSource?e:null!=e&&e._isProperty?new vi(e,!1):new yi(e,!0)}function Ei(){return new Lo(Ir("Bacon","never"),(e=>(e($r()),Gn)))}function Bi(...e){return Si(Uo,e)}function ki(...e){return Si(pi,e)}function Si(e,t){if(0===t.length)return Ei();var[n,r]=function(e){var t=[],n=[];for(let c=0;c<e.length;c++){let[u,h]=e[c];for(var r,i={f:h,ixs:[]},o=!1,s=0;s<u.length;s++){r=u[s];var a=rr(t,r);o||(o=xi(r)),a<0&&(t.push(r),a=t.length-1);for(var l=0;l<i.ixs.length;l++){let e=i.ixs[l];e.index===a&&e.count++}i.ixs.push({index:a,count:1})}if(u.length>0&&!o)throw new Error("At least one EventStream required, none found in "+u);u.length>0&&n.push(i)}return[or(Ci,t),n]}(Oi(t));if(!n.length)return Ei();var i=Zn(n,(e=>e.flatten))&&function(e,t=[]){return Zn(e,(function e(n){if(Jn(t,n))return!0;var r=n.internalDeps();return r.length?(t.push(n),Zn(r,e)):(t.push(n),!1)}))}(or((e=>e.obs),n)),o=e(new Dr("Bacon","when",Array.prototype.slice.call(t)),(function(e){var t=[],s=!1;function a(e){for(var t=0;t<e.ixs.length;t++){let r=e.ixs[t];if(!n[r.index].hasAtLeast(r.count))return!1}return!0}function l(e){for(var t=0;t<e.ixs.length;t++){let r=e.ixs[t];if(!n[r.index].mayHave(r.count))return!0}return!1}function c(e){return!e.source.flatten}return new hi(or((function(u){return function(h){function d(){return Tr.whenDoneWith(o,f)}function p(){var i;if(void 0!==(i=t.pop()))for(var o,s=hr,l=0;l<r.length;l++)if(a(o=r[l])){const r=[];for(var u=0;u<o.ixs.length;u++){let e=n[o.ixs[u].index].consume();if(!e)throw new Error("Event was undefined");r.push(e.value)}let a=o.f.apply(null,r);return s=e(i.e.apply(a)),t.length&&(t=$n(c,t)),s===dr?s:p()}return hr}function f(){var t=p();s&&(Kn(n,Ti)||Kn(r,l))&&(t=dr,e($r())),t===dr&&h()}return u.subscribe((function(n){var r=hr;if(n.isEnd)s=!0,u.markEnded(),d();else if(n.isError)r=e(n);else{let e=n;u.push(e),u.sync&&(t.push({source:u,e}),i||Tr.hasWaiters()?d():f())}return r===dr&&h(),r}))}}),n)).unsubscribe}));return o}function zi(e){for(var t=0,n=e.length,r=[];t<n;){let n=ar(e[t++]),i=lr(e[t++]);r.push([n,i])}return pr("when: expecting arguments in the form (Observable+,function)+",n%2==0),r}function Mi(e){return e instanceof Array&&!Xn(e[e.length-1])}function Ni(e){return e[0]instanceof Array}function Oi(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];if(!Mi(r))return zi(e);if(Ni(r))t.push([r[0],lr(r[1])]);else{let e=r.slice(0,r.length-1),n=lr(r[r.length-1]);t.push([e,n])}}return t}function Ti(e){return!e.sync||e.ended}function Di(e,t,n){return Bi([new vi(t.toProperty(),!1),new vi(e,!0),er(n)]).withDesc(new Dr(e,"withLatestFrom",[t,n]))}function Ii(e,t,n){return ki([new vi(t.toProperty(),!1),new vi(e,!0),er(n)]).withDesc(new Dr(e,"withLatestFrom",[t,n]))}function ji(e,t,n){if(e instanceof jo)return Ii(e,t,n);if(e instanceof Lo)return Di(e,t,n);throw new Error("Unknown observable: "+e)}function Pi(e,t){return t instanceof jo?ji(e,t,((e,t)=>t)):e.transform(Fi(t),new Dr(e,"map",[t]))}function Fi(e){let t=cr.toFunction(e);return(e,n)=>n(e.fmap(t))}function Li(e){return new jo(new Dr("Bacon","constant",[e]),(function(t){return t(Zr(e)),t($r()),Gn}))}function Ui(e){return e=Array.prototype.slice.call(e),cr.flatMap(Ri,e)}function Ri(e){return Xn(e)?[e]:Qn(e)?Ui(e):[Li(e)]}function Wi(e){return cr.isFunction(e[0])?[Ui(Array.prototype.slice.call(e,1)),e[0]]:[Ui(Array.prototype.slice.call(e,0,e.length-1)),cr.last(e)]}function Vi(...e){return Yi(Ui(e))}function Yi(e,t){return Si(((e,n)=>new Lo(e,n,void 0,t)),[cr.map((e=>new wi(e)),e),function(...e){return e}]).withDesc(new Dr("Bacon","groupSimultaneous",e))}function Hi(...e){if((e=Ui(e)).length){for(var t=[],n=0;n<e.length;n++){let r=Xn(e[n])?e[n]:Li(e[n]);t.push(Xi(r))}return ki([t,(...e)=>e]).withDesc(new Dr("Bacon","combineAsArray",e))}return Li([])}function qi(...e){var[t,n]=Wi(arguments),r=new Dr("Bacon","combineWith",[n,...t]);return Hi(t).map((function(e){return n(...e)})).withDesc(r)}const Gi=qi;function Qi(e,t,n){return ki([[Xi(e),Xi(t)],n]).withDesc(new Dr(e,"combine",[t,n]))}function Xi(e){return new vi(e,!0)}function Ki(e,t){return gi(mi(t),e,{desc:new Dr(e,"flatMapConcat",[t]),limit:1})}function Zi(e,t=cr.id){var n=new Dr("Bacon","fromBinder",[e,t]);return new Lo(n,(function(n){var r=!1,i=!1,o=function(){if(!r)return null!=s?(s(),r=!0):i=!0},s=e((function(...e){var r=t(...e);let i=Qn(r)&&ti(cr.last(r))?r:[r];for(var s=hr,a=0;a<i.length;a++){let e=ei(i[a]);if((s=n(e))===dr||e.isEnd)return o(),s}return s}));return i&&o(),o}))}function Ji(e,t){var n=new Dr("Bacon","fromPoll",[e,t]);return Zi((function(t){var n=mr.scheduler.setInterval(t,e);return function(){return mr.scheduler.clearInterval(n)}}),t).withDesc(n)}function $i(e,t){return Ji(e,(function(){return Jr(t)})).withDesc(new Dr("Bacon","interval",[e,t]))}function eo(e,t,n){return ji(t,e,er((r=n,"function"==typeof r?r:cr.id))).withDesc(new Dr(e,"sampledBy",[t]));var r}function to(e,t){return eo(e,$i(t,{}),((e,t)=>e)).withDesc(new Dr(e,"sample",[t]))}function no(e,t,n){return new jo(new Dr(e,"transform",[t]),(n=>e.subscribeInternal((e=>t(e,n))))).withDesc(n)}function ro(e,t){let n;const r=e=>t(e,n);return(t,i)=>(n=i,e(t,r))}function io(e,t,n,r){return t instanceof jo?ji(e,t,((e,t)=>[e,t])).transform(ro(n((e=>e[1])),Fi((e=>e[0]))),r):e.transform(n(function(e){if("boolean"==typeof e)return cr.always(e);if("function"!=typeof e)throw new Error("Not a function: "+e);return e}(t)),r)}function oo(e){return(t,n)=>t.filter(e)?n(t):hr}function so(e){return e.map((e=>!e)).withDesc(new Dr(e,"not",[]))}function ao(e){return Po(e)?e:Li(e)}function lo(e,t){return gi(mi(t),e,{firstOnly:!0,desc:new Dr(e,"flatMapFirst",[t])})}function co(...e){let t=Ui(e);return(t.length?tr(sr(t),nr(t).toEventStream(),((e,t)=>e.concat(t))):Ei()).withDesc(new Dr("Bacon","concatAll",t))}function uo(e,t,n){return e.scan(t,n).last().withDesc(new Dr(e,"fold",[t,n]))}const ho={};function po(e,t){return gi(mi(t),e,{desc:new Dr(e,"flatMap",[t])})}function fo(e,t){return gi((e=>{if(e instanceof Kr){let n=e.error;return t(n)}return e}),e,{mapError:!0,desc:new Dr(e,"flatMapError",[t])})}var go=[],mo=!1;function bo(e){if(go.length&&!mo)try{mo=!0,go.forEach((function(t){t(e)}))}finally{mo=!1}}const Ao=e=>go.push(e);function _o(e,t){let n=cr.toFunction(t);var r=Po(e)?e.toEventStream(Fo):e;let i=po(r,(e=>bi(n(e)).takeUntil(r)));return Po(e)&&(i=i.toProperty()),i.withDesc(new Dr(e,"flatMapLatest",[n]))}class vo{constructor(e,t,n){this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this._subscribe=t,this._handleEvent=n,this.subscribe=cr.bind(this.subscribe,this),this.handleEvent=cr.bind(this.handleEvent,this),this.subscriptions=[],this.observable=e,this.queue=[]}hasSubscribers(){return this.subscriptions.length>0}removeSub(e){return this.subscriptions=cr.without(e,this.subscriptions),this.subscriptions}push(e){return e.isEnd&&(this.ended=!0),Tr.inTransaction(e,this,this.pushIt,[e])}pushToSubscriptions(e){try{let t=this.subscriptions;const n=t.length;for(let r=0;r<n;r++){const n=t[r];(n.sink(e)===dr||e.isEnd)&&this.removeSub(n)}return!0}catch(e){throw this.pushing=!1,this.queue=[],e}}pushIt(e){if(this.pushing)return this.queue.push(e),hr;if(e!==this.prevError){for(e.isError&&(this.prevError=e),this.pushing=!0,this.pushToSubscriptions(e),this.pushing=!1;;){let e=this.queue.shift();if(!e)break;this.push(e)}return this.hasSubscribers()?hr:(this.unsubscribeFromSource(),dr)}}handleEvent(e){return this._handleEvent?this._handleEvent(e):this.push(e)}unsubscribeFromSource(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0}subscribe(e){if(this.ended)return e($r()),Gn;{fr(e);let t={sink:e};return this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),fr(this.unsubSrc)),()=>{if(this.removeSub(t),!this.hasSubscribers())return this.unsubscribeFromSource()}}}inspect(){return this.observable.toString()}}class yo extends vo{constructor(e,t,n){super(e,t,n),this.current=Wr(),this.propertyEnded=!1,this.subscribe=cr.bind(this.subscribe,this)}push(e){return e.isEnd&&(this.propertyEnded=!0),e instanceof Hr?(this.current=new Ur(e),this.currentValueRootId=Tr.currentEventId()):e.hasValue&&console.error("Unknown event, two Bacons loaded?",e.constructor),super.push(e)}maybeSubSource(e,t){return t===dr?Gn:this.propertyEnded?(e($r()),Gn):super.subscribe(e)}subscribe(e){var t=hr;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var n=Tr.currentEventId(),r=this.currentValueRootId;return!this.propertyEnded&&r&&n&&n!==r?(Tr.whenDoneWith(this.observable,(()=>{if(this.currentValueRootId===r)return e(Zr(this.current.get().value))})),this.maybeSubSource(e,t)):(Tr.inTransaction(void 0,this,(()=>t=e(Zr(this.current.get().value))),[]),this.maybeSubSource(e,t))}return this.maybeSubSource(e,t)}inspect(){return this.observable+" current= "+this.current}}function wo(e,t,n){return gi(mi(n),e,{desc:new Dr(e,"flatMapWithConcurrencyLimit",[t,n]),limit:t})}function xo(e,t,n){const r=function(e){if(void 0!==e){if("number"==typeof e){var t=e;return function(e){return mr.scheduler.setTimeout(e,t)}}return e}}(t);function i(e){return e.values.length===n?e.flush():void 0!==r?e.schedule(r):void 0}var o=new Dr(e,"bufferWithTimeOrCount",[t,n]);return function(e,t=Gn,n=Gn){var r=hr,i=new Co(n,t);return e.transform(((e,n)=>(i.push=n,ii(e)?(i.values.push(e.value),t(i)):ri(e)?r=n(e):oi(e)&&(i.end=e,i.scheduled||i.flush()),r))).withDesc(new Dr(e,"buffer",[]))}(e,i,i).withDesc(o)}class Co{constructor(e,t){this.push=e=>hr,this.scheduled=null,this.end=void 0,this.values=[],this.onFlush=e,this.onInput=t}flush(){if(this.scheduled&&(mr.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var e=this.values;this.values=[];var t=this.push(Jr(e));if(null!=this.end)return this.push(this.end);if(t!==dr)return this.onFlush(this)}else if(null!=this.end)return this.push(this.end)}schedule(e){if(!this.scheduled)return this.scheduled=e((()=>this.flush()))}}function Eo(...e){let t=Ui(e);return t.length?new Lo(new Dr("Bacon","mergeAll",t),(function(e){var n=0,r=or((function(r){return function(i){return r.subscribeInternal((function(r){if(r.isEnd)return++n===t.length?e($r()):hr;r=r.toNext();var o=e(r);return o===dr&&i(),o}))}}),t);return new hi(r).unsubscribe})):Ei()}function Bo(e,t){return Zi((function(n){var r=mr.scheduler.setTimeout((function(){return n([ei(t),$r()])}),e);return function(){return mr.scheduler.clearTimeout(r)}})).withDesc(new Dr("Bacon","later",[e,t]))}function ko(e){return(t,n)=>t.filter(e)?n(t):(n($r()),dr)}function So(e){var t=!1;return function(n,r){return!t&&ii(n)&&e(n.value)?hr:(n.hasValue&&(t=!0),r(n))}}function zo(e,t,n=cr.id){var r={};return e.transform(ro(oo((e=>!r[t(e)])),Fi((function(i){var o=t(i),s=e.changes().filter((e=>t(e)===o)),a=fi(i).concat(s),l=n(a,i).toEventStream().transform(((e,t)=>{let n=t(e);return e.isEnd&&delete r[o],n}));return r[o]=l,l}))))}const Mo={};function No(...e){return Bi([cr.map((e=>e.toEventStream()),Ui(e)),(...e)=>e]).withDesc(new Dr("Bacon","zipAsArray",e))}function Oo(e,...t){var[t,e]=Wi(arguments);return Bi([t=cr.map((e=>e.toEventStream()),t),e]).withDesc(new Dr("Bacon","zipWith",[e].concat(t)))}function To(e){function t(e,t,n){return(function(e){return e[e.length-1]}(e))[t]=n,n}function n(e){return Qn(e)?[]:{}}function r(e){if(Xn(e))return!0;if(e&&(e.constructor==Object||e.constructor==Array))for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&r(e[t]))return!0}function i(e,i){if(Xn(i))a.push(i),s.push(function(e,n){return function(r,i){t(r,e,i[n])}}(e,a.length-1));else if(r(i)){const r=function(e){e.pop()};s.push(function(e,r){return function(i){const o=n(r);t(i,e,o),i.push(o)}}(e,i)),o(i),s.push(r)}else s.push(function(e,n){return function(r){t(r,e,n)}}(e,i))}function o(e){cr.each(e,i)}const s=[],a=[],l=r(e)?(o(e),Hi(a).map((function(t){const r=n(e),i=[r];for(var o=0;o<s.length;o++)(0,s[o])(i,t);return r}))):Li(e);return l.withDesc(new Dr("Bacon","combineTemplate",[e]))}var Do=0;class Io{constructor(e){this.id=++Do,this._isObservable=!0,this.desc=e,this.initialDesc=e}awaiting(e){return function(e,t){return Yi([e,t],Fo).map((e=>0===e[1].length)).toProperty(!1).skipDuplicates().withDesc(new Dr(e,"awaiting",[t]))}(this,e)}bufferingThrottle(e){return function(e,t){var n=new Dr(e,"bufferingThrottle",[t]);return e.transformChanges(n,(e=>e.flatMapConcat((e=>fi(e).concat(Bo(t,e).errors())))))}(this,e)}combine(e,t){return Qi(this,e,t).withDesc(new Dr(this,"combine",[e,t]))}debounce(e){return function(e,t){return e.transformChanges(new Dr(e,"debounce",[t]),(function(e){return e.flatMapLatest((function(e){return Bo(t,e)}))}))}(this,e)}debounceImmediate(e){return function(e,t){return e.transformChanges(new Dr(e,"debounceImmediate",[t]),(function(e){return e.flatMapFirst((function(e){return fi(e).concat(Bo(t,e).errors())}))}))}(this,e)}decode(e){return function(e,t){return e.combine(To(t),((e,t)=>t[e])).withDesc(new Dr(e,"decode",[t]))}(this,e)}delay(e){return function(e,t){return e.transformChanges(new Dr(e,"delay",[t]),(function(e){return e.flatMap((function(e){return Bo(t,e)}))}))}(this,e)}deps(){return this.desc.deps()}diff(e,t){return function(e,t,n){return no(ui(e,[t,Mo],((e,t)=>[t,n(e[0],t)])),ro(oo((e=>e[1]!==Mo)),Fi((e=>e[1]))),new Dr(e,"diff",[t,n]))}(this,e,t)}doAction(e){return this.transform(function(e){return(t,n)=>(ii(t)&&e(t.value),n(t))}(e),new Dr(this,"doAction",[e]))}doEnd(e){return this.transform(function(e){return(t,n)=>(oi(t)&&e(),n(t))}(e),new Dr(this,"doEnd",[e]))}doError(e){return this.transform(function(e){return(t,n)=>(ri(t)&&e(t.error),n(t))}(e),new Dr(this,"doError",[e]))}doLog(...e){return this.transform(function(e){return(t,n)=>("undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(...e.concat([t.log()])),n(t))}(e),new Dr(this,"doLog",e))}endAsValue(){return this.transform(((e,t)=>oi(e)?(t(Jr({})),t($r()),dr):hr))}endOnError(e=e=>!0){return function(e,t=e=>!0){return e.transform(((e,n)=>ri(e)&&t(e.error)?(n(e),n($r())):n(e)),new Dr(e,"endOnError",[]))}(this,e)}errors(){return this.filter((e=>!1)).withDesc(new Dr(this,"errors"))}filter(e){return function(e,t){return io(e,t,oo,new Dr(e,"filter",[t]))}(this,e)}first(){return li(1,this,new Dr(this,"first"))}firstToPromise(e){return function(e,t){const n=(t,n)=>e.subscribe((e=>(ii(e)&&t(e.value),ri(e)&&n(e.error),dr)));if("function"==typeof t)return new t(n);if("function"==typeof Promise)return new Promise(n);throw new Error("There isn't default Promise, use shim or parameter")}(this,e)}fold(e,t){return uo(this,e,t)}forEach(e=Pr){return this.onValue(e)}holdWhen(e){return function(e,t){var n=!1,r=[],i=!1;return new Lo(new Dr(e,"holdWhen",[t]),(function(o){var s=new hi,a=!1,l=function(e){return e&&e(),s.empty()&&a?o($r()):hr};return s.add((function(e,s){return t.subscribeInternal((function(e){if(ii(e)){n=e.value;var t=hr;if(!n){var a=r;r=[];for(var c=0;c<a.length;c++)t=o(Jr(a[c]));i&&(o($r()),s(),t=dr)}return t}return e.isEnd?l(s):o(e)}))})),s.add((function(t,s){return e.subscribeInternal((function(e){return n&&ii(e)?(r.push(e.value),hr):e.isEnd&&r.length?(i=!0,l(s)):o(e)}))})),a=!0,l(),s.unsubscribe}))}(this,e)}inspect(){return this.toString()}internalDeps(){return this.initialDesc.deps()}last(){return(e=this).transform((function(e,n){return oi(e)?(t&&n(t),n($r()),dr):ii(e)?(t=e,hr):n(e)})).withDesc(new Dr(e,"last",[]));var e,t}log(...e){return function(e,t){t.subscribe((function(t){return"undefined"!=typeof console&&"function"==typeof console.log&&console.log(...e.concat([t.log()])),hr}))}(e,this),this}mapEnd(e){return this.transform(function(e){let t=cr.toFunction(e);return function(e,n){return oi(e)?(n(Jr(t(e))),n($r()),dr):n(e)}}(e),new Dr(this,"mapEnd",[e]))}mapError(e){return this.transform(function(e){let t=cr.toFunction(e);return function(e,n){return ri(e)?n(Jr(t(e.error))):n(e)}}(e),new Dr(this,"mapError",[e]))}name(e){return this._name=e,this}onEnd(e=Fr){return this.subscribe((function(t){return t.isEnd?e():hr}))}onError(e=Pr){return this.subscribe((function(t){return ri(t)?e(t.error):hr}))}onValue(e=Pr){return this.subscribe((function(t){return ii(t)?e(t.value):hr}))}onValues(e){return this.onValue((function(t){return e(...t)}))}reduce(e,t){return uo(this,e,t)}sampledBy(e){return function(e,t,n){return e instanceof Lo?function(e,t,n){return eo(e.toProperty(),t,n).withDesc(new Dr(e,"sampledBy",[t]))}(e,t,n):eo(e,t,n)}(this,e,arguments[1])}scan(e,t){return ui(this,e,t)}skip(e){return function(e,t){return e.transform(((e,n)=>e.hasValue&&t>0?(t--,hr):n(e)),new Dr(e,"skip",[t]))}(this,e)}skipDuplicates(e){return function(e,t=ai){let n=new Dr(e,"skipDuplicates",[]);return Lr(Wr(),(function(e,n){return ii(n)?n.isInitial||function(e){return null!=e&&e._isNone}(e)||!t(e.get(),n.value)?[new Ur(n.value),[n]]:[e,[]]:[e,[n]]}),e).withDesc(n)}(this,e)}skipErrors(){return(e=this).transform((function(e,t){return ri(e)?hr:t(e)}),new Dr(e,"skipErrors",[]));var e}skipUntil(e){return function(e,t){var n=t.transform(ro(ci(1),Fi(!0))).toProperty().startWith(!1);return e.filter(n).withDesc(new Dr(e,"skipUntil",[t]))}(this,e)}skipWhile(e){return function(e,t){return io(e,t,So,new Dr(e,"skipWhile",[t]))}(this,e)}slidingWindow(e,t=0){return function(e,t,n=0){return e.scan([],(function(e,n){return e.concat([n]).slice(-t)})).filter((function(e){return e.length>=n})).withDesc(new Dr(e,"slidingWindow",[t,n]))}(this,e,t)}subscribe(e=Pr){return Tr.wrappedSubscribe(this,(e=>this.subscribeInternal(e)),e)}take(e){return li(e,this)}takeUntil(e){return function(e,t){let n=Yi([e.mapEnd(ho),t.skipErrors()],Fo);return e instanceof jo&&(n=n.toProperty()),n.transform((function(e,t){if(ii(e)){var[n,r]=e.value;if(r.length)return t($r());for(var i=hr,o=0;o<n.length;o++){let e=n[o];if(e===ho)return t($r());i=t(Jr(e))}return i}return t(e)}),new Dr(e,"takeUntil",[t]))}(this,e)}takeWhile(e){return function(e,t){return io(e,t,ko,new Dr(e,"takeWhile",[t]))}(this,e)}throttle(e){return function(e,t){return e.transformChanges(new Dr(e,"throttle",[t]),(e=>e.bufferWithTime(t).map((e=>e[e.length-1]))))}(this,e)}toPromise(e){return function(e,t){return e.last().firstToPromise(t)}(this,e)}toString(){return this._name?this._name:this.desc.toString()}withDesc(e){return e&&(this.desc=e),this}withDescription(e,t,...n){return this.desc=Ir(e,t,...n),this}zip(e,t){return function(e,t,n){return Oo(n||Array,e,t).withDesc(new Dr(e,"zip",[t]))}(this,e,t)}}class jo extends Io{constructor(e,t,n){super(e),this._isProperty=!0,fr(t),this.dispatcher=new yo(this,t,n),bo(this)}and(e){return n=e,(t=this).combine(ao(n),((e,t)=>!(!e||!t))).withDesc(new Dr(t,"and",[n]));var t,n}changes(){return new Lo(new Dr(this,"changes",[]),(e=>this.dispatcher.subscribe((function(t){return t.isInitial?hr:e(t)}))))}concat(e){return this.transformChanges(Ir(this,"concat",e),(t=>t.concat(e)))}transformChanges(e,t){return function(e,t,n){let r,i;const o=t(new Lo(Ir(e,"changes",[]),(t=>e.dispatcher.subscribe((function(e){return!r&&ni(e)&&(r=e,Tr.whenDoneWith(s,(function(){if(!i)throw new Error("Init sequence fail");i(r)}))),e.isInitial?hr:t(e)}))),void 0,Fo)),s=pi(n,(e=>(i=e,o.dispatcher.subscribe((function(t){e(t)})))));return s}(this,t,e)}flatMap(e){return po(this,e)}flatMapConcat(e){return Ki(this,e)}flatMapError(e){return fo(this,e)}flatMapEvent(e){return Ai(this,e)}flatMapFirst(e){return lo(this,e)}flatMapLatest(e){return _o(this,e)}flatMapWithConcurrencyLimit(e,t){return wo(this,e,t)}groupBy(e,t){return zo(this,e,t)}map(e){return Pi(this,e)}not(){return so(this)}or(e){return n=e,(t=this).combine(ao(n),((e,t)=>e||t)).withDesc(new Dr(t,"or",[n]));var t,n}sample(e){return to(this,e)}startWith(e){return function(e,t){return e.scan(t,((e,t)=>t)).withDesc(new Dr(e,"startWith",[t]))}(this,e)}subscribeInternal(e=Pr){return this.dispatcher.subscribe(e)}toEventStream(e){return new Lo(new Dr(this,"toEventStream",[]),(e=>this.subscribeInternal((function(t){return e(t.toNext())}))),void 0,e)}toProperty(){return pr("no arguments supported",0===arguments.length),this}transform(e,t){return no(this,e,t)}withLatestFrom(e,t){return Ii(this,e,t)}withStateMachine(e,t){return Lr(e,t,this)}}function Po(e){return!!e._isProperty}const Fo={forceAsync:!1};class Lo extends Io{constructor(e,t,n,r){super(e),this._isEventStream=!0,r!==Fo&&(t=function(e,t){var n=!1;return function(r){const i=Tr.isInTransaction();var o;function s(){var e=o||[];o=void 0;for(var t=0;t<e.length;t++){var n=e[t];r(n)}}n=!0;try{return t((function(t){return n||o?(o?o.push(t):(o=[t],i?Tr.soonButNotYet(e,s):mr.scheduler.setTimeout(s,0)),hr):r(t)}))}finally{n=!1}}}(this,t)),this.dispatcher=new vo(this,t,n),bo(this)}bufferWithTime(e){return function(e,t){return xo(e,t,Number.MAX_VALUE).withDesc(new Dr(e,"bufferWithTime",[t]))}(this,e)}bufferWithCount(e){return function(e,t){return xo(e,void 0,t).withDesc(new Dr(e,"bufferWithCount",[t]))}(this,e)}bufferWithTimeOrCount(e,t){return xo(this,e,t)}changes(){return this}concat(e,t){return function(e,t,n){return new Lo(new Dr(e,"concat",[t]),(function(n){var r=Gn,i=e.dispatcher.subscribe((function(e){return e.isEnd?(r=t.toEventStream().dispatcher.subscribe(n),hr):n(e)}));return function(){return i(),r()}}),void 0,n)}(this,e,t)}transformChanges(e,t){return t(this).withDesc(e)}flatMap(e){return po(this,e)}flatMapConcat(e){return Ki(this,e)}flatMapError(e){return fo(this,e)}flatMapFirst(e){return lo(this,e)}flatMapLatest(e){return _o(this,e)}flatMapWithConcurrencyLimit(e,t){return wo(this,e,t)}flatMapEvent(e){return Ai(this,e)}flatScan(e,t){return function(e,t,n){let r=t;return e.flatMapConcat((e=>bi(n(r,e)).doAction((e=>r=e)))).toProperty().startWith(t).withDesc(new Dr(e,"flatScan",[t,n]))}(this,e,t)}groupBy(e,t){return zo(this,e,t)}map(e){return Pi(this,e)}merge(e){return function(e){if(!(null!=e?e._isEventStream:void 0))throw new Error("not an EventStream : "+e)}(e),Eo(this,e).withDesc(new Dr(this,"merge",[e]))}not(){return so(this)}startWith(e){return function(e,t){return fi(t).concat(e).withDesc(new Dr(e,"startWith",[t]))}(this,e)}subscribeInternal(e=Pr){return this.dispatcher.subscribe(e)}toEventStream(){return this}toProperty(e){let t=arguments.length?(n=e)&&(n._isSome||n._isNone)?n:new Ur(n):Wr();var n;let r=this.dispatcher,i=new Dr(this,"toProperty",Array.prototype.slice.apply(arguments)),o=r.subscribe;return new jo(i,di(t,o))}transform(e,t){return function(e,t,n){return new Lo(new Dr(e,"transform",[t]),(n=>e.subscribeInternal((e=>t(e,n)))),void 0,Fo).withDesc(n)}(this,e,t)}withLatestFrom(e,t){return Di(this,e,t)}withStateMachine(e,t){return Lr(e,t,this)}}function Uo(e,t){return new Lo(e,t)}function Ro(e,t){return new Lo(e,t,void 0,Fo)}function Wo(e){return"undefined"!=typeof Symbol&&Symbol[e]?Symbol[e]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[e]=Symbol.for(e):"@@"+e}class Vo{constructor(e){this.observable=e}subscribe(e,t,n){const r="function"==typeof e?{next:e,error:t,complete:n}:e,i={closed:!1,unsubscribe:function(){i.closed=!0,o()}},o=this.observable.subscribe((function(e){ii(e)&&r.next?r.next(e.value):ri(e)?(r.error&&r.error(e.error),i.unsubscribe()):e.isEnd&&(i.closed=!0,r.complete&&r.complete())}));return i}}function Yo(e,...t){let n=Oi(t);for(var r=0;r<n.length;r++){let e=n[r];e[1]=Ho(e[1])}return Bi(...n).scan(e,(function(e,t){return t(e)})).withDesc(new Dr("Bacon","update",[e,...t]))}function Ho(e){return function(...t){return function(n){return e(...[n].concat(t))}}}function qo(e){if(function(e){if(!Qn(e))throw new Error("not an array : "+e)}(e),e.length){var t=0,n=new Lo(new Dr("Bacon","fromArray",[e]),(function(r){var i=!1,o=hr,s=!1,a=!1;return Tr.soonButNotYet(n,(function l(){if(a=!0,!s){if(t===e.length)return r($r()),!1;for(s=!0;a;)if(a=!1,o!==dr&&!i){var c=e[t++];(o=r(ei(c)))!==dr&&(t===e.length?r($r()):Tr.afterTransaction(n,l))}return s=!1}})),function(){return i=!0}}));return n}return Ei().withDesc(new Dr("Bacon","fromArray",e))}Vo.prototype[Wo("observable")]=function(){return this},Io.prototype.toESObservable=function(){return new Vo(this)},Io.prototype[Wo("observable")]=Io.prototype.toESObservable;var Go=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],Qo=function(e){for(var t,n=0;n<Go.length;n++){var r=[e[(t=Go[n])[0]],e[t[1]]];if(r[0]&&r[1])return r}for(var i=0;i<Go.length;i++){var o=e[(t=Go[i])[0]];if(o)return[o,function(){}]}throw new Error("No suitable event methods in "+e)};function Xo(e,t,n){var[r,i]=Qo(e),o=new Dr("Bacon","fromEvent",[e,t]);return Zi((function(n){return o=t,cr.isFunction(o)?(t(r.bind(e),n),function(){return t(i.bind(e),n)}):(r.call(e,t,n),function(){return i.call(e,t,n)});var o}),n).withDesc(o)}function Ko(...e){return Hi(e.slice(0,e.length-1)).onValues(e[arguments.length-1])}function Zo(e){var t=0;return Zi((function(n){var r=!1,i=hr,o=function(){};function s(e){return e.isEnd?(r?a():r=!0,hr):i=n(e)}function a(){var a;for(r=!0;r&&i!==dr;)a=e(t++),r=!1,a?o=a.subscribeInternal(s):n($r());r=!0}return a(),()=>o()})).withDesc(new Dr("Bacon","repeat",[e]))}function Jo(e,t){var n=0;return Ji(e,(function(){return t[n++%t.length]})).withDesc(new Dr("Bacon","repeatedly",[e,t]))}function $o(e){return Bo(e,"").filter(!1).withDesc(new Dr("Bacon","silence",[e]))}function es(e){if(!cr.isFunction(e.source))throw new Error("'source' option has to be a function");var t=e.source,n=e.retries||0,r=0,i=e.delay||function(){return 0},o=e.isRetryable||function(){return!0},s=!1,a=null;return Zo((function(e){function l(){return t(e).endOnError().transform((function(e,t){return ri(e)?o((a=e).error)&&(0===n||r<n)?hr:(s=!0,t(e)):(ii(e)&&(a=null,s=!0),t(e))}))}if(!s){if(a){var c={error:a.error,retriesDone:r},u=$o(i(c));return r++,u.concat(fi(null).flatMap(l))}return l()}})).withDesc(new Dr("Bacon","retry",[e]))}function ts(e,t){var n=0;return Ji(e,(function(){var e=t[n++];return n<t.length?e:n===t.length?[ei(e),$r()]:$r()})).withDesc(new Dr("Bacon","sequentially",[e,t]))}function ns(e){return[ei(e),$r()]}function rs(e,t,n=ns){return Zi((function(n){const r=e.then(n,(e=>n(new Kr(e))));return r&&"function"==typeof r.done&&r.done(),t?function(){if("function"==typeof e.abort)return e.abort()}:function(){}}),n).withDesc(new Dr("Bacon","fromPromise",[e]))}const is=(os=function(e,...t){return cr.isFunction(e)?t.length?function(e,t){return function(...n){return e(...t.concat(n))}}(e,t):e:cr.always(e)},function(e,...t){if("object"==typeof e&&t.length){var n=e,r=t[0];e=function(...e){return n[r](...e)},t=t.slice(1)}return os(e,...t)});var os;function ss(e,t){return is(e,...t)}function as(e,...t){return Zi((function(n){return ss(e,t)(n),Gn}),(function(e){return[e,$r()]})).withDesc(new Dr("Bacon","fromCallback",[e,...t]))}function ls(e,...t){return Zi((function(n){return ss(e,t)(n),Gn}),(function(e,t){return e?[new Kr(e),$r()]:[t,$r()]})).withDesc(new Dr("Bacon","fromNodeCallback",[e,...t]))}function cs(e){var t;t=e[Wo("observable")]?e[Wo("observable")]():e;var n=new Dr("Bacon","fromESObservable",[t]);return new Lo(n,(function(e){var n=t.subscribe({error:function(t){e(new Kr(t)),e(new Xr)},next:function(t){e(new qr(t))},complete:function(){e(new Xr)}});return n.unsubscribe?function(){n.unsubscribe()}:n}))}class us extends Lo{constructor(){super(new Dr("Bacon","Bus",[]),(e=>this.subscribeAll(e))),this.pushing=!1,this.pushQueue=void 0,this.ended=!1,this.subscriptions=[],this.unsubAll=cr.bind(this.unsubAll,this),this.push=cr.bind(this.push,this),this.subscriptions=[],this.ended=!1}plug(e){if(function(e){if(!(null!=e?e._isObservable:void 0))throw new Error("not an Observable : "+e)}(e),!this.ended){var t={input:e,unsub:void 0};return this.subscriptions.push(t),void 0!==this.sink&&this.subscribeInput(t),()=>this.unsubscribeInput(e)}}end(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink($r())}push(e){if(!this.ended&&"function"==typeof this.sink){var t=!this.pushing;if(!t)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(e);this.pushing=!0;try{return this.sink(Jr(e))}finally{if(t&&this.pushQueue){for(var n=0;n<this.pushQueue.length;){var r=this.pushQueue[n];this.sink(Jr(r)),n++}this.pushQueue=void 0}this.pushing=!1}}}error(e){if("function"==typeof this.sink)return this.sink(new Kr(e))}unsubAll(){for(var e,t=this.subscriptions,n=0;n<t.length;n++)"function"==typeof(e=t[n]).unsub&&e.unsub()}subscribeAll(e){if(this.ended)e($r());else{this.sink=e;for(var t,n=this.subscriptions.slice(),r=0;r<n.length;r++)t=n[r],this.subscribeInput(t)}return this.unsubAll}guardedSink(e){return t=>t.isEnd?(this.unsubscribeInput(e),dr):this.sink?this.sink(t):hr}subscribeInput(e){return e.unsub=e.input.subscribeInternal(this.guardedSink(e.input)),e.unsub}unsubscribeInput(e){for(var t,n=this.subscriptions,r=0;r<n.length;r++)if((t=n[r]).input===e)return"function"==typeof t.unsub&&t.unsub(),void this.subscriptions.splice(r,1)}}function hs(e){return function(t){try{return fi(e(t))}catch(e){return fi(new Kr(e))}}}const ds={asEventStream(e,t,n){return cr.isFunction(t)&&(n=t,t=void 0),Zi((n=>(this.on(e,t,n),()=>this.off(e,t,n))),n).withDesc(new Dr(this.selector||this,"asEventStream",[e]))},init(e){e.fn.asEventStream=ds.asEventStream}},ps="3.0.22";var fs=n(411),gs=n.n(fs),ms=n(587),bs=n.n(ms);function As(){}function _s(e){return null==e?As:function(){return this.querySelector(e)}}function vs(){return[]}function ys(e){return null==e?vs:function(){return this.querySelectorAll(e)}}function ws(e){return function(){return this.matches(e)}}function xs(e){return new Array(e.length)}function Cs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Es(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new Cs(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Bs(e,t,n,r,i,o,s){var a,l,c,u={},h=t.length,d=o.length,p=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(p[a]=c="$"+s.call(l,l.__data__,a,t),c in u?i[a]=l:u[c]=l);for(a=0;a<d;++a)(l=u[c="$"+s.call(e,o[a],a,o)])?(r[a]=l,l.__data__=o[a],u[c]=null):n[a]=new Cs(e,o[a]);for(a=0;a<h;++a)(l=t[a])&&u[p[a]]===l&&(i[a]=l)}function ks(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Cs.prototype={constructor:Cs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Ss="http://www.w3.org/1999/xhtml";const zs={svg:"http://www.w3.org/2000/svg",xhtml:Ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ms(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),zs.hasOwnProperty(t)?{space:zs[t],local:e}:e}function Ns(e){return function(){this.removeAttribute(e)}}function Os(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ts(e,t){return function(){this.setAttribute(e,t)}}function Ds(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Is(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function js(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ps(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Fs(e){return function(){this.style.removeProperty(e)}}function Ls(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Us(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Rs(e,t){return e.style.getPropertyValue(t)||Ps(e).getComputedStyle(e,null).getPropertyValue(t)}function Ws(e){return function(){delete this[e]}}function Vs(e,t){return function(){this[e]=t}}function Ys(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Hs(e){return e.trim().split(/^|\s+/)}function qs(e){return e.classList||new Gs(e)}function Gs(e){this._node=e,this._names=Hs(e.getAttribute("class")||"")}function Qs(e,t){for(var n=qs(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Xs(e,t){for(var n=qs(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Ks(e){return function(){Qs(this,e)}}function Zs(e){return function(){Xs(this,e)}}function Js(e,t){return function(){(t.apply(this,arguments)?Qs:Xs)(this,e)}}function $s(){this.textContent=""}function ea(e){return function(){this.textContent=e}}function ta(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function na(){this.innerHTML=""}function ra(e){return function(){this.innerHTML=e}}function ia(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function oa(){this.nextSibling&&this.parentNode.appendChild(this)}function sa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ss&&t.documentElement.namespaceURI===Ss?t.createElement(e):t.createElementNS(n,e)}}function la(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ca(e){var t=Ms(e);return(t.local?la:aa)(t)}function ua(){return null}function ha(){var e=this.parentNode;e&&e.removeChild(this)}function da(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pa(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}Gs.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var fa={},ga=null;function ma(e,t,n){return e=ba(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ba(e,t,n){return function(r){var i=ga;ga=r;try{e.call(this,this.__data__,t,n)}finally{ga=i}}}function Aa(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function _a(e,t,n){var r=fa.hasOwnProperty(e.type)?ma:ba;return function(i,o,s){var a,l=this.__on,c=r(t,o,s);if(l)for(var u=0,h=l.length;u<h;++u)if((a=l[u]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=n),void(a.value=t);this.addEventListener(e.type,c,n),a={type:e.type,name:e.name,value:t,listener:c,capture:n},l?l.push(a):this.__on=[a]}}function va(e,t,n,r){var i=ga;e.sourceEvent=ga,ga=e;try{return t.apply(n,r)}finally{ga=i}}function ya(e,t,n){var r=Ps(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function wa(e,t){return function(){return ya(this,e,t)}}function xa(e,t){return function(){return ya(this,e,t.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(fa={mouseenter:"mouseover",mouseleave:"mouseout"}));var Ca=[null];function Ea(e,t){this._groups=e,this._parents=t}function Ba(){return new Ea([[document.documentElement]],Ca)}Ea.prototype=Ba.prototype={constructor:Ea,select:function(e){"function"!=typeof e&&(e=_s(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new Ea(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=ys(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new Ea(r,i)},filter:function(e){"function"!=typeof e&&(e=ws(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new Ea(r,this._parents)},data:function(e,t){if(!e)return f=new Array(this.size()),u=-1,this.each((function(e){f[++u]=e})),f;var n,r=t?Bs:Es,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var h=i[u],d=o[u],p=d.length,f=e.call(h,h&&h.__data__,u,i),g=f.length,m=l[u]=new Array(g),b=a[u]=new Array(g);r(h,d,m,b,c[u]=new Array(p),f,t);for(var A,_,v=0,y=0;v<g;++v)if(A=m[v]){for(v>=y&&(y=v+1);!(_=b[y])&&++y<g;);A._next=_||null}}return(a=new Ea(a,i))._enter=l,a._exit=c,a},enter:function(){return new Ea(this._enter||this._groups.map(xs),this._parents)},exit:function(){return new Ea(this._exit||this._groups.map(xs),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],h=c.length,d=s[a]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;a<r;++a)s[a]=t[a];return new Ea(s,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ks);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new Ea(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=Ms(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Os:Ns:"function"==typeof t?n.local?js:Is:n.local?Ds:Ts)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Fs:"function"==typeof t?Us:Ls)(e,t,null==n?"":n)):Rs(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Ws:"function"==typeof t?Ys:Vs)(e,t)):this.node()[e]},classed:function(e,t){var n=Hs(e+"");if(arguments.length<2){for(var r=qs(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Js:t?Ks:Zs)(n,t))},text:function(e){return arguments.length?this.each(null==e?$s:("function"==typeof e?ta:ea)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?na:("function"==typeof e?ia:ra)(e)):this.node().innerHTML},raise:function(){return this.each(oa)},lower:function(){return this.each(sa)},append:function(e){var t="function"==typeof e?e:ca(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:ca(e),r=null==t?ua:"function"==typeof t?t:_s(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ha)},clone:function(e){return this.select(e?pa:da)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?_a:Aa,null==n&&(n=!1),r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?xa:wa)(e,t))}};const ka=Ba;function Sa(e){return"string"==typeof e?new Ea([[document.querySelector(e)]],[document.documentElement]):new Ea([[e]],Ca)}var za="$";function Ma(){}function Na(e,t){var n=new Ma;if(e instanceof Ma)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var s in e)n.set(s,e[s]);return n}Ma.prototype=Na.prototype={constructor:Ma,has:function(e){return za+e in this},get:function(e){return this[za+e]},set:function(e,t){return this[za+e]=t,this},remove:function(e){var t=za+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===za&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===za&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===za&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===za&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===za&&++e;return e},empty:function(){for(var e in this)if(e[0]===za)return!1;return!0},each:function(e){for(var t in this)t[0]===za&&e(this[t],t.slice(1),this)}};const Oa=Na;function Ta(){}var Da=Oa.prototype;Ta.prototype=function(e,t){var n=new Ta;if(e instanceof Ta)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}.prototype={constructor:Ta,has:Da.has,add:function(e){return this[za+(e+="")]=e,this},remove:Da.remove,clear:Da.clear,values:Da.keys,size:Da.size,empty:Da.empty,each:Da.each};var Ia={value:function(){}};function ja(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new Pa(r)}function Pa(e){this._=e}function Fa(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function La(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ia,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Pa.prototype=ja.prototype={constructor:Pa,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=o[s]).type)i[n]=La(i[n],e.name,t);else if(null==t)for(n in i)i[n]=La(i[n],e.name,null);return this}for(;++s<a;)if((n=(e=o[s]).type)&&(n=Fa(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Pa(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Ua=ja;function Ra(e,t){var n,r,i,o,s=Ua("beforesend","progress","load","error"),a=Oa(),l=new XMLHttpRequest,c=null,u=null,h=0;function d(e){var t,r=l.status;if(!r&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||r>=200&&r<300||304===r){if(i)try{t=i.call(n,l)}catch(e){return void s.call("error",n,e)}else t=l;s.call("load",n,t)}else s.call("error",n,e)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=d:l.onreadystatechange=function(e){l.readyState>3&&d(e)},l.onprogress=function(e){s.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?a.get(e):(null==t?a.remove(e):a.set(e,t+""),n)},mimeType:function(e){return arguments.length?(r=null==e?null:e+"",n):r},responseType:function(e){return arguments.length?(o=e,n):o},timeout:function(e){return arguments.length?(h=+e,n):h},user:function(e){return arguments.length<1?c:(c=null==e?null:e+"",n)},password:function(e){return arguments.length<1?u:(u=null==e?null:e+"",n)},response:function(e){return i=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,i,d){return l.open(t,e,!0,c,u),null==r||a.has("accept")||a.set("accept",r+",*/*"),l.setRequestHeader&&a.each((function(e,t){l.setRequestHeader(t,e)})),null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=o&&(l.responseType=o),h>0&&(l.timeout=h),null==d&&"function"==typeof i&&(d=i,i=null),null!=d&&1===d.length&&(d=function(e){return function(t,n){e(null==t?n:null)}}(d)),null!=d&&n.on("error",d).on("load",(function(e){d(null,e)})),s.call("beforesend",n,l),l.send(null==i?null:i),n},abort:function(){return l.abort(),n},on:function(){var e=s.on.apply(s,arguments);return e===s?n:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return n.get(t)}return n}function Wa(e,t){return function(n,r){var i=Ra(n).mimeType(e).response(t);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}Wa("text/html",(function(e){return document.createRange().createContextualFragment(e.responseText)}));const Va=Wa("application/json",(function(e){return JSON.parse(e.responseText)})),Ya=Wa("text/plain",(function(e){return e.responseText}));Wa("application/xml",(function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}));var Ha={},qa={};function Ga(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Qa(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Xa(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Ka(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,s=0,a=0,l=o<=0,c=!1;function u(){if(l)return qa;if(c)return c=!1,Ha;var t,r,i=s;if(34===e.charCodeAt(i)){for(;s++<o&&34!==e.charCodeAt(s)||34===e.charCodeAt(++s););return(t=s)>=o?l=!0:10===(r=e.charCodeAt(s++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(s)&&++s),e.slice(i+1,t-1).replace(/""/g,'"')}for(;s<o;){if(10===(r=e.charCodeAt(t=s++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(s)&&++s;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=u())!==qa;){for(var h=[];r!==Ha&&r!==qa;)h.push(r),r=u();t&&null==(h=t(h,a++))||i.push(h)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return s(t[e])})).join(e)}))}function o(t){return t.map(s).join(e)}function s(e){return null==e?"":e instanceof Date?function(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Xa(-t,6):t>9999?"+"+Xa(t,6):Xa(t,4))+"-"+Xa(e.getUTCMonth()+1,2)+"-"+Xa(e.getUTCDate(),2)+(o?"T"+Xa(n,2)+":"+Xa(r,2)+":"+Xa(i,2)+"."+Xa(o,3)+"Z":i?"T"+Xa(n,2)+":"+Xa(r,2)+":"+Xa(i,2)+"Z":r||n?"T"+Xa(n,2)+":"+Xa(r,2)+"Z":"")}(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Ga(e);return function(r,i){return t(n(r),i,e)}}(e,t):Ga(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=Qa(t)),[n.map(s).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Qa(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:s}}var Za=Ka(","),Ja=Za.parse,$a=Za.parseRows;function el(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=Ra(n).mimeType(e);return o.row=function(e){return arguments.length?o.response(function(e,t){return function(n){return e(n.responseText,t)}}(t,r=e)):r},o.row(r),i?o.get(i):o}}Za.format,Za.formatBody,Za.formatRows,Za.formatRow,Za.formatValue,el("text/csv",Ja);var tl=Ka("\t"),nl=tl.parse;tl.parseRows,tl.format,tl.formatBody,tl.formatRows,tl.formatRow,tl.formatValue,el("text/tab-separated-values",nl);try{window.saveAs||(window.saveAs=n(936).saveAs)}catch(e){console.warn("Not a browser, so FileSaver.js not available.")}function rl(){try{new Blob}catch(e){alert("Blob not supported")}}function il(e,t,n){if(void 0===e||null==e)return t;const r={};for(const i in t){const o=i in e&&null!==e[i]&&void 0!==e[i];let s=o?e[i]:t[i];n&&i in n&&(s=parseFloat(s),isNaN(s)&&(o?(console.warn("Bad float for option "+i),s=parseFloat(t[i]),isNaN(s)&&(console.warn("Bad float for default "+i),s=null)):(console.warn("Bad float for default "+i),s=null))),r[i]=s}return r}function ol(e){const t=e.node();for(;null==t?void 0:t.hasChildNodes();)t.removeChild(t.lastChild)}function sl(e,t){let n="";return e&&Ya(e,(function(e,r){e&&console.warn(e),n=r,t(n)})),!1}function al(e,t){return-1!==e.indexOf(t,e.length-t.length)}function ll(e,t,n,r){if(r)return t&&console.warn("File "+t+" overridden by value."),void n.call(e,null,r);t?al(t,"json")?Va(t,(function(t,r){n.call(e,t,r)})):al(t,"css")?Ya(t,(function(t,r){n.call(e,t,r)})):n.call(e,"Unrecognized file type",null):n.call(e,"No filename",null)}function cl(e,t,n){0===t.length&&n.call(e,null,null);let r=-1,i=t.length;for(;++r<t.length;)ll(e,t[r].file,function(t,r){this.call(e,t,r),--i||n.call(e,null,null)}.bind(t[r].callback),t[r].value)}function ul(){let e;const t=function(n){if(!(this instanceof t)){e=!0;const n=new t(arguments);return e=!1,n}"function"==typeof this.init&&this.init.apply(this,...e?n:arguments)};return t}function hl(e){return new Proxy(e,{apply:(e,t,n)=>new e(...n)})}function dl(e,t){e.select("defs").remove();const n=e.append("defs"),r=n.node();return r.parentNode.insertBefore(r,r.parentNode.firstChild),n.append("style").attr("type","text/css").text(t),n}function pl(e,t,n,r,i,o,s,a){const l={};for(const e in r)void 0===r[e]?console.warn("Undefined value for id "+e+" in object. Ignoring."):l[e]=r[e];const c=e.select(t).selectAll(n).data(ml(l,i),(function(e){return e[i]})),u=o?o(c.enter()).merge(c):c;s&&u.call(s),a&&c.exit().call(a)}function fl(e,t,n,r,i,o,s){const a=e.selectAll(t).data((function(e){return ml(e[n],r)}),(function(e){return e[r]})),l=i?i(a.enter()).merge(a):a;o&&l.call(o),s&&a.exit().call(s)}function gl(e,t){const n=[];for(const r in e){const i=_l(e[r]);i[t]=r,n.push(i)}return n}function ml(e,t){const n=[];for(const r in e){const i=e[r];i[t]=r,n.push(i)}return n}function bl(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!=t[n])return!1;return!0}function Al(e){const t={};for(let n=0,r=e.length;n<r;n++){const i=e[n],o=Object.keys(i);for(let e=0,s=o.length;e<s;e++){const s=o[e];if(s in t)t[s][n]=i[s];else{const e=[];for(let t=0;t<r;t++)e[t]=null;e[n]=i[s],t[s]=e}}}return t}function _l(e){return Hn.isArray(e)?Hn.map(e,(function(e){return _l(e)})):Hn.isObject(e)?Hn.mapObject(e,(function(e,t){return _l(e)})):e}function vl(e,t,n=!1){void 0===n&&(n=!1);for(const r in t){if(r in e&&!n)throw new Error("Attribute "+r+" already in object.");e[r]=t[r]}}function yl(e){const t=[];return e.forEach((e=>{e.forEach((e=>{t.indexOf(e)<0&&t.push(e)}))})),t}function wl(e){const t=[];for(let n=0,r=e.length;n<r;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function xl(e,t,n){let r;return function(){const i=this,o=arguments,s=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,o)}),t),s&&e.apply(i,o)}}function Cl(e,t){const n={};let r=-1;for(;++r<t.length;)n[t[r]]=_l(e[t[r]]);return t.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset"),n}function El(e,t){const n={};let r=-1;for(;++r<t.length;)n[t[r]]=e[t[r]];return t.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset"),n}function Bl(e,t){return null==e||null==t||void 0===e||void 0===t?null:{x:e.x+t.x,y:e.y+t.y}}function kl(e,t){return null==e||null==t||void 0===e||void 0===t?null:{x:e.x-t.x,y:e.y-t.y}}function Sl(e,t){return{x:e.x*t,y:e.y*t}}function zl(e,t){var n;rl();const r=JSON.stringify(e),i=new Blob([r],{type:"application/json"});null===(n=window.saveAs)||void 0===n||n.call(window,i,t+".json")}function Ml(e,t,n,r){window.File&&window.FileReader&&window.FileList&&window.Blob||t("The File APIs are not fully supported in this browser.",null);const i=new window.FileReader;if(i.onload=function(e){const n=e.target.result;let r;try{r=JSON.parse(n)}catch(e){return void t(e,null)}t(null,r)},null!=n)try{n()}catch(e){console.warn(e)}i.onabort=function(e){try{r()}catch(e){console.warn(e)}},i.onerror=function(e){try{r()}catch(e){console.warn(e)}},i.readAsText(new Blob([e]))}function Nl(e,t,n,r,i,o){const s=function(e){const r=e.target.result;let i,o;try{i=JSON.parse(r)}catch(e){o="JSON error: "+e;try{i=t($a(r))}catch(e){return void n(o+"\nCSV error: "+e,null)}}n(null,i)};if(null!=o)return console.warn("Debugging load_json_or_csv"),s(o);window.File&&window.FileReader&&window.FileList&&window.Blob||n("The File APIs are not fully supported in this browser.",null);const a=new window.FileReader;if(null!=r)try{r()}catch(e){console.warn(e)}a.onabort=function(e){try{i()}catch(e){console.warn(e)}},a.onerror=function(e){try{i()}catch(e){console.warn(e)}},a.onload=s,a.readAsText(new Blob([e]))}function Ol(e,t,n){var r;rl();let i=(new XMLSerializer).serializeToString(t.node());n&&(i=bs().xml(i)),i='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+i;const o=new Blob([i],{type:"image/svg+xml"});null===(r=window.saveAs)||void 0===r||r.call(window,o,e+".svg")}function Tl(e,t){rl();let n=(new XMLSerializer).serializeToString(t.node());n='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+n;const r=document.createElement("canvas"),i=r.getContext("2d"),o=t.node().getBBox(),s=o.width+o.x,a=o.height+o.y;s<1e4&&a<1e4?(r.width=s,r.height=a):r.width>r.height?(r.width=1e4,r.height=a/s*1e4):(r.width=s/a*1e4,r.height=1e4);const l=new Image;l.src="data:image/svg+xml;base64,"+btoa(n),l.onload=function(){i.fillStyle="#FFF",i.fillRect(0,0,r.width,r.height),i.drawImage(l,0,0,r.width,r.height),r.toBlob((function(t){var n;t&&(null===(n=window.saveAs)||void 0===n||n.call(window,t,e+".png"))}))}}function Dl(e,t,n){return e.map((function(e){return Il(e,t,n)}))}function Il(e,t,n){return{x:Math.cos(-t)*(e.x-n.x)+Math.sin(-t)*(e.y-n.y)+n.x-e.x,y:-Math.sin(-t)*(e.x-n.x)+Math.cos(-t)*(e.y-n.y)+n.y-e.y}}function jl(e){const t=e[1].x-e[0].x,n=e[1].y-e[0].y;return 0===t&&n>=0?Math.PI/2:0===t&&n<0?3*Math.PI/2:t>=0&&n>=0?Math.atan(n/t):t>=0?Math.atan(n/t)+2*Math.PI:Math.atan(n/t)+Math.PI}function Pl(e){return 180*e/Math.PI}function Fl(e){return e<-Math.PI?e+2*Math.floor((e-Math.PI)/(-2*Math.PI))*Math.PI:e>Math.PI?e-2*Math.floor((e+Math.PI)/(2*Math.PI))*Math.PI:e}function Ll(e){return Math.PI/180*e}function Ul(e){return Fl(Ll(e))}function Rl(e,t,n){const r=Math.atan2(t.x-n.x,n.y-t.y);return Math.atan2(t.x-n.x+e.x,n.y-t.y-e.y)-r}function Wl(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function Vl(e,t){t.forEach((function(n,r){void 0===e[r]&&console.error(`Argument is undefined: ${t[r]}`)}))}function Yl(e,t){return`${e}_${t}`}function Hl(e){const t=/(.*)_([a-z0-9]{1,2})$/.exec(e);return null!==t?t.slice(1,3):[e,null]}function ql(e){return e.reduce((function(e,t){return e+t}))/e.length}function Gl(e){e.sort((function(e,t){return e-t}));const t=Math.floor(e.length/2);return e.length%2==1?e[t]:(e[t-1]+e[t])/2}function Ql(e){e.sort((function(e,t){return e-t}));const t=Math.floor(e.length/2);return 1===e.length?[e[0],e[0],e[0]]:e.length%2==1?[Gl(e.slice(0,t)),e[t],Gl(e.slice(t+1))]:[Gl(e.slice(0,t)),(e[t-1]+e[t])/2,Gl(e.slice(t))]}function Xl(e){let t="";for(let n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}function Kl(){return Xl(12)}function Zl(e,t){for(e instanceof Element||(e=e.node());null!=e.parentNode;)if(null!=(e=e.parentNode).tagName&&e.tagName.toLowerCase()===t.toLowerCase())return!0;return!1}function Jl(e,t){return null!=t&&(e=[t=t.replace(/^\/|\/$/g,""),e].join("/")),e.replace(/^\/|\/$/g,"")+".json"}function $l(e){return e.ownerDocument}function ec(e){return $l(e).defaultView}function tc(e){if(-1!==e.indexOf("skew")||-1!==e.indexOf("matrix"))throw new Error("d3_transform_catch does not work with skew or matrix");const t=/translate\s*\(\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*\)/.exec(e),n=Hn.isNull(t),r=n?0:Number(t[1]),i=n?0:Number(t[2]),o=/rotate\s*\(\s*([0-9.-]+)\s*\)/.exec(e),s=Hn.isNull(o)?0:Number(o[1]),a=/scale\s*\(\s*([0-9.-]+)\s*\)/.exec(e);return{translate:[r,i],rotate:s,scale:Hn.isNull(a)?0:Number(a[1])}}class nc{constructor(e,t,n={x:0,y:0},r=!0){this.div=e,this.map=t,this.displacement=n,this.shouldReposition=r,this.visible=!0,this.hide()}is_visible(){return this.visible}place(e){this.div.style("display",null);const t=this.map.zoomContainer.windowTranslate,n=this.map.zoomContainer.windowScale,r=this.map.get_size();if(this.shouldReposition){const i=Math.max(20,Math.min(r.width-270,n*e.x+t.x-this.displacement.x)),o=Math.max(20,Math.min(r.height-40,n*e.y+t.y-this.displacement.y));this.div.style("position","absolute").style("display","block").style("left",`${i}px`).style("top",`${o}px`)}else this.div.style("position","absolute").style("display","block").style("left",n*e.x+t.x-this.displacement.x+"px").style("top",n*e.y+t.y-this.displacement.y+"px");this.visible=!0}hide(){this.visible&&(this.div.style("display","none"),this.visible=!1)}}function rc(e,t){const n=$l(e),r=ec(e);(t=t||{}).fontSize=t.fontSize||"13px",t.fontFamily=t.fontFamily||"sans-serif",t.promptInnerHTML=t.promptInnerHTML||"",t.color=t.color||"#333",t.hintColor=t.hintColor||"#aaa",t.backgroundColor=t.backgroundColor||"#fff",t.dropDownBorderColor=t.dropDownBorderColor||"#aaa",t.dropDownZIndex=t.dropDownZIndex||"100",t.dropDownOnHoverBackgroundColor=t.dropDownOnHoverBackgroundColor||"#ddd";const i=n.createElement("input");i.type="text",i.spellcheck=!1,i.style.fontSize=t.fontSize,i.style.fontFamily=t.fontFamily,i.style.color=t.color,i.style.backgroundColor=t.backgroundColor,i.style.width="100%",i.style.outline="0",i.style.border="0",i.style.margin="0",i.style.padding="0";const o=i.cloneNode();o.disabled="",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.borderColor="transparent",o.style.boxShadow="none",o.style.color=t.hintColor,i.style.backgroundColor="transparent",i.style.verticalAlign="top",i.style.position="relative";const s=n.createElement("div");s.style.position="relative",s.style.outline="0",s.style.border="0",s.style.margin="0",s.style.padding="0";const a=n.createElement("div");if(a.style.position="absolute",a.style.outline="0",a.style.margin="0",a.style.padding="0",a.style.border="0",a.style.fontSize=t.fontSize,a.style.fontFamily=t.fontFamily,a.style.color=t.color,a.style.backgroundColor=t.backgroundColor,a.style.top="0",a.style.left="0",a.style.overflow="hidden",a.innerHTML=t.promptInnerHTML,a.style.background="transparent",void 0===n.body)throw new Error("thisDocument.body is undefined. The library was wired up incorrectly.");n.body.appendChild(a);const l=a.getBoundingClientRect().right;s.appendChild(a),a.style.visibility="visible",a.style.left="-"+l+"px",s.style.marginLeft=l+"px",s.appendChild(o),s.appendChild(i);const c=n.createElement("div");c.style.position="absolute",c.style.visibility="hidden",c.style.outline="0",c.style.margin="0",c.style.padding="0",c.style.textAlign="left",c.style.fontSize=t.fontSize,c.style.fontFamily=t.fontFamily,c.style.backgroundColor=t.backgroundColor,c.style.zIndex=t.dropDownZIndex,c.style.cursor="default",c.style.borderStyle="solid",c.style.borderWidth="1px",c.style.borderColor=t.dropDownBorderColor,c.style.overflowX="hidden",c.style.whiteSpace="pre",c.style.overflowY="scroll";const u=function(e){let i=[],o=0,s=-1,a=null;const l=function(){this.style.outline="1px solid #ddd"},c=function(){this.style.outline="0"},u=function(e){e.preventDefault(),h.onmouseselection(this.id)},h={hide:function(){e.style.visibility="hidden"},refresh:function(s,a){e.style.visibility="hidden",o=0,e.innerHTML="";const d=r.innerHeight||n.documentElement.clientHeight,f=e.parentNode.getBoundingClientRect(),g=f.top-6,m=d-f.bottom-6;i=[];for(let r=0;r<a.length;r++){const o=a[r].matches.filter((function(e){return 0==e.toLowerCase().indexOf(s.toLowerCase())}));if(0==o.length)continue;const h=n.createElement("div");if(h.style.color=t.color,h.onmouseover=l,h.onmouseout=c,h.onmousedown=function(e){e.preventDefault()},h.ondblclick=u,h.__hint=o[0],h.id=a[r].id,h.innerHTML=a[r].html,i.push(h),e.appendChild(h),i.length>=p.display_limit){const t=n.createElement("div");t.innerHTML=" "+(a.length-i.length)+" more",i.push(t),e.appendChild(t);break}}0!==i.length&&(h.highlight(0),g>3*m?(e.style.maxHeight=g+"px",e.style.top="",e.style.bottom="100%"):(e.style.top="100%",e.style.bottom="",e.style.maxHeight=m+"px"),e.style.visibility="visible")},highlight:function(e){-1!=s&&i[s]&&(i[s].style.backgroundColor=t.backgroundColor),i[e].style.backgroundColor=t.dropDownOnHoverBackgroundColor,s=e,a=i[e]},move:function(t){return"hidden"===e.style.visibility?"":(o+t===-1||o+t===i.length||(o+=t,h.highlight(o)),i[o].__hint)},onmouseselection:function(){},get_current_row:function(){return a}};return h}(c);let h,d;u.onmouseselection=function(e){p.onEnter(e),p.input.focus()},s.appendChild(c),e.appendChild(s);const p={get_hint:function(e){return e},display_limit:1e3,onArrowDown:function(){},onArrowUp:function(){},onEnter:function(e){},onTab:function(){},onChange:function(e){p.repaint()},startFrom:0,options:[],wrapper:s,input:i,hint:o,dropDown:c,prompt:a,setText:function(e){o.value=e,i.value=e},getText:function(){return i.value},hideDropDown:function(){u.hide()},repaint:function(){const e=i.value,r=p.startFrom,s=p.options,a=s.length,l=e.substring(r);d=e.substring(0,r),o.value="";for(let e=0;e<a;e++){const t=s[e].matches.filter((function(e){return 0==e.toLowerCase().indexOf(l.toLowerCase())}));if(0!=t.length){o.value=p.get_hint(t[0]);break}}c.style.left=function(e){return void 0===h&&(h=n.createElement("span"),h.style.visibility="hidden",h.style.position="fixed",h.style.outline="0",h.style.margin="0",h.style.padding="0",h.style.border="0",h.style.left="0",h.style.whiteSpace="pre",h.style.fontSize=t.fontSize,h.style.fontFamily=t.fontFamily,h.style.fontWeight="normal",n.body.appendChild(h)),h.innerHTML=String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),h.getBoundingClientRect().right}(d)+"px",u.refresh(l,p.options)}};let f;return function(e){f=e.value;const t=function(){const t=e.value;var n;f!==t&&(f=t,n=t,p.onChange(n),p.repaint())};e.addEventListener("input",t,!1),e.addEventListener("keyup",t,!1),e.addEventListener("change",t,!1)}(i),i.addEventListener("keydown",(function(e){var t,n;const s=(e=e||r.event).keyCode;if(33!=s&&34!=s)if(39!=s&&35!=s&&9!=s)if(13!=s){if(40==s){const e=u.move(1);return""==e&&p.onArrowDown(),void(o.value=p.get_hint(e))}if(38==s){const t=u.move(-1);return""==t&&p.onArrowUp(),o.value=p.get_hint(t),e.preventDefault(),void e.stopPropagation()}o.value=""}else{const e=u.get_current_row().id;p.onEnter(e)}else if(9==s&&(e.preventDefault(),e.stopPropagation(),0==(null===(t=o.value)||void 0===t?void 0:t.length)&&p.onTab()),(null===(n=o.value)||void 0===n?void 0:n.length)>0){i.value=o.value;const e=f!=i.value;f=i.value,e&&p.onChange(i.value)}}),!1),p}function ic(){for(var e,t=ga;e=t.sourceEvent;)t=e;return t}function oc(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function sc(e){var t=ic();return t.changedTouches&&(t=t.changedTouches[0]),oc(e,t)}function ac(e,t,n){arguments.length<3&&(n=t,t=ic().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return oc(e,r);return null}function lc(){ga.stopImmediatePropagation()}function cc(){ga.preventDefault(),ga.stopImmediatePropagation()}function uc(e){var t=e.document.documentElement,n=Sa(e).on("dragstart.drag",cc,!0);"onselectstart"in t?n.on("selectstart.drag",cc,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function hc(e,t){var n=e.document.documentElement,r=Sa(e).on("dragstart.drag",null);t&&(r.on("click.drag",cc,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function dc(e){return function(){return e}}function pc(e,t,n,r,i,o,s,a,l,c){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=s,this.dx=a,this.dy=l,this._=c}function fc(){return!ga.ctrlKey&&!ga.button}function gc(){return this.parentNode}function mc(e){return null==e?{x:ga.x,y:ga.y}:e}function bc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ac(){var e,t,n,r,i=fc,o=gc,s=mc,a=bc,l={},c=Ua("start","drag","end"),u=0,h=0;function d(e){e.on("mousedown.drag",p).filter(a).on("touchstart.drag",m).on("touchmove.drag",b).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!r&&i.apply(this,arguments)){var s=_("mouse",o.apply(this,arguments),sc,this,arguments);s&&(Sa(ga.view).on("mousemove.drag",f,!0).on("mouseup.drag",g,!0),uc(ga.view),lc(),n=!1,e=ga.clientX,t=ga.clientY,s("start"))}}function f(){if(cc(),!n){var r=ga.clientX-e,i=ga.clientY-t;n=r*r+i*i>h}l.mouse("drag")}function g(){Sa(ga.view).on("mousemove.drag mouseup.drag",null),hc(ga.view,n),cc(),l.mouse("end")}function m(){if(i.apply(this,arguments)){var e,t,n=ga.changedTouches,r=o.apply(this,arguments),s=n.length;for(e=0;e<s;++e)(t=_(n[e].identifier,r,ac,this,arguments))&&(lc(),t("start"))}}function b(){var e,t,n=ga.changedTouches,r=n.length;for(e=0;e<r;++e)(t=l[n[e].identifier])&&(cc(),t("drag"))}function A(){var e,t,n=ga.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<i;++e)(t=l[n[e].identifier])&&(lc(),t("end"))}function _(e,t,n,r,i){var o,a,h,p=n(t,e),f=c.copy();if(va(new pc(d,"beforestart",o,e,u,p[0],p[1],0,0,f),(function(){return null!=(ga.subject=o=s.apply(r,i))&&(a=o.x-p[0]||0,h=o.y-p[1]||0,!0)})))return function s(c){var g,m=p;switch(c){case"start":l[e]=s,g=u++;break;case"end":delete l[e],--u;case"drag":p=n(t,e),g=u}va(new pc(d,c,o,e,g,p[0]+a,p[1]+h,p[0]-m[0],p[1]-m[1],f),f.apply,f,[c,r,i])}}return d.filter=function(e){return arguments.length?(i="function"==typeof e?e:dc(!!e),d):i},d.container=function(e){return arguments.length?(o="function"==typeof e?e:dc(e),d):o},d.subject=function(e){return arguments.length?(s="function"==typeof e?e:dc(e),d):s},d.touchable=function(e){return arguments.length?(a="function"==typeof e?e:dc(!!e),d):a},d.on=function(){var e=c.on.apply(c,arguments);return e===c?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}pc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};class _c{constructor(e){this.arrowContainer=e.append("g").attr("id","direction-arrow-container").attr("transform","translate(0,0)rotate(0)"),this.arrow=this.arrowContainer.append("path").classed("direction-arrow",!0).attr("d","M0 -5 L0 5 L20 5 L20 10 L30 0 L20 -10 L20 -5 Z").style("visibility","hidden").attr("transform","translate(30,0)scale(2.5)"),this.sel=e,this.center={x:0,y:0},this._setupDrag(),this.dragging=!1,this.isVisible=!1,this.show()}setLocation(e){this.center=e;const t=tc(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+e.x+","+e.y+")rotate("+t.rotate+")")}setRotation(e){const t=tc(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+t.translate+")rotate("+e+")")}displaceRotation(e){const t=tc(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+t.translate+")rotate("+(t.rotate+e)+")")}getRotation(){return tc(this.arrowContainer.attr("transform")).rotate}toggle(e){this.isVisible=void 0===e?!this.isVisible:e,this.arrow.style("visibility",this.isVisible?"visible":"hidden")}show(){this.toggle(!0)}hide(){this.toggle(!1)}right(){this.setRotation(0)}down(){this.setRotation(90)}left(){this.setRotation(180)}up(){this.setRotation(270)}_setupDrag(){const e=Ac().on("start",(e=>{ga.sourceEvent.stopPropagation(),this.dragging=!0})).on("drag",(e=>{const t=Rl({x:ga.dx,y:ga.dy},{x:sc(this.sel.node())[0],y:sc(this.sel.node())[1]},this.center);this.displaceRotation(Pl(t))})).on("end",(e=>{setTimeout((()=>{this.dragging=!1}),200)}));this.arrowContainer.call(e)}}function vc(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function yc(e){return(e=vc(Math.abs(e)))?e[1]:NaN}var wc,xc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cc(e){if(!(t=xc.exec(e)))throw new Error("invalid format: "+e);var t;return new Ec({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Ec(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Bc(e,t){var n=vc(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Cc.prototype=Ec.prototype,Ec.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const kc={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Bc(100*e,t)},r:Bc,s:function(e,t){var n=vc(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(wc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+vc(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Sc(e){return e}var zc,Mc,Nc,Oc=Array.prototype.map,Tc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];zc=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Sc:(t=Oc.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(e.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?Sc:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Oc.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Cc(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,f=e.width,g=e.comma,m=e.precision,b=e.trim,A=e.type;"n"===A?(g=!0,A="g"):kc[A]||(void 0===m&&(m=12),b=!0,A="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",v="$"===d?o:/[%p]/.test(A)?l:"",y=kc[A],w=/[defgprs%]/.test(A);function x(e){var i,o,l,d=_,x=v;if("c"===A)x=y(e)+x,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:y(Math.abs(e),m),b&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==h&&(C=!1),d=(C?"("===h?h:c:"-"===h||"("===h?"":h)+d,x=("s"===A?Tc[8+wc/3]:"")+x+(C&&"("===h?")":""),w)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){x=(46===l?s+e.slice(i+1):e.slice(i))+x,e=e.slice(0,i);break}}g&&!p&&(e=r(e,1/0));var E=d.length+e.length+x.length,B=E<f?new Array(f-E+1).join(t):"";switch(g&&p&&(e=r(B+e,B.length?f-x.length:1/0),B=""),n){case"<":e=d+e+x+B;break;case"=":e=d+B+e+x;break;case"^":e=B.slice(0,E=B.length>>1)+d+e+x+B.slice(E);break;default:e=B+d+e+x}return a(e)}return m=void 0===m?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),x.toString=function(){return e+""},x}return{format:h,formatPrefix:function(e,t){var n=h(((e=Cc(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(yc(t)/3))),i=Math.pow(10,-r),o=Tc[8+r/3];return function(e){return n(i*e)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Mc=zc.format,Nc=zc.formatPrefix;const Dc=e=>e,Ic=/([.*+?^=!:${}()|[\]/\\])/g,jc=/\n\s*\n/g,Pc=/\n\s*(\)*)\s*$/,Fc=/([() ])(?:and|or)([)( ])/gi,Lc=/[()]/g,Uc=/\(\s*(\S+)\s*\)/g,Rc=/\s+or\s+/i,Wc=/\s+and\s+/i,Vc=/(^|\()(\s*-?[0-9.]+\s+(?:or\s+-?[0-9.]+\s*)+)(\)|$)/gi,Yc=/(^|\(|or\s)(\s*-?[0-9.]+\s+(?:and\s+-?[0-9.]+\s*)+)(\sor|\)|$)/gi;function Hc(e){const t=Number(e);return null==e||isNaN(t)||parseFloat("string"==typeof e?e:String(e))!==t?null:t}function qc(e){return null!=e&&isFinite(e)?e:null}function Gc(e,t,n){if(!e)return null;if(-1===["reaction_data","metabolite_data","gene_data"].indexOf(t))throw new Error("Invalid name argument: "+t);if(e instanceof Array||(e=[e]),null!=e&&1!==e.length&&2!==e.length&&console.warn("Bad data style: "+t),e=Al(e),"gene_data"===t){if(void 0===n)throw new Error("Must pass all_reactions argument for gene_data");e=function(e,t){const n={};let r=[null];for(const t in e){r=e[t].map((()=>null));break}for(const i in t){const o=t[i],s=o.bigg_id,a={};o.genes.forEach((t=>{["bigg_id","name"].forEach((n=>{const i=e[t[n]]||_l(r),o=a[t.bigg_id];if(void 0===o)a[t.bigg_id]=i;else for(let e=0;e<i.length;e++){const t=i[e];null!==t&&(o[e]=t)}}))})),n[s]=a}return n}(e,n)}return e}function Qc(e,t,n){if(null==e)return null;const r=-1!==t.indexOf("abs");if(1===e.length){const t=Hc(e[0]);return null==t?null:function(e,t){return t?Math.abs(e):e}(t,r)}if(2!==e.length)throw new Error("Data array must be of length 1 or 2");{const t=e.map(Hc);if(null==t[0]||null==t[1])return null;if("diff"===n)return function(e,t,n){return n?Math.abs(t-e):t-e}(t[0],t[1],r);if("fold"===n)return qc(function(e,t,n){if(0===e||0===t)return null;const r=t>=e?t/e:-e/t;return n?Math.abs(r):r}(t[0],t[1],r));if("log2_fold"===n)return qc(function(e,t,n){if(0===e)return null;if(t/e<0)return null;const r=Math.log(t/e)/Math.log(2);return n?Math.abs(r):r}(t[0],t[1],r))}throw new Error("Bad data compare_style: "+n)}function Xc(e){return null!=e&&null!=e[0]&&("number"==typeof e[0]&&e[0]<0||"string"==typeof e[0]&&Number(e[0])<0)}function Kc(e,t,n,r,i,o){let s=e;const a=null==t,l={};return n.forEach((function(e){const n=e.bigg_id;if(!(n in l))if(l[n]=!0,a)s=nu(s,n,n+"\n");else{if(!(n in t))return;const e=t[n],i=Qc(e,r,o),a=null==i?Dc:Mc(".3g");if(1===e.length)s=nu(s,n,n+" ("+Zc(e[0],a)+")\n");else if(2===e.length){let t;t=Hn.any(e,(function(e){return null!==Hc(e)}))?n+" ("+Zc(e[0],a)+", "+Zc(e[1],a)+": "+Zc(i,a)+")\n":n+" ("+Zc(e[0],a)+", "+Zc(e[1],a)+")\n",s=nu(s,n,t)}}})),s=s.replace(jc,"\n").replace(Pc,"$1"),s.split("\n").map((function(e){for(let t=0,r=n.length;t<r;t++){const r=n[t];if(-1!==e.indexOf(r.bigg_id))return"name"===i&&(e=nu(e,r.bigg_id,r.name)),{bigg_id:r.bigg_id,name:r.name,text:e}}return{bigg_id:null,name:null,text:e}}))}function Zc(e,t){return null==e?"nd":t(e)}function Jc(e,t){if(null==e)return Zc(null,(()=>""));if(1===e.length){const n=null==t?Dc:Mc(".3g");return Zc(e[0],n)}if(2===e.length){const n=null==t?Dc:Mc(".3g");let r=Zc(e[0],n);return r+=", "+Zc(e[1],n),r+=": "+Zc(t,n),r}return""}function $c(e){const t=e[0].length,n=[];if(t<2||t>3)throw new Error("CSV file must have 2 or 3 columns");for(let e=1;e<t;e++)n[e-1]={};return e.slice(1).forEach((function(e){for(let t=1,r=e.length;t<r;t++)n[t-1][e[0]]=e[t]})),n}function eu(e){return wl(e.replace(Fc,"$1$2").replace(Lc,"").split(" ").filter((function(e){return""!=e})))}function tu(e,t,n){let r=[null],i=1;for(const e in t){r=t[e].map((function(){return null})),i=r.length;break}if(""==e)return _l(r);const o=[];for(let r=0;r<i;r++){let i=e,s=!0;for(const e in t){let n=Hc(t[e][r]);null==n?n=0:s=!1,i=nu(i,e,String(n))}if(s){o.push(null);continue}for(;;){let e=i;if(e=e.replace(Uc," $1 "),e=e.replace(Vc,(function(e,t,n,r){return t+n.split(Rc).map(parseFloat).reduce((function(e,t){return e+t}))+r})),e=e.replace(Yc,(function(e,t,r,i){const o=r.split(Wc).map(parseFloat);return t+("min"==n?Math.min.apply(null,o):o.reduce((function(e,t){return e+t}))/o.length)+i})),e==i)break;i=e}const a=Number(i);isNaN(a)?(console.warn("Could not evaluate "+e),o.push(null)):o.push(a)}return o}function nu(e,t,n){const r="(^|[\\s\\(\\)])"+function(e){return e.replace(Ic,"\\$1")}(t)+"([\\s\\(\\)]|$)";return e.replace(new RegExp(r,"g"),"$1"+n+"$2")}function ru(e,t,n,r,i){let o,s,a;return Hn.isUndefined(i)&&(i=Object.keys(e)),null==t?(i.map((function(t){for(s in o=e[t],o.data=null,o.data_string="",o.segments)a=o.segments[s],a.data=null;o.gene_string=null})),!1):(i.map((function(i){o=e[i];const l=t[o.bigg_id]||t[o.name]||null,c=Qc(l,n,r),u=Xc(l),h=Jc(l,c);for(s in o.data=c,o.data_string=h,o.reverse_flux=u,o.gene_string=null,o.segments)a=o.segments[s],a.data=o.data,a.reverse_flux=o.reverse_flux})),!0)}function iu(e,t,n,r,i){return Hn.isUndefined(i)&&(i=Object.keys(e)),null==t?(i.map((t=>{e[t].data=null,e[t].data_string=""})),!1):(i.map((i=>{const o=e[i],s=t[o.bigg_id]||t[o.name]||null,a=Qc(s,n,r),l=Jc(s,a);o.data=a,o.data_string=l})),!0)}function ou(e,t,n,r,i,o,s){if(Hn.isUndefined(s)&&(s=Object.keys(e)),null==t)return s.map((function(t){const n=e[t];n.data=null,n.data_string="",n.reverse_flux=!1;for(const e in n.segments)n.segments[e].data=null;n.gene_string=null})),!1;let a=[null];for(const e in t){for(const n in t[e]){a=t[e][n].map((function(){return null}));break}break}return s.map((function(s){const l=e[s],c=l.gene_reaction_rule;let u,h;const d=t[l.bigg_id];Hn.isUndefined(d)?(h={},u=_l(a)):(h=d,u=tu(c,h,o));const p=Qc(u,n,i),f=Xc(u),g=Jc(u,p);l.data=p,l.data_string=g,l.reverse_flux=f;for(const e in l.segments){const t=l.segments[e];t.data=l.data,t.reverse_flux=l.reverse_flux}l.gene_string=Kc(c,h,l.genes,n,r,i)})),!0}class su{constructor(){this.reactions={},this.metabolites={}}apply_reaction_data(e,t,n){ru(this.reactions,e,t,n)}apply_metabolite_data(e,t,n){iu(this.metabolites,e,t,n)}apply_gene_data(e,t,n,r,i){ou(this.reactions,e,t,n,r,i)}static from_cobra_json(e){return function(e){if(!e.reactions||!e.metabolites)throw new Error("Bad model data.");const t={};for(let n=0,r=e.genes.length;n<r;n++){const r=e.genes[n],i=r.id;t[i]=r}const n=new su;n.reactions={};for(let r=0,i=e.reactions.length;r<i;r++){const i=e.reactions[r],o=i.id,s=_l(i);if(delete s.id,s.bigg_id=o,s.data_string="",s.genes=[],s.reversibility=s.lower_bound<0&&s.upper_bound>0,s.upper_bound<=0&&s.lower_bound<0)for(const e in s.metabolites)s.metabolites[e]=-s.metabolites[e];delete s.lower_bound,delete s.upper_bound,"gene_reaction_rule"in s&&eu(s.gene_reaction_rule).forEach((function(e){if(e in t){const n=_l(t[e]);n.bigg_id=n.id,delete n.id,s.genes.push(n)}else console.warn("Could not find gene for gene_id "+e)})),n.reactions[o]=s}n.metabolites={};for(let t=0,r=e.metabolites.length;t<r;t++){const r=e.metabolites[t],i=r.id,o=_l(r);delete o.id,o.bigg_id=i,n.metabolites[i]=o}return n}(e)}static build_reaction_string(e,t){return function(e,t){const n=function(e){return 1==e?"":String(e)+" "},r=[],i=[];for(const t in e){const o=e[t];o>0?i.push(n(o)+t):r.push(n(Math.abs(o))+t)}let o=r.join(" + ");return o+=t?" ↔ ":" → ",o+=i.join(" + "),o}(e,t)}}let au=0;class lu{constructor(e,t,n,r){this.start_reaction_listener=!1,this.is_active=!1;const i=e.append("div").attr("id","rxn-input");this.placed_div=new nc(i,t,{x:240,y:0}),this.placed_div.hide(),this.completely=rc(i.node(),{backgroundColor:"#eee"}),i.append("button").attr("class","button input-close-button").text("×").on("mousedown",(()=>this.hideDropdown())),this.map=t,this.direction_arrow=new _c(t.sel),this.direction_arrow.setRotation(90),this.setUpMapCallbacks(t),this.zoomContainer=n,this.setUpZoomCallbacks(n),this.settings=r,this.toggle(!1),this.target_coords=null}setUpMapCallbacks(e){e.callback_manager.set("select_metabolite_with_id.input",((e,t)=>{this.is_active&&this.reload(e,t,!1)&&this.showDropdown(t),this.map.unhighlightShortestPaths(),this.hideTarget()})),e.callback_manager.set("select_selectable.input",((e,t,n)=>{this.hideTarget(),t&&"object"==typeof t&&(t.selectionOrder=au++),1===e&&this.is_active&&n?this.reload(t,n,!1)&&this.showDropdown(n):this.toggle(!1),1===e&&this.settings.get("highlight_same_nodes")&&this.map.highlightSameNodes(),this.map.selectionChanged(),this.map.unhighlightShortestPaths()})),e.callback_manager.set("deselect_nodes",(()=>{this.map.unhighlightShortestPaths(),this.direction_arrow.hide(),this.hideDropdown()})),e.callback_manager.set("before_svg_export",(()=>{this.direction_arrow.hide(),this.hideTarget()}))}setUpZoomCallbacks(e){}is_visible(){return this.placed_div.is_visible()}toggle(e){if(this.is_active=void 0===e?!this.is_active:e,this.is_active){this.toggleStartReactionListener(!0);let e=!0;Hn.isNull(this.target_coords)?e=this.reloadAtSelected():this.placed_div.place(this.target_coords),e&&(this.showDropdown(),this.map.set_status("Click on the canvas or an existing metabolite")),this.direction_arrow.show()}else this.toggleStartReactionListener(!1),this.hideDropdown(),this.map.set_status(null),this.direction_arrow.hide()}showDropdown(e){this.clear_escape=this.map.key_manager.addEscapeListener((()=>this.hideDropdown())),this.completely.input.blur(),this.completely.repaint(),this.completely.setText(""),this.completely.input.focus()}hideDropdown(){this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.placed_div.hide(),this.completely.input.blur(),this.completely.hideDropDown()}place(e){this.placed_div.place(e),this.direction_arrow.setLocation(e),this.direction_arrow.show()}reloadAtSelected(){this.map.deselect_text_labels();const e=this.map.select_single_node();if(null==e)return!1;const t={x:e.x,y:e.y};return this.reload(e,t,!1)}alreadyDrawn(e,t){for(const n in t)if(t[n].bigg_id===e)return!0;return!1}reload(e,t,n){if(!n&&!e)return void console.error("No selected node and not starting from scratch");if(this.place(t),null==this.map.cobra_model)return this.completely.setText("Cannot add: No model."),!1;const r="name"===this.settings.get("identifiers_on_map"),i=this.settings.get("allow_building_duplicate_reactions"),o=[],s=this.map.cobra_model.reactions,a=this.map.cobra_model.metabolites,l=this.map.reactions,c=this.map.has_data_on_reactions,u=e?r?e.name:e.bigg_id:"",h=(e,t)=>e.replace(new RegExp("(^| )("+t.join("|")+")($| )","g"),"$1<b>$2</b>$3"),d={};for(const t in s){const p=s[t],f=p.name,g=r?f:t;if(i||!this.alreadyDrawn(t,l))for(const i in p.metabolites)if(n||i===(null==e?void 0:e.bigg_id)){if(t in d)continue;let e={};const n=[];let i;if(r)for(i in p.metabolites){const t=a[i].name;e[t]=p.metabolites[i],n.push(t)}else for(i in e=_l(p.metabolites),p.metabolites)n.push(i);const s=Hn.flatten(p.genes.map((e=>[e.name,e.biggId]))),l=su.build_reaction_string(Object.fromEntries(Object.entries(e).map((([e,t])=>[e,t.coefficient]))),p.reversibility),f=[g].concat(n).concat(s).filter((e=>e));c?o.push({reaction_data:p.data,html:"<b>"+g+"</b>: "+p.data_string,matches:f,id:t}):o.push({html:"<b>"+g+"</b>\t"+h(l,[u]),matches:f,id:t}),d[t]=!0}}const p=c?(e,t)=>Math.abs(e.reaction_data)>Math.abs(t.reaction_data)?-1:1:(e,t)=>e.html.toLowerCase()<t.html.toLowerCase()?-1:1;this.completely.options=o.sort(p),this.completely.setText("");const f=r=>{if(null!==r)if(n)this.map.new_reaction_from_scratch(r,t,this.direction_arrow.getRotation());else{if(!(e.node_id in this.map.nodes))return console.error("Selected node no longer exists"),void this.hideDropdown();this.map.new_reaction_for_metabolite(r,e.node_id,this.direction_arrow.getRotation())}};return this.completely.onEnter=function(e){this.setText(""),this.onChange(""),f(e)},!0}toggleStartReactionListener(e){if(void 0===e)this.start_reaction_listener=!this.start_reaction_listener;else{if(this.start_reaction_listener===e)return;this.start_reaction_listener=e}if(this.start_reaction_listener){const e=this.map.sel.node();this.map.sel.on("click.start_reaction",(()=>{if(this.direction_arrow.dragging)return;const t={x:sc(e)[0],y:sc(e)[1]};this.map.deselect_nodes(),this.map.deselect_text_labels(),this.reload(null,t,!0)&&this.showDropdown(t),this.showTarget(this.map,t)})),this.map.sel.style("cursor","pointer")}else this.map.sel.on("click.start_reaction",null),this.map.sel.style("cursor",null),this.hideTarget()}hideTarget(){this.target_coords&&this.map.sel.selectAll(".start-reaction-target").remove(),this.target_coords=null}showTarget(e,t){const n=e.sel.selectAll(".start-reaction-target").data([12,5]);n.enter().append("circle").classed("start-reaction-target",!0).attr("r",(function(e){return e})).style("stroke-width",4).merge(n).style("visibility","visible").attr("transform","translate("+t.x+","+t.y+")"),this.target_coords=t}}class cu{constructor(){this.callbacks={}}set(e,t){void 0===this.callbacks&&(this.callbacks={}),void 0===this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t)}remove(e){void 0===this.callbacks||0===Object.keys(this.callbacks).length?console.warn("No callbacks to remove"):delete this.callbacks[e]}run(e,t=null,...n){if(void 0!==this.callbacks)for(const r in this.callbacks)r.split(".")[0]===e&&this.callbacks[r].forEach((e=>{e.apply(t,n)}))}}var uu=Math.SQRT2;function hu(e){return((e=Math.exp(e))+1/e)/2}function du(e,t){var n,r,i=e[0],o=e[1],s=e[2],a=t[0],l=t[1],c=t[2],u=a-i,h=l-o,d=u*u+h*h;if(d<1e-12)r=Math.log(c/s)/uu,n=function(e){return[i+e*u,o+e*h,s*Math.exp(uu*e*r)]};else{var p=Math.sqrt(d),f=(c*c-s*s+4*d)/(2*s*2*p),g=(c*c-s*s-4*d)/(2*c*2*p),m=Math.log(Math.sqrt(f*f+1)-f),b=Math.log(Math.sqrt(g*g+1)-g);r=(b-m)/uu,n=function(e){var t,n=e*r,a=hu(m),l=s/(2*p)*(a*(t=uu*n+m,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[i+l*u,o+l*h,s*a/hu(uu*n+m)]}}return n.duration=1e3*r,n}var pu,fu,gu=0,mu=0,bu=0,Au=0,_u=0,vu=0,yu="object"==typeof performance&&performance.now?performance:Date,wu="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xu(){return _u||(wu(Cu),_u=yu.now()+vu)}function Cu(){_u=0}function Eu(){this._call=this._time=this._next=null}function Bu(e,t,n){var r=new Eu;return r.restart(e,t,n),r}function ku(){_u=(Au=yu.now())+vu,gu=mu=0;try{!function(){xu(),++gu;for(var e,t=pu;t;)(e=_u-t._time)>=0&&t._call.call(null,e),t=t._next;--gu}()}finally{gu=0,function(){for(var e,t,n=pu,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:pu=t);fu=e,zu(r)}(),_u=0}}function Su(){var e=yu.now(),t=e-Au;t>1e3&&(vu-=t,Au=e)}function zu(e){gu||(mu&&(mu=clearTimeout(mu)),e-_u>24?(e<1/0&&(mu=setTimeout(ku,e-yu.now()-vu)),bu&&(bu=clearInterval(bu))):(bu||(Au=yu.now(),bu=setInterval(Su,1e3)),gu=1,wu(ku)))}function Mu(e,t,n){var r=new Eu;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}Eu.prototype=Bu.prototype={constructor:Eu,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?xu():+n)+(null==t?0:+t),this._next||fu===this||(fu?fu._next=this:pu=this,fu=this),this._call=e,this._time=n,zu()},stop:function(){this._call&&(this._call=null,this._time=1/0,zu())}};var Nu=Ua("start","end","cancel","interrupt"),Ou=[];function Tu(e,t,n,r,i,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(l){var c,u,h,d;if(1!==n.state)return a();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return Mu(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[c])}if(Mu((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Bu((function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:Nu,tween:Ou,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Du(e,t){var n=ju(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Iu(e,t){var n=ju(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ju(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pu(e,t){var n,r,i,o=e.__transition,s=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete e.__transition}}function Fu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Lu,Uu,Ru,Wu,Vu=180/Math.PI,Yu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hu(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Vu,skewX:Math.atan(l)*Vu,scaleX:s,scaleY:a}}function qu(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],l=[];return o=e(o),s=e(s),function(e,r,i,o,s,a){if(e!==i||r!==o){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:Fu(e,i)},{i:l-2,x:Fu(r,o)})}else(i||o)&&s.push("translate("+i+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Fu(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,s.rotate,a,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Fu(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,s.skewX,a,l),function(e,t,n,r,o,s){if(e!==n||t!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Fu(e,n)},{i:a-2,x:Fu(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var Gu=qu((function(e){return"none"===e?Yu:(Lu||(Lu=document.createElement("DIV"),Uu=document.documentElement,Ru=document.defaultView),Lu.style.transform=e,e=Ru.getComputedStyle(Uu.appendChild(Lu),null).getPropertyValue("transform"),Uu.removeChild(Lu),Hu(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Qu=qu((function(e){return null==e?Yu:(Wu||(Wu=document.createElementNS("http://www.w3.org/2000/svg","g")),Wu.setAttribute("transform",e),(e=Wu.transform.baseVal.consolidate())?Hu((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Yu)}),", ",")",")");function Xu(e,t){var n,r;return function(){var i=Iu(this,e),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}i.tween=r}}function Ku(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Iu(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Zu(e,t,n){var r=e._id;return e.each((function(){var e=Iu(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ju(e,r).value[t]}}function Ju(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $u(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function eh(){}var th=.7,nh=1/th,rh="\\s*([+-]?\\d+)\\s*",ih="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",oh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sh=/^#([0-9a-f]{3,8})$/,ah=new RegExp("^rgb\\("+[rh,rh,rh]+"\\)$"),lh=new RegExp("^rgb\\("+[oh,oh,oh]+"\\)$"),ch=new RegExp("^rgba\\("+[rh,rh,rh,ih]+"\\)$"),uh=new RegExp("^rgba\\("+[oh,oh,oh,ih]+"\\)$"),hh=new RegExp("^hsl\\("+[ih,oh,oh]+"\\)$"),dh=new RegExp("^hsla\\("+[ih,oh,oh,ih]+"\\)$"),ph={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fh(){return this.rgb().formatHex()}function gh(){return this.rgb().formatRgb()}function mh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?bh(t):3===n?new yh(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ah(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ah(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ah.exec(e))?new yh(t[1],t[2],t[3],1):(t=lh.exec(e))?new yh(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ch.exec(e))?Ah(t[1],t[2],t[3],t[4]):(t=uh.exec(e))?Ah(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=hh.exec(e))?Eh(t[1],t[2]/100,t[3]/100,1):(t=dh.exec(e))?Eh(t[1],t[2]/100,t[3]/100,t[4]):ph.hasOwnProperty(e)?bh(ph[e]):"transparent"===e?new yh(NaN,NaN,NaN,0):null}function bh(e){return new yh(e>>16&255,e>>8&255,255&e,1)}function Ah(e,t,n,r){return r<=0&&(e=t=n=NaN),new yh(e,t,n,r)}function _h(e){return e instanceof eh||(e=mh(e)),e?new yh((e=e.rgb()).r,e.g,e.b,e.opacity):new yh}function vh(e,t,n,r){return 1===arguments.length?_h(e):new yh(e,t,n,null==r?1:r)}function yh(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function wh(){return"#"+Ch(this.r)+Ch(this.g)+Ch(this.b)}function xh(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ch(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Eh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kh(e,t,n,r)}function Bh(e){if(e instanceof kh)return new kh(e.h,e.s,e.l,e.opacity);if(e instanceof eh||(e=mh(e)),!e)return new kh;if(e instanceof kh)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=t===o?(n-r)/a+6*(n<r):n===o?(r-t)/a+2:(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new kh(s,a,l,e.opacity)}function kh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Sh(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function zh(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function Mh(e){return function(){return e}}function Nh(e,t){return function(n){return e+n*t}}function Oh(e,t){var n=t-e;return n?Nh(e,n):Mh(isNaN(e)?t:e)}Ju(eh,mh,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:fh,formatHex:fh,formatHsl:function(){return Bh(this).formatHsl()},formatRgb:gh,toString:gh}),Ju(yh,vh,$u(eh,{brighter:function(e){return e=null==e?nh:Math.pow(nh,e),new yh(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?th:Math.pow(th,e),new yh(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wh,formatHex:wh,formatRgb:xh,toString:xh})),Ju(kh,(function(e,t,n,r){return 1===arguments.length?Bh(e):new kh(e,t,n,null==r?1:r)}),$u(eh,{brighter:function(e){return e=null==e?nh:Math.pow(nh,e),new kh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?th:Math.pow(th,e),new kh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yh(Sh(e>=240?e-240:e+120,i,r),Sh(e,i,r),Sh(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const Th=function e(t){var n=function(e){return 1===(e=+e)?Oh:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Mh(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=vh(e)).r,(t=vh(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),s=Oh(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function Dh(e){return function(t){var n,r,i=t.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=vh(t[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=e(o),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=o(e),r.g=s(e),r.b=a(e),r+""}}}Dh((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return zh((n-r/t)*t,s,i,o,a)}})),Dh((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return zh((n-r/t)*t,i,o,s,a)}}));var Ih=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jh=new RegExp(Ih.source,"g");function Ph(e,t){var n,r,i,o=Ih.lastIndex=jh.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=Ih.exec(e))&&(r=jh.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Fu(n,r)})),o=jh.lastIndex;return o<t.length&&(i=t.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function Fh(e,t){var n;return("number"==typeof t?Fu:t instanceof mh?Th:(n=mh(t))?(t=n,Th):Ph)(e,t)}function Lh(e){return function(){this.removeAttribute(e)}}function Uh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rh(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Wh(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Vh(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttribute(e)}}function Yh(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function Hh(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function qh(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Gh(e,t){return function(){Du(this,e).delay=+t.apply(this,arguments)}}function Qh(e,t){return t=+t,function(){Du(this,e).delay=t}}function Xh(e,t){return function(){Iu(this,e).duration=+t.apply(this,arguments)}}function Kh(e,t){return t=+t,function(){Iu(this,e).duration=t}}var Zh=ka.prototype.constructor;function Jh(e){return function(){this.style.removeProperty(e)}}var $h=0;function ed(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function td(){return++$h}var nd=ka.prototype;ed.prototype=function(e){return ka().transition(e)}.prototype={constructor:ed,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=_s(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,c=r[s],u=c.length,h=o[s]=new Array(u),d=0;d<u;++d)(a=c[d])&&(l=e.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,Tu(h[d],t,n,d,h,ju(a,n)));return new ed(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ys(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=e.call(l,l.__data__,h,c),f=ju(l,n),g=0,m=p.length;g<m;++g)(d=p[g])&&Tu(d,t,n,g,p,f);o.push(p),s.push(l)}return new ed(o,s,t,n)},filter:function(e){"function"!=typeof e&&(e=ws(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new ed(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],h=c.length,d=s[a]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;a<r;++a)s[a]=t[a];return new ed(s,this._parents,this._name,this._id)},selection:function(){return new Zh(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=td(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=ju(s,t);Tu(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ed(r,this._parents,e,n)},call:nd.call,nodes:nd.nodes,node:nd.node,size:nd.size,empty:nd.empty,each:nd.each,on:function(e,t){var n=this._id;return arguments.length<2?ju(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Du:Iu;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}(n,e,t))},attr:function(e,t){var n=Ms(e),r="transform"===n?Qu:Fh;return this.attrTween(e,"function"==typeof t?(n.local?Yh:Vh)(n,r,Zu(this,"attr."+e,t)):null==t?(n.local?Uh:Lh)(n):(n.local?Wh:Rh)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Ms(e);return this.tween(n,(r.local?Hh:qh)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Gu:Fh;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Rs(this,e),s=(this.style.removeProperty(e),Rs(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}(e,r)).on("end.style."+e,Jh(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var s=Rs(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=Rs(this,e)),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}(e,r,Zu(this,"style."+e,t))).each(function(e,t){var n,r,i,o,s="style."+t,a="end."+s;return function(){var l=Iu(this,e),c=l.on,u=null==l.value[s]?o||(o=Jh(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var s=Rs(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Zu(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=ju(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Xu:Ku)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Gh:Qh)(t,e)):ju(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Xh:Kh)(t,e)):ju(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Iu(this,e).ease=t}}(t,e)):ju(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0===--i&&o()}};n.each((function(){var n=Iu(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t}))}))}};var rd={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function id(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return rd.time=xu(),rd;return n}function od(e){return function(){return e}}function sd(e,t,n){this.target=e,this.type=t,this.transform=n}function ad(e,t,n){this.k=e,this.x=t,this.y=n}ka.prototype.interrupt=function(e){return this.each((function(){Pu(this,e)}))},ka.prototype.transition=function(e){var t,n;e instanceof ed?(t=e._id,e=e._name):(t=td(),(n=rd).time=xu(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)(s=a[c])&&Tu(s,e,t,c,a,n||id(s,t));return new ed(r,this._parents,e,t)},ad.prototype={constructor:ad,scale:function(e){return 1===e?this:new ad(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ad(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ld=new ad(1,0,0);function cd(){ga.stopImmediatePropagation()}function ud(){ga.preventDefault(),ga.stopImmediatePropagation()}function hd(){return!ga.ctrlKey&&!ga.button}function dd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function pd(){return this.__zoom||ld}function fd(){return-ga.deltaY*(1===ga.deltaMode?.05:ga.deltaMode?1:.002)}function gd(){return navigator.maxTouchPoints||"ontouchstart"in this}function md(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}ad.prototype;class bd{constructor(e,t,n){e.classed("escher-container",!0),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Mozilla")&&e.on("touchstart touchmove",(function(){ga.stopPropagation()}));const r=e.append("div").attr("class","escher-zoom-container"),i=r.append("div").attr("class","escher-3d-transform-container"),o=i.append("svg").attr("class","escher-svg").attr("xmlns","http://www.w3.org/2000/svg");o.select(".zoom-g").remove();const s=o.append("g").attr("class","zoom-g");this.selection=e,this.container=r,this.css3TransformContainer=i,this.svg=o,this.zoomedSel=s,this.windowTranslate={x:0,y:0},this.windowScale=1,this._scrollBehavior=t,this._use3dTransform=n,this._panDragOn=!0,this._zoomBehavior=null,this._zoomTimeout=null,this._svgScale=this.windowScale,this._svgTranslate=this.windowTranslate,this._3dTransform=null,this._requestedFrame=!1,this.callbackManager=new cu,this._updateScroll()}setScrollBehavior(e){this._scrollBehavior=e,this._updateScroll()}setUse3dTransform(e){this._use3dTransform=e}togglePanDrag(e){Hn.isUndefined(e)?this._panDragOn=!this._panDragOn:this._panDragOn=e,this._panDragOn?this.zoomedSel.style("cursor","grab"):"grab"===this.zoomedSel.style("cursor")&&this.zoomedSel.style("cursor",null),this._updateScroll()}_updateScroll(){if(!Hn.contains(["zoom","pan","none"],this._scrollBehavior))throw Error("Bad value for scroll_behavior: "+this._scrollBehavior);if(this.container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null).on("dblclick.zoom",null).on("mousewheel.escher",null).on("DOMMouseScroll.escher",null).on("wheel.escher",null).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),this._zoomBehavior=function(){var e,t,n=hd,r=dd,i=md,o=fd,s=gd,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,u=du,h=Ua("start","zoom","end"),d=0;function p(e){e.property("__zoom",pd).on("wheel.zoom",v).on("mousedown.zoom",y).on("dblclick.zoom",w).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(e,t){return(t=Math.max(a[0],Math.min(a[1],t)))===e.k?e:new ad(t,e.x,e.y)}function g(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new ad(e.k,r,i)}function m(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n){e.on("start.zoom",(function(){A(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){A(this,arguments).end()})).tween("zoom",(function(){var e=this,i=arguments,o=A(e,i),s=r.apply(e,i),a=null==n?m(s):"function"==typeof n?n.apply(e,i):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,h="function"==typeof t?t.apply(e,i):t,d=u(c.invert(a).concat(l/c.k),h.invert(a).concat(l/h.k));return function(e){if(1===e)e=h;else{var t=d(e),n=l/t[2];e=new ad(n,a[0]-t[0]*n,a[1]-t[1]*n)}o.zoom(null,e)}}))}function A(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.extent=r.apply(e,t),this.taps=0}function v(){if(n.apply(this,arguments)){var e=A(this,arguments),t=this.__zoom,r=Math.max(a[0],Math.min(a[1],t.k*Math.pow(2,o.apply(this,arguments)))),s=sc(this);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=t.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(t.k===r)return;e.mouse=[s,t.invert(s)],Pu(this),e.start()}ud(),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),150),e.zoom("mouse",i(g(f(t,r),e.mouse[0],e.mouse[1]),e.extent,l))}}function y(){if(!t&&n.apply(this,arguments)){var e=A(this,arguments,!0),r=Sa(ga.view).on("mousemove.zoom",(function(){if(ud(),!e.moved){var t=ga.clientX-s,n=ga.clientY-a;e.moved=t*t+n*n>d}e.zoom("mouse",i(g(e.that.__zoom,e.mouse[0]=sc(e.that),e.mouse[1]),e.extent,l))}),!0).on("mouseup.zoom",(function(){r.on("mousemove.zoom mouseup.zoom",null),hc(ga.view,e.moved),ud(),e.end()}),!0),o=sc(this),s=ga.clientX,a=ga.clientY;uc(ga.view),cd(),e.mouse=[o,this.__zoom.invert(o)],Pu(this),e.start()}}function w(){if(n.apply(this,arguments)){var e=this.__zoom,t=sc(this),o=e.invert(t),s=e.k*(ga.shiftKey?.5:2),a=i(g(f(e,s),t,o),r.apply(this,arguments),l);ud(),c>0?Sa(this).transition().duration(c).call(b,a,t):Sa(this).call(p.transform,a)}}function x(){if(n.apply(this,arguments)){var t,r,i,o,s=ga.touches,a=s.length,l=A(this,arguments,ga.changedTouches.length===a);for(cd(),r=0;r<a;++r)o=[o=ac(this,s,(i=s[r]).identifier),this.__zoom.invert(o),i.identifier],l.touch0?l.touch1||l.touch0[2]===o[2]||(l.touch1=o,l.taps=0):(l.touch0=o,t=!0,l.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(l.taps<2&&(e=setTimeout((function(){e=null}),500)),Pu(this),l.start())}}function C(){if(this.__zooming){var t,n,r,o,s=A(this,arguments),a=ga.changedTouches,c=a.length;for(ud(),e&&(e=clearTimeout(e)),s.taps=0,t=0;t<c;++t)r=ac(this,a,(n=a[t]).identifier),s.touch0&&s.touch0[2]===n.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===n.identifier&&(s.touch1[0]=r);if(n=s.that.__zoom,s.touch1){var u=s.touch0[0],h=s.touch0[1],d=s.touch1[0],p=s.touch1[1],m=(m=d[0]-u[0])*m+(m=d[1]-u[1])*m,b=(b=p[0]-h[0])*b+(b=p[1]-h[1])*b;n=f(n,Math.sqrt(m/b)),r=[(u[0]+d[0])/2,(u[1]+d[1])/2],o=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],o=s.touch0[1]}s.zoom("touch",i(g(n,r,o),s.extent,l))}}function E(){if(this.__zooming){var e,n,r=A(this,arguments),i=ga.changedTouches,o=i.length;for(cd(),t&&clearTimeout(t),t=setTimeout((function(){t=null}),500),e=0;e<o;++e)n=i[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var s=Sa(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return p.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",pd),e!==r?b(e,t,n):r.interrupt().each((function(){A(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},p.scaleBy=function(e,t,n){p.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n)},p.scaleTo=function(e,t,n){p.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,s=null==n?m(e):"function"==typeof n?n.apply(this,arguments):n,a=o.invert(s),c="function"==typeof t?t.apply(this,arguments):t;return i(g(f(o,c),s,a),e,l)}),n)},p.translateBy=function(e,t,n){p.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),l)}))},p.translateTo=function(e,t,n,o){p.transform(e,(function(){var e=r.apply(this,arguments),s=this.__zoom,a=null==o?m(e):"function"==typeof o?o.apply(this,arguments):o;return i(ld.translate(a[0],a[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),o)},_.prototype={start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){va(new sd(p,e,this.that.__zoom),h.apply,h,[e,this.that,this.args])}},p.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:od(+e),p):o},p.filter=function(e){return arguments.length?(n="function"==typeof e?e:od(!!e),p):n},p.touchable=function(e){return arguments.length?(s="function"==typeof e?e:od(!!e),p):s},p.extent=function(e){return arguments.length?(r="function"==typeof e?e:od([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),p):r},p.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],p):[a[0],a[1]]},p.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],p):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},p.constrain=function(e){return arguments.length?(i=e,p):i},p.duration=function(e){return arguments.length?(c=+e,p):c},p.interpolate=function(e){return arguments.length?(u=e,p):u},p.on=function(){var e=h.on.apply(h,arguments);return e===h?p:e},p.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,p):Math.sqrt(d)},p}().on("start",(()=>{null!==ga.sourceEvent&&(ga.sourceEvent.stopPropagation(),ga.sourceEvent.preventDefault())})).on("zoom",(()=>{this._goToCallback(ga.transform.k,{x:ga.transform.x,y:ga.transform.y})})),this.container.call(this._zoomBehavior),this.container.on("dblclick.zoom",null),this._panDragOn||this.container.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),"zoom"!==this._scrollBehavior&&this.container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null),"pan"===this._scrollBehavior){const e=()=>{const e=ga;e.stopPropagation(),e.preventDefault(),e.returnValue=!1;const t=(e,t)=>.5*(Hn.isUndefined(e)?t:-e/1.5),n={x:this.windowTranslate.x-t(e.wheelDeltaX,e.deltaX),y:this.windowTranslate.y-t(e.wheelDeltaY,e.deltaY)};this.goTo(this.windowScale,n)};this.container.on("mousewheel.escher",e),this.container.on("DOMMouseScroll.escher",e),this.container.on("wheel.escher",e)}this.goTo(this.windowScale,this.windowTranslate)}goTo(e,t){if(!e)return void console.error("Bad scale value");if(!t||!("x"in t)||!("y"in t)||Hn.isNaN(t.x)||Hn.isNaN(t.y))return void console.error("Bad translate value");const n=ld.translate(t.x,t.y).scale(e);this.container.call(this._zoomBehavior.transform,n)}_goToCallback(e,t){this.windowScale!==e&&(this.windowScale=e,this.callbackManager.run("zoom_change")),this.windowTranslate=t,this._use3dTransform?(Hn.isNull(this._zoomTimeout)||clearTimeout(this._zoomTimeout),this._goTo3d(e,t,this._svgScale,this._svgTranslate),this._zoomTimeout=Hn.delay((()=>{this._requestedFrame=!1,this._goToSvg(e,t)}),100)):this._goToSvg(e,t),this.callbackManager.run("go_to")}_goTo3dFrame(){this._requestedFrame||(this._requestedFrame=!0,window.requestAnimationFrame((()=>{this._requestedFrame=!1;const e=this._3dTransform;e?(this.css3TransformContainer.style("transform",e),this.css3TransformContainer.style("-webkit-transform",e),this.css3TransformContainer.style("transform-origin","0 0"),this.css3TransformContainer.style("-webkit-transform-origin","0 0")):console.warn("No _3dTransform defined")})))}_goTo3d(e,t,n,r){const i=e/n,o=kl(t,Sl(r,i)),s="translate("+o.x+"px,"+o.y+"px) scale("+i+")";this._3dTransform=s,this._goTo3dFrame()}_clear3d(){this._3dTransform&&(this._3dTransform=null,this.css3TransformContainer.style("transform",null),this.css3TransformContainer.style("-webkit-transform",null),this.css3TransformContainer.style("transform-origin",null),this.css3TransformContainer.style("-webkit-transform-origin",null))}_goToSvgFrame(e=null){this._requestedFrame&&!e||(this._requestedFrame=!0,window.requestAnimationFrame((()=>{this._requestedFrame=!1,this._clear3d();const t=this._svgScale,n=this._svgTranslate;this.zoomedSel.attr("transform","translate("+n.x+","+n.y+") scale("+t+")"),e&&e()})))}_goToSvg(e,t,n=null){this._svgScale=e,this._svgTranslate=t,this._goToSvgFrame(n)}zoomBy(e){const t=this.get_size(),n={x:t.width/2-((t.width/2-this.windowTranslate.x)*e+this.windowTranslate.x),y:t.height/2-((t.height/2-this.windowTranslate.y)*e+this.windowTranslate.y)};this.goTo(this.windowScale*e,Bl(this.windowTranslate,n))}zoom_in(){this.zoomBy(1.5)}zoom_out(){this.zoomBy(.667)}get_size(){const{width:e,height:t}=this.selection.node().getBoundingClientRect();return{width:e,height:t}}translateOffScreen(e){const t=120,n=this.get_size(),r=-this.windowTranslate.x/this.windowScale+t/this.windowScale,i=-this.windowTranslate.x/this.windowScale+(n.width-t)/this.windowScale,o=-this.windowTranslate.y/this.windowScale+t/this.windowScale,s=-this.windowTranslate.y/this.windowScale+(n.height-t)/this.windowScale;e.x<r?(this.windowTranslate.x=this.windowTranslate.x-(e.x-r)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)):e.x>i&&(this.windowTranslate.x=this.windowTranslate.x-(e.x-i)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)),e.y<o?(this.windowTranslate.y=this.windowTranslate.y-(e.y-o)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)):e.y>s&&(this.windowTranslate.y=this.windowTranslate.y-(e.y-s)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate))}}class Ad{constructor(e,t,n){this.behavior=e,this.settings=t,this.map=n,this.callback_manager=new cu}create_membrane(e){const t=e.append("rect").attr("class","membrane");return this.callback_manager.run("create_membrane",this,e),t}update_membrane(e){e.attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).style("stroke-width",(function(e){return 10})).attr("rx",(function(e){return 20})).attr("ry",(function(e){return 20})),this.callback_manager.run("update_membrane",this,e)}create_reaction(e){const t=e.append("g").attr("id",(function(e){return"r"+e.reaction_id})).attr("class","reaction");return this.create_reaction_label(t),this.callback_manager.run("create_reaction",this,e),t}update_reaction(e,t,n,r,i,o){e.select(".reaction-label-group").call((e=>this.update_reaction_label(e,o))),fl(e,".segment-group","segments","segment_id",this.create_segment.bind(this),(e=>this.update_segment(e,t,n,r,i,o)),(e=>{e.remove()})),this.callback_manager.run("update_reaction",this,e)}create_reaction_label(e,t){const n=e.append("g").attr("class","reaction-label-group");return n.append("text").attr("class","reaction-label label"),n.append("g").attr("class","all-genes-label-group"),this.callback_manager.run("create_reaction_label",this,e),n}update_reaction_label(e,t){Mc(".4g");const n=this.settings.get("identifiers_on_map"),r=this.settings.get("reaction_styles"),i=this.settings.get("show_gene_reaction_rules"),o=this.settings.get("hide_all_labels"),s=this.settings.get("gene_font_size"),a=this.behavior.reactionLabelMouseover,l=this.behavior.reactionLabelMouseout,c=this.behavior.reactionLabelTouch,u=this.behavior.geneLabelMouseover,h=this.behavior.geneLabelMouseout,d=this.behavior.geneLabelTouch;e.attr("transform",(function(e){return"translate("+e.label_x+","+e.label_y+")"})).call(this.behavior.turnOffDrag).call(this.behavior.reactionLabelDrag);const p=e.select(".reaction-label").attr("visibility",o?"hidden":"visible");o||p.text((function(e){let i=e[n];return t&&-1!==r.indexOf("text")&&(i+=" "+e.data_string),i})).on("mouseover",a).on("mouseout",l).on("touchend",c);const f=function(e,t){return e+1.5*s*(t+1)},g=e.select(".all-genes-label-group").selectAll(".gene-label-group").data((function(e){const t="gene_string"in e&&null!==e.gene_string&&i&&!o&&-1!==r.indexOf("text"),s="gene_reaction_rule"in e&&null!==e.gene_reaction_rule&&i&&!o;if(t)return console.warn("Showing gene_string. See TODO in source."),e.gene_string;if(s){const t=Kc(e.gene_reaction_rule,null,e.genes,null,n,null);return t.forEach((function(t,n){t.label_x=e.label_x,t.label_y=f(e.label_y,n)})),t}return[]})),m=g.enter().append("g").attr("class","gene-label-group");m.append("text").attr("class","gene-label").style("font-size",s+"px");const b=m.merge(g);b.attr("transform",(function(e,t){return"translate(0, "+f(0,t)+")"})),b.select("text").text((e=>e.text)).on("mouseover",u).on("mouseout",h).on("touchend",d),g.exit().remove(),this.callback_manager.run("update_reaction_label",this,e)}create_segment(e){const t=e.append("g").attr("class","segment-group").attr("id",(function(e){return"s"+e.segment_id}));return t.append("path").attr("class","segment"),t.append("g").attr("class","arrowheads"),t.append("g").attr("class","stoichiometry-labels"),this.callback_manager.run("create_segment",this,e),t}update_segment(e,t,n,r,i,o){const s=this.settings.get("reaction_styles"),a=o&&-1!==s.indexOf("size"),l=o&&-1!==s.indexOf("color"),c=this.settings.get("reaction_no_data_size"),u=this.settings.get("reaction_no_data_color"),h=this.settings.get("highlight_missing"),d=this.settings.get("hide_secondary_metabolites"),p=this.settings.get("primary_metabolite_radius"),f=this.settings.get("secondary_metabolite_radius"),g=this.behavior.reactionObjectMouseover,m=this.behavior.reactionObjectMouseout,b=function(e,n){let r=20,i=13;return n&&(i=null==e?c:t.reaction_size(e),isNaN(i)&&(i=c),r=2*i),{width:r,height:i}},A=function(e,t,n,r){const i=t||n>0?e.height:0;return(r?p:f)+i+10};e.selectAll(".segment").datum((function(){return Object.assign({},this.parentNode.__data__,this.parentNode.parentNode.__data__)})).style("visibility",(function(e){const t=r[e.from_node_id],n=r[e.to_node_id];return d&&("metabolite"===n.node_type&&!n.node_is_primary||"metabolite"===t.node_type&&!t.node_is_primary)?"hidden":null})).attr("d",(function(e){if(null==e.from_node_id||null==e.to_node_id)return null;let t=r[e.from_node_id],n=r[e.to_node_id];const i=e.b1,o=e.b2;if("metabolite"===t.node_type){const r=b(e.data,a);t=_d(A(r,e.reversibility,e.from_node_coefficient,t.node_is_primary),t,null==i?n:i,"start")}if("metabolite"==n.node_type){const r=b(e.data,a);n=_d(A(r,e.reversibility,e.to_node_coefficient,n.node_is_primary),null==o?t:o,n,"end")}let s="M"+t.x+","+t.y+" ";return null!==i&&null!==o&&(s+="C"+i.x+","+i.y+" "+o.x+","+o.y+" "),s+=n.x+","+n.y,s})).style("stroke",(function(e){const r=this.parentNode.parentNode.__data__.bigg_id;if(h&&null!==n&&!(r in n.reactions))return"red";if(l){const n=e.data;return null==n?u:t.reaction_color(n)}return null})).style("stroke-width",(function(e){if(a){const n=e.data;return null==n?c:t.reaction_size(n)}return null})).attr("pointer-events","visibleStroke").on("mouseover",g).on("mouseout",m);const _=e.select(".arrowheads").selectAll(".arrowhead").data((function(e){const t=[],n=r[e.from_node_id],i=e.b1,o=r[e.to_node_id],s=e.b2;if(d&&("metabolite"===o.node_type&&!o.node_is_primary||"metabolite"===n.node_type&&!n.node_is_primary))return t;if("metabolite"===n.node_type&&(e.reversibility||e.from_node_coefficient>0)){const r=b(e.data,a),s=A(r,e.reversibility,e.from_node_coefficient,n.node_is_primary),l=null==i?o:i,c=Pl(jl([n,l]))+90,u=_d(s,n,l,"start");t.push({data:e.data,x:u.x,y:u.y,size:r,rotation:c,show_arrowhead_flux:e.from_node_coefficient<0===e.reverse_flux||0===e.data})}if("metabolite"===o.node_type&&(e.reversibility||e.to_node_coefficient>0)){const r=b(e.data,a),i=A(r,e.reversibility,e.to_node_coefficient,o.node_is_primary),l=null==s?n:s,c=Pl(jl([o,l]))+90,u=_d(i,l,o,"end");t.push({data:e.data,x:u.x,y:u.y,size:r,rotation:c,show_arrowhead_flux:e.to_node_coefficient<0===e.reverse_flux||0===e.data})}if(e.unconnected_segment_with_arrow){const r=b(e.data,a),i=Pl(jl([n,o]))+90;t.push({data:e.data,x:n.x,y:n.y,size:r,rotation:i,show_arrowhead_flux:e.to_node_coefficient<0===e.reverse_flux||0===e.data})}return t}));_.enter().append("path").classed("arrowhead",!0).merge(_).attr("d",(function(e){return"M"+[-e.size.width/2,0]+" L"+[0,e.size.height]+" L"+[e.size.width/2,0]+" Z"})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")rotate("+e.rotation+")"})).style("fill",(function(e){if(l){if(e.show_arrowhead_flux){const n=e.data;return null==n?u:t.reaction_color(n)}return"#FFFFFF"}return null})).style("stroke",(function(e){if(l){const n=e.data;return null==n?u:t.reaction_color(n)}return null})),_.exit().remove();const v=e.select(".stoichiometry-labels").selectAll(".stoichiometry-label").data((function(e){const t=[],n=r[e.from_node_id],i=e.b1,o=r[e.to_node_id],s=e.b2;if(d&&("metabolite"==o.node_type&&!o.node_is_primary||"metabolite"==n.node_type&&!n.node_is_primary))return t;if("metabolite"===n.node_type&&1!=Math.abs(e.from_node_coefficient)){const r=b(e.data,a),s=1.5*A(r,!1,0,o.node_is_primary);let l=null==i?o:i;l=Bl(l,Il(l,.5,n));let c=_d(s,n,l,"start");c=Bl(c,{x:0,y:7}),t.push({coefficient:Math.abs(e.from_node_coefficient),x:c.x,y:c.y,data:e.data})}if("metabolite"===o.node_type&&1!==Math.abs(e.to_node_coefficient)){const r=b(e.data,a),i=1.5*A(r,!1,0,o.node_is_primary);let l=null==s?n:s;l=Bl(l,Il(l,.5,o));let c=_d(i,l,o,"end");c=Bl(c,{x:0,y:7}),t.push({coefficient:Math.abs(e.to_node_coefficient),x:c.x,y:c.y,data:e.data})}return t}));v.enter().append("text").attr("class","stoichiometry-label").attr("text-anchor","middle").merge(v).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).text((function(e){return e.coefficient})).style("fill",(function(e){if(l){const n=e.data;return null==n?u:t.reaction_color(n)}return null})),v.exit().remove(),this.callback_manager.run("update_segment",this,e)}create_bezier(e){const t=e.append("g").attr("id",(function(e){return e.bezier_id})).attr("class",(function(e){return"bezier"}));return t.append("path").attr("class","connect-line"),t.append("circle").attr("class",(function(e){return"bezier-circle "+e.bezier})).style("stroke-width",String(1)+"px").attr("r",String(7)+"px"),this.callback_manager.run("create_bezier",this,e),t}update_bezier(e,t,n,r,i,o,s){const a=this.settings.get("hide_secondary_metabolites");t?(e.attr("visibility","visible"),e.style("visibility",(function(e){const t=s[e.reaction_id].segments[e.segment_id],n=o[t.from_node_id],r=o[t.to_node_id];return a&&("metabolite"===r.node_type&&!r.node_is_primary||"metabolite"===n.node_type&&!n.node_is_primary)?"hidden":null})),e.select(".bezier-circle").call(this.behavior.turnOffDrag).call(n).on("mouseover",r).on("mouseout",i).attr("transform",(function(e){return null==e.x||null==e.y?"":"translate("+e.x+","+e.y+")"})),e.select(".connect-line").attr("d",(function(e){const t=s[e.reaction_id].segments[e.segment_id],n="b1"===e.bezier?o[t.from_node_id]:o[t.to_node_id];return null==e.x||null==e.y||null==n.x||null==n.y?"":"M"+e.x+", "+e.y+" "+n.x+","+n.y})),this.callback_manager.run("update_bezier",this,e)):e.attr("visibility","hidden")}create_node(e,t,n){const r=e.append("g").attr("class","node").attr("id",(function(e){return"n"+e.node_id}));return r.append("circle").attr("class",(function(e){let t="node-circle";return null!==e.node_type&&(t+=" "+e.node_type+"-circle"),t})),r.filter((function(e){return"metabolite"===e.node_type})).append("text").attr("class","node-label label"),this.callback_manager.run("create_node",this,e),r}update_node(e,t,n,r,i,o,s,a,l){const c=this.settings.get("hide_secondary_metabolites"),u=this.settings.get("primary_metabolite_radius"),h=this.settings.get("secondary_metabolite_radius"),d=this.settings.get("marker_radius"),p=this.settings.get("hide_all_labels"),f=this.settings.get("identifiers_on_map"),g=this.settings.get("metabolite_styles"),m={color:this.settings.get("metabolite_no_data_color"),size:this.settings.get("metabolite_no_data_size")},b=this.behavior.nodeLabelMouseover,A=this.behavior.nodeLabelMouseout,_=this.behavior.nodeLabelTouch,v=this.behavior.nodeObjectMouseover,y=this.behavior.nodeObjectMouseout,w=(e.select(".node-circle").attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).style("visibility",(function(e){return x(e,c)?"hidden":null})).attr("r",(function(e){if("metabolite"===e.node_type){if(n&&-1!==g.indexOf("size")){const n=e.data;return null==n?m.size:t.metabolite_size(n)}return e.node_is_primary?u:h}return d})).style("fill",(function(e){if("metabolite"===e.node_type){if(n&&-1!==g.indexOf("color")){const n=e.data;return null==n?m.color:t.metabolite_color(n)}return null}return null})).call(this.behavior.turnOffDrag).call(a).on("mousedown",r).on("click",i).on("mouseover",v).on("mouseout",y),e.select(".node-label").attr("visibility",p?"hidden":"visible"));function x(e,t){return"metabolite"===e.node_type&&t&&!e.node_is_primary}p||w.style("visibility",(function(e){return x(e,c)?"hidden":null})).attr("transform",(function(e){return"translate("+e.label_x+","+e.label_y+")"})).text((function(e){let t=e[f];return n&&-1!==g.indexOf("text")&&(t+=" "+e.data_string),t})).call(this.behavior.turnOffDrag).call(l).on("mouseover",b).on("mouseout",A).on("touchend",_),this.callback_manager.run("update_node",this,e)}create_text_label(e){const t=e.append("g").attr("id",(function(e){return"l"+e.text_label_id})).attr("class","text-label");return t.append("text").attr("class","label"),this.callback_manager.run("create_text_label",this,e),t}update_text_label(e){const t=this.behavior.textLabelMousedown,n=this.behavior.textLabelClick,r=this.behavior.turnOffDrag,i=this.behavior.selectableDrag;e.select(".label").text((function(e){return e.text})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).on("mousedown",t).on("click",n).call(r).call(i),this.callback_manager.run("update_text_label",this,e)}}function _d(e,t,n,r){const i=e,o=Wl(t,n);return i&&o?"start"===r?{x:t.x+i*(n.x-t.x)/o,y:t.y+i*(n.y-t.y)/o}:"end"===r?{x:n.x-i*(n.x-t.x)/o,y:n.y-i*(n.y-t.y)/o}:void console.error("bad displace value: "+r):(console.warn("No space for displacement"),{x:t.x,y:t.y})}function vd(e,t,n,r,i,o){const s=Fl(e),a=18*i.length,l=t-(t>o?1:0)-n/2>=-1;return Math.abs(s)<Math.PI/7?r||l?{x:.3*-a,y:40}:{x:.3*-a,y:-20}:Math.abs(s-Math.PI)<Math.PI/7?r||!l?{x:.3*-a,y:40}:{x:.3*-a,y:-20}:r?{x:25-38*Math.abs(Math.abs(s)-Math.PI/2),y:(Math.abs(s)-Math.PI/2)*(2*(s>0?1:0)-1)*50}:s<0&&l||s>0&&!l?{x:15,y:0}:{x:.5*-a,y:30}}function yd(e,t,n,r,i){const o=e=>null==e?null:Il(e,r,i),s=[];let a=[];for(const r in e){const i=e[r],l=o({x:i.x,y:i.y}),c=xd(i,t,l);i.connected_segments.map((e=>{const i=t[e.reaction_id];if(void 0===i)return;const s=e.segment_id,a=i.segments[s];if(a.to_node_id===r&&a.b2){const e=o(a.b2),t=kd(s,"b2");a.b2=Bl(a.b2,e),n[t].x=a.b2.x,n[t].y=a.b2.y}else if(a.from_node_id===r&&a.b1){const e=o(a.b1),t=kd(s,"b1");a.b1=Bl(a.b1,e),n[t].x=a.b1.x,n[t].y=a.b1.y}})),a=yl([a,c.reaction_ids]),s.push(r)}return{node_ids:s,reaction_ids:a}}function wd(e,t,n,r,i){const o=xd(e,n,i);return e.connected_segments.map((e=>{const s=n[e.reaction_id];if(Hn.isUndefined(s))return;const a=e.segment_id,l=s.segments[a];[["b1","from_node_id"],["b2","to_node_id"]].forEach((e=>{const n=e[0],o=e[1];if(l[o]===t&&l[n]){l[n]=Bl(l[n],i);const e=r[kd(a,n)];e.x=l[n].x,e.y=l[n].y}})),o.reaction_ids.indexOf(e.reaction_id)<0&&o.reaction_ids.push(e.reaction_id)})),o}function xd(e,t,n){e.x=e.x+n.x,e.y=e.y+n.y,e.label_x=e.label_x+n.x,e.label_y=e.label_y+n.y;const r=[];return e.connected_segments.map((i=>{const o=t[i.reaction_id];r.indexOf(i.reaction_id)<0&&(r.push(i.reaction_id),"midmarker"===e.node_type&&(o.label_x=o.label_x+n.x,o.label_y=o.label_y+n.y))})),{reaction_ids:r}}function Cd(e,t,n){const r=Math.floor(n/2);return e*(t-r+(t>=r?1:0))}function Ed(e,t,n,r){const i=Math.floor(r/2);return t+Math.abs(n-i+(n>=i?1:0))*e}function Bd(e,t,n,r,i,o){const s=n[0];n=[kl(n[0],s),kl(n[1],s)],r=kl(r,s);const a=.4,l=.25,c=e.count-1;let u,h;e.is_primary?u=20:(u=10,h=e.index>t?e.index-1:e.index);const d=[{x:u,y:0},{x:i-u,y:0}];let p,f,g,m;return e.coefficient<0!==o&&e.is_primary?(p={x:d[0].x,y:d[0].y},g={x:.6*r.x+d[0].x*a,y:.6*r.y+d[0].y*a},m={x:r.x*l+.75*p.x,y:r.y*l+.75*p.y},f={x:n[0].x,y:n[0].y}):e.coefficient<0!==o?(p={x:d[0].x+Ed(20,50,h,c),y:d[0].y+Cd(24,h,c)},g={x:.6*r.x+d[0].x*a,y:.6*r.y+d[0].y*a},m={x:r.x*l+.75*p.x,y:r.y*l+.75*p.y},f={x:n[0].x+Ed(20,50,h,c),y:n[0].y+Cd(80,h,c)}):e.coefficient>0!==o&&e.is_primary?(p={x:d[1].x,y:d[1].y},g={x:.6*r.x+d[1].x*a,y:.6*r.y+d[1].y*a},m={x:r.x*l+.75*p.x,y:r.y*l+.75*p.y},f={x:n[1].x,y:n[1].y}):e.coefficient>0!==o&&(p={x:d[1].x-Ed(20,50,h,c),y:d[1].y+Cd(24,h,c)},g={x:.6*r.x+d[1].x*a,y:.6*r.y+d[1].y*a},m={x:r.x*l+.75*p.x,y:r.y*l+.75*p.y},f={x:n[1].x-Ed(20,50,h,c),y:n[1].y+Cd(80,h,c)}),{b1:Bl(s,g),b2:Bl(s,m),circle:Bl(s,f)}}function kd(e,t){return e+"_"+t}function Sd(e,t){const n={};for(const r in e){const i=e[r];["b1","b2"].forEach((function(e){const o=i[e];if(null!==o){const i=kd(r,e);n[i]={bezier:e,x:o.x,y:o.y,reaction_id:t,segment_id:r}}}))}return n}function zd(e){const t={};for(const n in e)vl(t,Sd(e[n].segments,n));return t}const Md=Sa,Nd=sc,Od=()=>ga;class Td{constructor(e,t){this.labelDrag=null,this.labelTouch=null,this.objectTouch=null,this.map=e,this.undoStack=t,this.emptyBehavior=()=>{},this.rotationModeEnabled=!1,this.rotationDrag=Ac(),this.selectableMousedown=null,this.textLabelMousedown=null,this.textLabelClick=null,this.selectableDrag=this.emptyBehavior,this.nodeLabelMouseover=null,this.nodeLabelTouch=null,this.nodeLabelMouseout=null,this.reactionLabelMouseover=null,this.reactionLabelTouch=null,this.reactionLabelMouseout=null,this.geneLabelMouseover=null,this.geneLabelTouch=null,this.geneLabelMouseout=null,this.nodeObjectMouseover=null,this.nodeObjectMouseout=null,this.reactionObjectMouseover=null,this.reactionObjectMouseout=null,this.bezierDrag=this.emptyBehavior,this.bezierMouseover=null,this.bezierMouseout=null,this.reactionLabelDrag=this.emptyBehavior,this.nodeLabelDrag=this.emptyBehavior,this.dragging=!1}averageLocation(e){const t=[],n=[];for(const r in e){const i=e[r];void 0!==i.x&&t.push(i.x),void 0!==i.y&&n.push(i.y)}return{x:ql(t),y:ql(n)}}showCenter(){const e=this.map.sel.selectAll("#rotation-center").data([0]),t=e.enter().append("g").attr("id","rotation-center");t.append("path").attr("d","M-32 0 L32 0").attr("class","rotation-center-line"),t.append("path").attr("d","M0 -32 L0 32").attr("class","rotation-center-line");const n=t.merge(e);n.attr("transform","translate("+this.center.x+","+this.center.y+")").attr("visibility","visible").on("mouseover",(function(){const e=parseFloat(n.selectAll("path").style("stroke-width"));n.selectAll("path").style("stroke-width",2*e+"px")})).on("mouseout",(function(){n.selectAll("path").style("stroke-width",null)})).call(Ac().on("drag",(e=>{var t,r,i,o;const s=tc(n.attr("transform")),a=[(null!==(r=null===(t=Od())||void 0===t?void 0:t.dx)&&void 0!==r?r:0)+s.translate[0],(null!==(o=null===(i=Od())||void 0===i?void 0:i.dy)&&void 0!==o?o:0)+s.translate[1]];n.attr("transform","translate("+a+")"),this.center={x:a[0],y:a[1]}})))}hideCenter(){this.map.sel.select("#rotation-center").attr("visibility","hidden")}toggleRotationMode(e){this.rotationModeEnabled=void 0===e?!this.rotationModeEnabled:e;const t=this.map.sel.selectAll(".node-circle"),n=this.map.sel.selectAll("#canvas");if(this.rotationModeEnabled){const e=this.map.getSelectedNodes();if(0===Object.keys(e).length)return void console.warn("No selected nodes");this.center=this.averageLocation(e),this.showCenter();const t=this.map,r=Object.keys(e),i=this.map.reactions,o=this.map.nodes,s=this.map.beziers,a=e=>{var t,n;null===(n=null===(t=Od())||void 0===t?void 0:t.sourceEvent)||void 0===n||n.stopPropagation()},l=(n,r,o,a)=>{const l=yd(e,i,s,r,a);t.draw_these_nodes(l.node_ids),t.draw_these_reactions(l.reaction_ids)},c=e=>{},u=(e,n,a)=>{const l={};r.forEach((function(e){l[e]=o[e]}));const c=yd(l,i,s,-n,a);t.draw_these_nodes(c.node_ids),t.draw_these_reactions(c.reaction_ids)},h=(e,n,a)=>{const l={};r.forEach((e=>{l[e]=o[e]}));const c=yd(l,i,s,n,a);t.draw_these_nodes(c.node_ids),t.draw_these_reactions(c.reaction_ids)},d=()=>this.center;this.rotationDrag=this.getGenericAngularDrag(a,l,c,u,h,d,this.map.sel),n.call(this.rotationDrag),this.selectableDrag=this.rotationDrag}else this.hideCenter(),t.on("mousedown.center",null),n.on("mousedown.center",null),n.on("mousedown.drag",null),n.on("touchstart.drag",null),this.rotationDrag=null,this.selectableDrag=null}toggleSelectableClick(e){if(void 0===e&&(e=null==this.selectableMousedown),e){const e=this.map;this.selectableMousedown=e=>{Od().stopPropagation()},this.selectableClick=function(t){Od().stopPropagation(),Od().defaultPrevented||e.select_selectable(this,t,Od().shiftKey)},this.nodeMouseover=function(e){Md(this).style("stroke-width",null);const t=parseFloat(Md(this).style("stroke-width"));Md(this.parentNode).classed("selected")||Md(this).style("stroke-width",3*t+"px")},this.nodeMouseout=function(e){Md(this).style("stroke-width",null)}}else this.selectableMousedown=null,this.selectableClick=null,this.nodeMouseover=null,this.nodeMouseout=null,this.map.sel.select("#nodes").selectAll(".node-circle").style("stroke-width",null)}toggleTextLabelEdit(e){if(void 0===e&&(e=null==this.textEditMousedown),e){const e=this.map;this.textLabelMousedown=function(){if(Od().defaultPrevented)return;const t=tc(Md(this).attr("transform")).translate,n={x:t[0],y:t[1]};e.callback_manager.run("edit_text_label",null,Md(this),n),Od().stopPropagation()},this.textLabelClick=null,this.map.sel.select("#text-labels").selectAll(".label").style("cursor","text"),this.map.sel.on("mousedown.new_text_label",function(e){Od().preventDefault();const t={x:Nd(e)[0],y:Nd(e)[1]};this.map.callback_manager.run("new_text_label",null,t)}.bind(this,this.map.sel.node()))}else this.textLabelMousedown=this.selectableMousedown,this.textLabelClick=this.selectableClick,this.map.sel.select("#text-labels").selectAll(".label").style("cursor",null),this.map.sel.on("mousedown.new_text_label",null),this.map.callback_manager.run("hide_text_label_editor")}toggleSelectableDrag(e){void 0===e&&(e=this.selectableDrag===this.emptyBehavior),e?(this.selectableDrag=this.getSelectableDrag(this.map,this.undoStack),this.bezierDrag=this.getBezierDrag(this.map)):(this.selectableDrag=this.emptyBehavior,this.bezierDrag=this.emptyBehavior)}toggleLabelDrag(e){void 0===e&&(e=this.labelDrag===this.emptyBehavior),e?(this.reactionLabelDrag=this.getReactionLabelDrag(this.map),this.nodeLabelDrag=this.getNodeLabelDrag(this.map)):(this.reactionLabelDrag=this.emptyBehavior,this.nodeLabelDrag=this.emptyBehavior)}toggleLabelMouseover(e){if(void 0===e&&(e=null==this.nodeLabelMouseover),e){const e=e=>t=>{this.dragging||this.map.callback_manager.run("show_tooltip",null,e,t)},t=()=>{this.map.callback_manager.run("delay_hide_tooltip")};this.nodeLabelMouseover=e("node_label"),this.nodeLabelTouch=e("node_label"),this.nodeLabelMouseout=t,this.reactionLabelMouseover=e("reaction_label"),this.reactionLabelTouch=e("reaction_label"),this.reactionLabelMouseout=t,this.geneLabelMouseover=e("gene_label"),this.geneLabelTouch=e("gene_label"),this.geneLabelMouseout=t}else this.nodeLabelMouseover=null,this.nodeLabelTouch=null,this.nodeLabelMouseout=null,this.reactionLabelMouseover=null,this.reactionLabelTouch=null,this.reactionLabelMouseout=null,this.geneLabelMouseover=null,this.geneLabelTouch=null,this.geneLabelMouseout=null}toggleObjectMouseover(e){if(void 0===e&&(e=null==this.nodeObjectMouseover),e){const e=e=>{const t=this;return function(n){if(!t.dragging)if("reaction_object"===e){const r=Nd(this),i=Object.assign({},n,{xPos:r[0],yPos:r[1]});t.map.callback_manager.run("show_tooltip",null,e,i)}else t.map.callback_manager.run("show_tooltip",null,e,n)}},t=()=>{this.map.callback_manager.run("delay_hide_tooltip")};this.nodeObjectMouseover=e("node_object"),this.nodeObjectMouseout=t,this.reactionObjectMouseover=e("reaction_object"),this.reactionObjectMouseout=t}else this.nodeObjectMouseover=null,this.nodeObjectMouseout=null,this.reactionObjectMouseover=null,this.reactionObjectMouseout=null}toggleObjectTouch(e){void 0===e&&(e=null==this.labelTouch),this.objectTouch=e?(e,t)=>{this.dragging||this.map.callback_manager.run("show_tooltip",null,e,t)}:null}toggleBezierDrag(e){void 0===e&&(e=this.bezierDrag===this.emptyBehavior),e?(this.bezierDrag=this.getBezierDrag(this.map),this.bezierMouseover=function(e){Md(this).style("stroke-width","3px")},this.bezierMouseout=function(e){Md(this).style("stroke-width","1px")}):(this.bezierDrag=this.emptyBehavior,this.bezierMouseover=null,this.bezierMouseout=null)}turnOffDrag(e){e.on("mousedown.drag",null),e.on("touchstart.drag",null)}combineNodesAndDraw(e,t){const n=this.map,r=n.nodes[t],i=n.nodes[e],o=[];return r.connected_segments.forEach((r=>{let s=null;try{if(s=n.reactions[r.reaction_id].segments[r.segment_id],void 0===s)throw new Error("undefined segment")}catch(e){return void console.warn("Could not find connected segment "+r.segment_id)}if(s.from_node_id===t)s.from_node_id=e;else{if(s.to_node_id!==t)return void console.error("Segment does not connect to dragged node");s.to_node_id=e}i.connected_segments.push(r),o.push(_l(r))})),n.delete_node_data([t]),n.sel.selectAll(".node-to-combine").classed("node-to-combine",!1),n.draw_everything(),o}getSelectableDrag(e,t){const n=Ac();let r=null,i=null,o=null,s=null,a=null;const l=(t,n)=>{const r=e.text_labels[t];r.x=r.x+n.x,r.y=r.y+n.y},c=e=>{this.dragging=e};n.on("start",(function(t){if(c(!0),Od().sourceEvent.stopPropagation(),i={x:0,y:0},-1===Md(this).attr("class").indexOf("label")){const t=this.parentNode.__data__,n=t.bigg_id,i=this.parentNode;r=setTimeout((()=>{i.parentNode.insertBefore(i,i.parentNode.firstChild)}),200),e.sel.selectAll(".metabolite-circle").on("mouseover.combine",(function(e){e.bigg_id===n&&e.node_id!==t.node_id&&Md(this).classed("node-to-combine",!0)})).on("mouseout.combine",(t=>{t.bigg_id===n&&e.sel.selectAll(".node-to-combine").classed("node-to-combine",!1)}))}})),n.on("drag",(function(t){Md(this.parentNode).classed("selected")||e.select_selectable(this,t);const n={type:"",id:""};-1===Md(this).attr("class").indexOf("label")?(n.type="node",n.id=this.parentNode.__data__.node_id):(n.type="label",n.id=this.__data__.text_label_id);const r=e.get_selected_node_ids(),c=e.get_selected_text_label_ids();o=[],a=[],"node"===n.type&&-1===r.indexOf(n.id)?o.push(n.id):"label"===n.type&&-1===c.indexOf(n.id)?a.push(n.id):(o=r,a=c),s=[];const u={x:Od().dx,y:Od().dy};i=Bl(i,u),o.forEach((t=>{const n=wd(e.nodes[t],t,e.reactions,e.beziers,u);s=yl([s,n.reaction_ids])})),a.forEach((e=>{l(e,u)})),e.draw_these_nodes(o),e.draw_these_reactions(s),e.draw_these_text_labels(a)}));const u=this.combineNodesAndDraw.bind(this);return n.on("end",(function(){if(c(!1),null==o)return i=null,o=null,a=null,s=null,void(r=null);const n=[];if(e.sel.selectAll(".node-to-combine").each((e=>{n.push(e.node_id)})),1===n.length){const r=n[0],o=this.parentNode.__data__.node_id,s=_l(e.nodes[o]),a=u(r,o),l=_l(i);t.push((()=>{e.nodes[o]=s;const t=e.nodes[r],n=[];a.forEach((i=>{const s=e.reactions[i.reaction_id].segments[i.segment_id];s.from_node_id===r?s.from_node_id=o:s.to_node_id===r?s.to_node_id=o:console.error("Segment does not connect to fixed node"),t.connected_segments=t.connected_segments.filter((e=>!(e.reaction_id===i.reaction_id&&e.segment_id===i.segment_id))),-1===n.indexOf(i.reaction_id)&&n.push(i.reaction_id)})),wd(s,o,e.reactions,e.beziers,Sl(l,-1)),e.draw_these_nodes([o]),e.draw_these_reactions(n)}),(()=>{wd(s,o,e.reactions,e.beziers,Sl(l,1)),u(r,o)}))}else{const n=_l(i),r=_l(o),c=_l(a),u=_l(s);t.push((()=>{r.forEach((t=>{wd(e.nodes[t],t,e.reactions,e.beziers,Sl(n,-1))})),c.forEach((e=>{l(e,Sl(n,-1))})),e.draw_these_nodes(r),e.draw_these_reactions(u),e.draw_these_text_labels(c)}),(()=>{r.forEach((t=>{wd(e.nodes[t],t,e.reactions,e.beziers,n)})),c.forEach((e=>{l(e,n)})),e.draw_these_nodes(r),e.draw_these_reactions(u),e.draw_these_text_labels(c)}))}e.sel.selectAll(".metabolite-circle").on("mouseover.combine",null).on("mouseout.combine",null),clearTimeout(r),i=null,o=null,a=null,s=null,r=null})),n}getBezierDrag(e){const t=(t,n,r,i,o)=>{const s=e.reactions[t].segments[n];s[r]=Bl(s[r],o),e.beziers[i].x=s[r].x,e.beziers[i].y=s[r].y};return this.getGenericDrag((e=>{e.dragging=!0}),((n,r,i)=>{t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,r),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])}),(e=>{e.dragging=!1}),((n,r)=>{t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,Sl(r,-1)),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])}),((n,r)=>{t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,r),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])}),this.map.sel)}getReactionLabelDrag(e){const t=(t,n)=>{const r=e.reactions[t];r.label_x=r.label_x+n.x,r.label_y=r.label_y+n.y};return this.getGenericDrag((t=>{e.callback_manager.run("hide_tooltip")}),((n,r,i)=>{t(n.reaction_id,r),e.draw_these_reactions([n.reaction_id])}),(()=>{}),((n,r)=>{t(n.reaction_id,Sl(r,-1)),e.draw_these_reactions([n.reaction_id])}),((n,r)=>{t(n.reaction_id,r),e.draw_these_reactions([n.reaction_id])}),this.map.sel)}getNodeLabelDrag(e){const t=(t,n)=>{const r=e.nodes[t];r.label_x=r.label_x+n.x,r.label_y=r.label_y+n.y};return this.getGenericDrag((t=>{e.callback_manager.run("hide_tooltip")}),((n,r,i)=>{t(n.node_id,r),e.draw_these_nodes([n.node_id])}),(()=>{}),((n,r)=>{t(n.node_id,Sl(r,-1)),e.draw_these_nodes([n.node_id])}),((n,r)=>{t(n.node_id,r),e.draw_these_nodes([n.node_id])}),this.map.sel)}getGenericDrag(e,t,n,r,i,o){const s=Ac(),a=this.undoStack,l=o.node();let c=null;return s.on("start",(t=>{this.dragging=!0,Od().sourceEvent.stopPropagation(),c={x:0,y:0},e(t)})),s.on("drag",(e=>{const n={x:Od().dx,y:Od().dy},r={x:Nd(l)[0],y:Nd(l)[1]};c=Bl(c,n),t(e,n,c,r)})),s.on("end",(e=>{this.dragging=!1;const t=_l(e),o=_l(c),s={x:Nd(l)[0],y:Nd(l)[1]};a.push((function(){r(t,o,s)}),(function(){i(t,o,s)})),n(e)})),s}getGenericAngularDrag(e,t,n,r,i,o,s){const a=Ac(),l=this.undoStack,c=s.node();let u=0;return a.on("start",(t=>{this.dragging=!0,Od().sourceEvent.stopPropagation(),u=0,e(t)})),a.on("drag",(e=>{const n={x:Od().dx,y:Od().dy},r={x:Nd(c)[0],y:Nd(c)[1]},i=o(),s=Rl(n,r,i);u+=s,t(e,s,u,i)})),a.on("end",(e=>{this.dragging=!1;const t=_l(e),s=u,a=_l(o());l.push((()=>r(t,s,a)),(()=>i(t,s,a))),n(e)})),a}}const Dd={GaBuGeRd:[{type:"min",color:"#c8c8c8",size:12},{type:"value",value:.01,color:"#9696ff",size:16},{type:"value",value:20,color:"#209123",size:20},{type:"max",color:"#ff0000",size:25}],GaBuRd:[{type:"min",color:"#c8c8c8",size:12},{type:"median",color:"#9696ff",size:20},{type:"max",color:"#ff0000",size:25}],RdYlBu:[{type:"min",color:"#d7191c",size:12},{type:"median",color:"#ffffbf",size:20},{type:"max",color:"#2c7bb6",size:25}],GeGaRd:[{type:"min",color:"#209123",size:25},{type:"value",value:0,color:"#c8c8c8",size:12},{type:"max",color:"#ff0000",size:25}],WhYlRd:[{type:"min",color:"#fffaf0",size:20},{type:"median",color:"#f1c470",size:30},{type:"max",color:"#800000",size:40}]};function Id(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var jd,Pd;const Fd=(1===(jd=Id).length&&(Pd=jd,jd=function(e,t){return Id(Pd(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;jd(e[i],t)<0?n=i+1:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;jd(e[i],t)>0?r=i:n=i+1}return n}}).right;var Ld=Array.prototype,Ud=(Ld.slice,Ld.map,Math.sqrt(50)),Rd=Math.sqrt(10),Wd=Math.sqrt(2);function Vd(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ud?10:o>=Rd?5:o>=Wd?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ud?10:o>=Rd?5:o>=Wd?2:1)}var Yd=Array.prototype,Hd=Yd.map,qd=Yd.slice;function Gd(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=Zd(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=o[n](e);return s}}function Qd(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xd(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Zd(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function Kd(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function Zd(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?Mh(t):("number"===i?Fu:"string"===i?(n=mh(t))?(t=n,Th):Ph:t instanceof mh?Th:t instanceof Date?Qd:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Gd:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Xd:Fu:Kd))(e,t)}function Jd(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function $d(e){return+e}var ep=[0,1];function tp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=t,function(){return n});var n}function np(e,t,n,r){var i=e[0],o=e[1],s=t[0],a=t[1];return o<i?(i=n(o,i),s=r(a,s)):(i=n(i,o),s=r(s,a)),function(e){return s(i(e))}}function rp(e,t,n,r){var i=Math.min(e.length,t.length)-1,o=new Array(i),s=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)o[a]=n(e[a],e[a+1]),s[a]=r(t[a],t[a+1]);return function(t){var n=Fd(e,t,1,i)-1;return s[n](o[n](t))}}function ip(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,o,s,a=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(s=Vd(e,t,n))||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),o=new Array(i=Math.ceil(t-e+1));++a<i;)o[a]=(e+a)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),o=new Array(i=Math.ceil(e-t+1));++a<i;)o[a]=(e-a)/s;return r&&o.reverse(),o}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return function(e,t,n){var r,i=e[0],o=e[e.length-1],s=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ud?i*=10:o>=Rd?i*=5:o>=Wd&&(i*=2),t<e?-i:i}(i,o,null==t?10:t);switch((n=Cc(null==n?",f":n)).type){case"s":var a=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(yc(t)/3)))-yc(Math.abs(e)))}(s,a))||(n.precision=r),Nc(n,a);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yc(t)-yc(e))+1}(s,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(e){return Math.max(0,-yc(Math.abs(e)))}(s))||(n.precision=r-2*("%"===n.type))}return Mc(n)}(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,s=i.length-1,a=i[o],l=i[s];return l<a&&(r=a,a=l,l=r,r=o,o=s,s=r),(r=Vd(a,l,n))>0?r=Vd(a=Math.floor(a/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=Vd(a=Math.ceil(a*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[o]=Math.floor(a/r)*r,i[s]=Math.ceil(l/r)*r,t(i)):r<0&&(i[o]=Math.ceil(a*r)/r,i[s]=Math.floor(l*r)/r,t(i)),e},e}function op(){var e=function(e,t){var n,r,i,o=ep,s=ep,a=Zd,l=!1;function c(){return n=Math.min(o.length,s.length)>2?rp:np,r=i=null,u}function u(t){return(r||(r=n(o,s,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,a)))(+t)}return u.invert=function(e){return(i||(i=n(s,o,tp,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},u.domain=function(e){return arguments.length?(o=Hd.call(e,$d),c()):o.slice()},u.range=function(e){return arguments.length?(s=qd.call(e),c()):s.slice()},u.rangeRound=function(e){return s=qd.call(e),a=Jd,c()},u.clamp=function(e){return arguments.length?(l=!!e,c()):l},u.interpolate=function(e){return arguments.length?(a=e,c()):a},c()}(tp,Fu);return e.copy=function(){return t=e,op().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp());var t},ip(e)}function sp(e){return e.match(/.{6}/g).map((function(e){return"#"+e}))}sp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),sp("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),sp("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),sp("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var ap=Math.PI/180,lp=180/Math.PI,cp=-.14861,up=1.78277,hp=-.29227,dp=-.90649,pp=1.97294,fp=pp*dp,gp=pp*up,mp=up*hp-dp*cp;function bp(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Ap)return new Ap(e.h,e.s,e.l,e.opacity);e instanceof yh||(e=_h(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(mp*r+fp*t-gp*n)/(mp+fp-gp),o=r-i,s=(pp*(n-i)-hp*o)/dp,a=Math.sqrt(s*s+o*o)/(pp*i*(1-i)),l=a?Math.atan2(s,o)*lp-120:NaN;return new Ap(l<0?l+360:l,a,i,e.opacity)}(e):new Ap(e,t,n,null==r?1:r)}function Ap(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function _p(e){return function t(n){function r(t,r){var i=e((t=bp(t)).h,(r=bp(r)).h),o=Oh(t.s,r.s),s=Oh(t.l,r.l),a=Oh(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=s(Math.pow(e,n)),t.opacity=a(e),t+""}}return n=+n,r.gamma=t,r}(1)}Ju(Ap,bp,$u(eh,{brighter:function(e){return e=null==e?nh:Math.pow(nh,e),new Ap(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?th:Math.pow(th,e),new Ap(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*ap,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new yh(255*(t+n*(cp*r+up*i)),255*(t+n*(hp*r+dp*i)),255*(t+n*(pp*r)),this.opacity)}})),_p((function(e,t){var n=t-e;return n?Nh(e,n>180||n<-180?n-360*Math.round(n/360):n):Mh(isNaN(e)?t:e)}));var vp=_p(Oh);function yp(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}vp(bp(300,.5,0),bp(-240,.5,1)),vp(bp(-100,.75,.35),bp(80,1.5,.8)),vp(bp(260,.75,.35),bp(80,1.5,.8)),bp(),yp(sp("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),yp(sp("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),yp(sp("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),yp(sp("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));class wp{constructor(){this.x=op(),this.y=op(),this.x_size=op(),this.y_size=op(),this.size=op(),this.reaction_color=op().clamp(!0),this.reaction_size=op().clamp(!0),this.metabolite_color=op().clamp(!0),this.metabolite_size=op().clamp(!0)}connectToSettings(e,t,n){["reaction","metabolite"].forEach((r=>{const i=`${r}_scale`,o=`${r}_scale_preset`,s=e.get(o),a=e.get(i);s&&a&&a!==Dd[s]?(console.warn(`Both ${i} and ${o} are defined. Ignoring ${o}. Set ${o} to "false" to hide this warning.`),e.set(o,null)):s?e.set(i,Dd[s]):a||console.error(`Must provide a ${i} or ${o}`),e.get(i)&&e.get(i).length<2?console.error(`Bad value for option ${i}. Scales must have at least 2 points.`):this.setScale(r,a,n),e.streams[i].onValue((t=>{t&&t!==Dd[e.get(o)]&&e.set(o,null),this.setScale(r,t,n)})),e.streams[o].onValue((t=>{t&&e.set(i,Dd[t])})),t.callback_manager.set(`calc_data_stats__${r}`,(t=>{t&&this.setScale(r,e.get(`${r}_scale`),n)}))}))}sortScale(e,t){const n=e.map((e=>{let n;if(e.type in t)n=t[e.type];else{if("value"!==e.type)throw new Error("Bad domain type "+e.type);n=e.value}return{v:n,color:e.color,size:e.size}})).sort(((e,t)=>e.v-t.v));return{domain:n.map((e=>e.v)),color_range:n.map((e=>e.color)),size_range:n.map((e=>e.size))}}setScale(e,t,n){"reaction"===e?this.setReactionScale(t,n):this.setMetaboliteScale(t,n)}setReactionScale(e,t){const n=t().reaction;if(null!==n){const t=this.sortScale(e,n);this.reaction_color.domain(t.domain),this.reaction_size.domain(t.domain),this.reaction_color.range(t.color_range),this.reaction_size.range(t.size_range)}}setMetaboliteScale(e,t){const n=t().metabolite;if(null!==n){const t=this.sortScale(e,n);this.metabolite_color.domain(t.domain),this.metabolite_size.domain(t.domain),this.metabolite_color.range(t.color_range),this.metabolite_size.range(t.size_range)}}}function xp(e,t){return e+1>t-1?0:e+1}class Cp{constructor(){this.stack=Array(40),this.current=-1,this.oldest=-1,this.newest=-1,this.endOfStack=!0,this.topOfStack=!0}push(e,t){return this.current=xp(this.current,this.stack.length),this.endOfStack?this.oldest=this.current:this.oldest===this.current&&(this.oldest=xp(this.oldest,this.stack.length)),this.stack[this.current]={undo:e,redo:t},this.newest=this.current,this.topOfStack=!0,this.endOfStack=!1,{do:()=>t()}}undo(){if(this.endOfStack)return console.warn("End of stack.");var e,t;this.stack[this.current].undo(),this.current===this.oldest?this.endOfStack=!0:this.current=(e=this.current,t=this.stack.length,e-1<0?t-1:e-1),this.topOfStack=!1}redo(){if(this.topOfStack)return console.warn("Top of stack.");this.endOfStack||(this.current=xp(this.current,this.stack.length)),this.stack[this.current].redo(),this.current===this.newest&&(this.topOfStack=!0),this.endOfStack=!1}}function Ep(e,t){if(!t)return e;const n=Hn.isArray(e)?e:[e],r=n.reduce(((e,t)=>{const n=t.replace("ctrl+","meta+");return n!==t&&e.push(n),e}),n.slice());return r.length===n.length?e:r}class Bp{constructor(e={},t=[],n=null,r=!1,i=null){this.assignedKeys=e,this.inputList=t,this.mousetrap=n?new(gs())(n):new(gs()),this.ctrlEqualsCmd=r,this.mousetrap.stopCallback=()=>!1,this.escapeQueue=[],this.removeEscapeListener=null,this.settings=i,this.enabled=!0,this.update()}update(){if(this.mousetrap.reset(),this.enabled)for(const e in this.assignedKeys){const t=this.assignedKeys[e];if(!t.key)continue;const n=Ep(t.key,this.ctrlEqualsCmd);t.inputList=this.inputList,this.mousetrap.bind(n,(e=>{var n;if(t.requires&&!(null===(n=this.settings)||void 0===n?void 0:n.get(t.requires)))return;let r=!1;if(t.ignoreWithInput)for(let e=0,n=t.inputList.length;e<n;e++){const n=t.inputList[e],i=Hn.isFunction(n)?n():n;if(null!==i&&i.is_visible()){r=!0;break}}r||(t.fn?t.fn.call(t.target):console.warn("No function for key: "+t.key),e.preventDefault())}),"keydown")}}toggle(e){Hn.isUndefined(e)&&(e=!this.enabled),this.enabled=e,this.update()}addEnterListener(e,t){return this.addKeyListener("enter",e,t)}_tryDropEscapeListener(){0===this.escapeQueue.length&&this.removeEscapeListener&&(this.removeEscapeListener(),this.removeEscapeListener=null)}addEscapeListener(e){return null==this.removeEscapeListener&&(this.removeEscapeListener=this.addKeyListener("escape",(()=>{this.escapeQueue.length>0&&this.escapeQueue.pop()(),this._tryDropEscapeListener()}))),this.escapeQueue.push(e),()=>{const t=this.escapeQueue.indexOf(e);t>-1&&this.escapeQueue.splice(t,1),this._tryDropEscapeListener()}}addKeyListener(e,t,n=!1){const r=this.mousetrap.unbind.bind(this.mousetrap,e);return this.mousetrap.bind(Ep(e,this.ctrlEqualsCmd),(e=>{e.preventDefault(),t(),n&&r()})),r}}class kp{constructor(e,t){this.mouseNode=null,this.selection=e,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.resizeEnabled=!0,this.callbackManager=new cu,this.setup()}toggleResize(e){Hn.isUndefined(e)&&(e=!this.resizeEnabled),e?this.selection.selectAll(".drag-rect").style("pointer-events","auto"):this.selection.selectAll(".drag-rect").style("pointer-events","none")}setup(){const e=100,t=10,n=this.selection.append("g").classed("canvas-group",!0).data([{x:this.x,y:this.y}]),r=()=>{ga.sourceEvent.stopPropagation()},i=(e,t,n)=>{const r=tc(n).translate;return null!==e&&(r[0]=e),null!==t&&(r[1]=t),"translate("+r+")"},o=n.append("rect").attr("id","mouse-node").attr("width",this.width*t).attr("height",this.height*t).attr("transform","translate("+[this.x-this.width*t/2,this.y-this.height*t/2]+")").attr("pointer-events","all");this.mouseNode=o;const s=n.append("rect").attr("id","canvas").attr("width",this.width).attr("height",this.height).attr("transform","translate("+[this.x,this.y]+")"),a=Ac().on("start",r).on("drag",(n=>{const r=n.x;n.x=Math.min(n.x+this.width-50,ga.x),this.x=n.x,this.width=this.width+(r-n.x),l.attr("transform",(e=>i(e.x-50,null,l.attr("transform")))),o.attr("transform",(e=>i(e.x,null,o.attr("transform")))).attr("width",this.width*t),s.attr("transform",(e=>i(e.x,null,s.attr("transform")))).attr("width",this.width),d.attr("transform",(e=>i(e.x+50,null,d.attr("transform")))).attr("width",this.width-e),f.attr("transform",(e=>i(e.x+50,null,f.attr("transform")))).attr("width",this.width-e),this.callbackManager.run("resize")})),l=n.append("rect").classed("drag-rect",!0).attr("transform",(e=>"translate("+[e.x-50,e.y+50]+")")).attr("height",this.height-e).attr("id","dragleft").attr("width",e).attr("cursor","ew-resize").classed("resize-rect",!0).call(a),c=Ac().on("start",r).on("drag",(n=>{ga.sourceEvent.stopPropagation();const r=Math.max(n.x+50,n.x+this.width+ga.dx);this.width=r-n.x,u.attr("transform",(e=>i(r-50,null,u.attr("transform")))),o.attr("width",this.width*t),s.attr("width",this.width),d.attr("width",this.width-e),f.attr("width",this.width-e),this.callbackManager.run("resize")})),u=n.append("rect").classed("drag-rect",!0).attr("transform",(e=>"translate("+[e.x+this.width-50,e.y+50]+")")).attr("id","dragright").attr("height",this.height-e).attr("width",e).attr("cursor","ew-resize").classed("resize-rect",!0).call(c),h=Ac().on("start",r).on("drag",(n=>{ga.sourceEvent.stopPropagation();const r=n.y;n.y=Math.min(n.y+this.height-50,ga.y),this.y=n.y,this.height=this.height+(r-n.y),d.attr("transform",(e=>i(null,e.y-50,d.attr("transform")))),o.attr("transform",(e=>i(null,e.y,o.attr("transform")))).attr("width",this.height*t),s.attr("transform",(e=>i(null,e.y,s.attr("transform")))).attr("height",this.height),l.attr("transform",(e=>i(null,e.y+50,l.attr("transform")))).attr("height",this.height-e),u.attr("transform",(e=>i(null,e.y+50,u.attr("transform")))).attr("height",this.height-e),this.callbackManager.run("resize")})),d=n.append("rect").classed("drag-rect",!0).attr("transform",(e=>"translate("+[e.x+50,e.y-50]+")")).attr("height",e).attr("width",this.width-e).attr("cursor","ns-resize").classed("resize-rect",!0).call(h),p=Ac().on("start",r).on("drag",(n=>{ga.sourceEvent.stopPropagation();const r=Math.max(n.y+50,n.y+this.height+ga.dy);this.height=r-n.y,f.attr("transform",(e=>i(null,r-50,f.attr("transform")))),o.attr("height",this.height*t),s.attr("height",this.height),l.attr("height",this.height-e),u.attr("height",this.height-e),this.callbackManager.run("resize")})),f=n.append("rect").classed("drag-rect",!0).attr("transform",(e=>"translate("+[e.x+50,e.y+this.height-50]+")")).attr("height",e).attr("width",this.width-e).attr("cursor","ns-resize").classed("resize-rect",!0).call(p)}sizeAndLocation(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}class Sp{constructor(){this.index={}}insert(e,t,n,r){if(!n&&e in this.index)throw new Error("id is already in the index");if(r&&(!("name"in t)||!("data"in t)))throw new Error("malformed record");this.index[e]=t}remove(e){return e in this.index&&(delete this.index[e],!0)}find(e){const t=RegExp(e,"i"),n=[];for(const e in this.index){const r=this.index[e];t.exec(r.name)&&n.push(r.data)}return n}}const zp="-*-*-";function Mp(e,t){const n=e=>e>0?1:-1,r={};for(const t in e.reactions){const i=e.reactions[t];for(const e of i.metabolites){if(e.coefficient>0&&!i.reversibility)continue;r[e.bigg_id]||(r[e.bigg_id]={});const t=n(e.coefficient);i.metabolites.filter((r=>r.bigg_id!==e.bigg_id&&n(r.coefficient)!==t)).forEach((t=>{r[e.bigg_id][t.bigg_id]={coefficient:t.coefficient,reaction_id:i.reaction_id}}))}}const i=new Set;for(const e in null==r[t]?{}:r[t])i.add(`${r[t][e].reaction_id}${zp}${e}`);return Array.from(i)}function Np(e,t){const n=e=>e>0?1:-1,r={};for(const t in e.reactions){const i=e.reactions[t];for(const e of i.metabolites){if(e.coefficient>0&&!i.reversibility)continue;r[e.bigg_id]||(r[e.bigg_id]={});const t=n(e.coefficient);i.metabolites.filter((r=>r.bigg_id!==e.bigg_id&&n(r.coefficient)!==t)).forEach((t=>{r[e.bigg_id][t.bigg_id]={coefficient:t.coefficient,reaction_id:i.reaction_id}}))}}const i=new Set;for(const e in r){if(!r[e][t])continue;const n=r[e][t];i.add(`${n.reaction_id}${zp}${e}`)}return Array.from(i)}function Op(e,t,n,r){const i=e.reactions[r];if(!i)return;const o=Object.values(e.nodes).find((e=>e.bigg_id===t&&e.connected_segments.map((e=>e.reaction_id)).includes(r))),s=Object.values(e.nodes).find((e=>e.bigg_id===n&&e.connected_segments.map((e=>e.reaction_id)).includes(r))),a=o?o.node_id:null,l=s?s.node_id:null;if(!a||!l)return;const c={};for(const e of Object.keys(i.segments)){const t=i.segments[e];c[t.from_node_id]||(c[t.from_node_id]={}),c[t.to_node_id]||(c[t.to_node_id]={}),c[t.from_node_id][t.to_node_id]=e,c[t.to_node_id][t.from_node_id]=e}const u={},h={},d={};Object.keys(c).forEach((e=>h[e]=1/0)),h[a]=0;const p=[a];for(;p.length>0;){const e=p.sort(((e,t)=>h[e]-h[t]))[0];if(p.splice(0,1),!u[e]){if(u[e]=!0,e===l)break;for(const t of Object.keys(c[e])){const n=h[e]+1;n<h[t]&&(h[t]=n,d[t]={nodeId:e,segmentId:c[e][t]},p.push(t))}}}const f=[];let g={nodeId:l,segmentId:null};for(;g;)f.unshift(g.segmentId),g=d[g.nodeId];return f.filter(Boolean)}function Tp(e){return function(t){return e(...t)}}class Dp{constructor(e,t,n,r,i,o,s=null,a=!1,l="",c="",u=""){if(this.last_action=null,this.shortestPathInfo=null,this.outGoingInfo=null,this.inGoingInfo=null,null==s){const e=r.get_size();s={x:-e.width,y:-e.height,width:3*e.width,height:3*e.height}}l=Hn.isUndefined(l)||null==l||""===l?"new_map":String(l),c=Hn.isUndefined(c)||null==c||""===c?Kl():String(c),u=Hn.isUndefined(u)||null==u?"":String(u),this.callback_manager=new cu,this.svg=e,this.defs=dl(e,t),this.canvas=new kp(n,s),this.setup_containers(n),this.sel=n,this.zoomContainer=r,this.settings=i,this.cobra_model=o,this.largest_ids={reactions:-1,nodes:-1,segments:-1,text_labels:-1},this.undo_stack=new Cp,this.behavior=new Td(this,this.undo_stack),this.draw=new Ad(this.behavior,this.settings,this),this.key_manager=new Bp,this.key_manager.settings=i,this.key_manager.ctrlEqualsCmd=!0,this.enable_search=a,this.search_index=new Sp,this.map_name=l,this.map_id=c,this.map_description=u,this.beziers_enabled=!1,this.has_data_on_reactions=!1,this.has_data_on_nodes=!1,this.imported_reaction_data=null,this.imported_metabolite_data=null,this.imported_gene_data=null,this.nodes={},this.reactions={},this.beziers={},this.text_labels={},this.apply_reaction_data_to_map(null),this.apply_metabolite_data_to_map(null),this.apply_gene_data_to_map(null),this.scale=new wp,this.scale.connectToSettings(this.settings,this,this.get_data_statistics.bind(this)),this.rotation_on=!1}static from_data(e,t,n,r,i,o,s,a=!1){const l=e[1].canvas,c=e[0].map_name,u=e[0].map_id,h=e[0].map_description.replace(/(\nLast Modified.*)+$/g,"")+"\nLast Modified "+new Date(Date.now()).toString(),d=new Dp(t,n,r,i,o,s,l,a,c,u,h);d.reactions=e[1].reactions,d.nodes=e[1].nodes,d.text_labels=e[1].text_labels;for(const e in d.nodes){const t=d.nodes[e];if(t.connected_segments=[],a){if("metabolite"!==t.node_type)continue;d.search_index.insert("n"+e,{name:t.bigg_id,data:{type:"metabolite",node_id:e}}),d.search_index.insert("n_name"+e,{name:t.name,data:{type:"metabolite",node_id:e}})}}for(const e in d.reactions){const t=d.reactions[e];if(a){d.search_index.insert("r"+e,{name:t.bigg_id,data:{type:"reaction",reaction_id:e}}),d.search_index.insert("r_name"+e,{name:t.name,data:{type:"reaction",reaction_id:e}});for(const n in t.genes){const r=t.genes[n];d.search_index.insert("r"+e+"_g"+n,{name:r.bigg_id,data:{type:"reaction",reaction_id:e}}),d.search_index.insert("r"+e+"_g_name"+n,{name:r.name,data:{type:"reaction",reaction_id:e}})}}const n=[];for(const r in t.segments){const i=t.segments[r];if(i.reversibility=t.reversibility,!(i.from_node_id in d.nodes)||!(i.to_node_id in d.nodes)){console.warn("Bad node references in segment "+r+". Deleting segment."),n.push(r);continue}const o=d.nodes[i.from_node_id],s=d.nodes[i.to_node_id];t.metabolites.forEach((function(e){e.bigg_id===o.bigg_id?i.from_node_coefficient=e.coefficient:e.bigg_id===s.bigg_id&&(i.to_node_coefficient=e.coefficient)})),[o,s].forEach((function(t){t.connected_segments.push({segment_id:r,reaction_id:e})}));const a=d.nodes[i.from_node_id],l=d.nodes[i.to_node_id];if("metabolite"==a.node_type||"metabolite"==l.node_type){const e=Bl(a,Sl(kl(l,a),.5));null==i.b1&&(i.b1=e),null==i.b2&&(i.b2=e)}}n.forEach((function(e){delete t.segments[e]}))}if(a)for(const e in d.text_labels){const t=d.text_labels[e];d.search_index.insert("l"+e,{name:t.text,data:{type:"text_label",text_label_id:e}})}d.beziers=zd(d.reactions),d.largest_ids.reactions=f(d.reactions),d.largest_ids.nodes=f(d.nodes),d.largest_ids.text_labels=f(d.text_labels);let p=0;for(const e in d.reactions)p=f(d.reactions[e].segments,p);return d.largest_ids.segments=p,d.apply_reaction_data_to_map(null),d.apply_metabolite_data_to_map(null),d.apply_gene_data_to_map(null),d;function f(e,t){return Hn.isUndefined(t)&&(t=0),Hn.isUndefined(e)?t:Math.max.apply(null,Object.keys(e).map((function(e){return parseInt(e)})).concat([t]))}}setup_containers(e){e.append("g").attr("id","reactions"),e.append("g").attr("id","nodes"),e.append("g").attr("id","beziers"),e.append("g").attr("id","text-labels")}reset_containers(){this.sel.select("#reactions").selectAll(".reaction").remove(),this.sel.select("#nodes").selectAll(".node").remove(),this.sel.select("#beziers").selectAll(".bezier").remove(),this.sel.select("#text-labels").selectAll(".text-label").remove()}set_status(e,t){this.callback_manager.run("set_status",null,e),this._status_timer&&clearTimeout(this._status_timer),this._status_timer=null,void 0!==t&&(this._status_timer=setTimeout((()=>{this.callback_manager.run("set_status",null,"")}),t))}clearMapData(){this.reactions={},this.beziers={},this.nodes={},this.text_labels={},this.map_name="new_map",this.map_id=Kl(),this.map_description=""}has_cobra_model(){return null!==this.cobra_model}draw_everything(){this.draw_all_reactions(!0,!0),this.draw_all_nodes(!0),this.draw_all_text_labels(),this.unhighlightShortestPaths()}draw_all_reactions(e,t){Hn.isUndefined(e)&&(e=!0),Hn.isUndefined(t)&&(t=!0);const n=[];for(const e in this.reactions)n.push(e);this.draw_these_reactions(n,!1),e&&this.beziers_enabled&&this.draw_all_beziers(),t&&this.clear_deleted_reactions(e)}draw_these_reactions(e,t){Hn.isUndefined(t)&&(t=!0);const n=El(this.reactions,e);if(pl(this.sel,"#reactions",".reaction",n,"reaction_id",this.draw.create_reaction.bind(this.draw),(e=>this.draw.update_reaction(e,this.scale,this.cobra_model,this.nodes,this.defs,this.has_data_on_reactions))),t){const e=function(e){const t=[];for(const n in e){const r=e[n];for(const e in r.segments){const n=r.segments[e];["b1","b2"].forEach((function(r){null!==n[r]&&t.push(kd(e,r))}))}}return t}(n);this.draw_these_beziers(e)}}clear_deleted_reactions(e){Hn.isUndefined(e)&&(e=!0),pl(this.sel,"#reactions",".reaction",this.reactions,"reaction_id",null,(function(e){fl(e,".segment-group","segments","segment_id",null,null,(function(e){e.remove()}))}),(function(e){e.remove()})),!0===e&&this.clear_deleted_beziers()}draw_all_nodes(e){null==e&&(e=!0);const t=[];for(const e in this.nodes)t.push(e);this.draw_these_nodes(t),e&&this.clear_deleted_nodes()}draw_these_nodes(e){const t=El(this.nodes,e);pl(this.sel,"#nodes",".node",t,"node_id",(e=>this.draw.create_node(e,this.nodes,this.reactions)),(e=>this.draw.update_node(e,this.scale,this.has_data_on_nodes,this.behavior.selectableMousedown,this.behavior.selectableClick,this.behavior.nodeMouseover,this.behavior.nodeMouseout,this.behavior.selectableDrag,this.behavior.nodeLabelDrag)))}clear_deleted_nodes(){pl(this.sel,"#nodes",".node",this.nodes,"node_id",null,null,(function(e){e.remove()}))}draw_all_text_labels(){this.draw_these_text_labels(Object.keys(this.text_labels)),this.clear_deleted_text_labels()}draw_these_text_labels(e){const t=El(this.text_labels,e);pl(this.sel,"#text-labels",".text-label",t,"text_label_id",this.draw.create_text_label.bind(this.draw),this.draw.update_text_label.bind(this.draw))}clear_deleted_text_labels(){pl(this.sel,"#text-labels",".text-label",this.text_labels,"text_label_id",null,null,(function(e){e.remove()}))}draw_all_beziers(){const e=[];for(const t in this.beziers)e.push(t);this.draw_these_beziers(e),this.clear_deleted_beziers()}draw_these_beziers(e){const t=El(this.beziers,e);pl(this.sel,"#beziers",".bezier",t,"bezier_id",this.draw.create_bezier.bind(this.draw),(e=>this.draw.update_bezier(e,this.beziers_enabled,this.behavior.bezierDrag,this.behavior.bezierMouseover,this.behavior.bezierMouseout,this.nodes,this.reactions)))}clear_deleted_beziers(){pl(this.sel,"#beziers",".bezier",this.beziers,"bezier_id",null,null,(function(e){e.remove()}))}show_beziers(){this.toggle_beziers(!0)}hide_beziers(){this.toggle_beziers(!1)}toggle_beziers(e){Hn.isUndefined(e)?this.beziers_enabled=!this.beziers_enabled:this.beziers_enabled=e,this.draw_all_beziers(),this.callback_manager.run("toggle_beziers",null,this.beziers_enabled)}apply_reaction_data_to_map(e,t){const n=this.settings.get("reaction_styles"),r=this.settings.get("reaction_compare_style"),i=ru(this.reactions,e,n,r,t);return this.has_data_on_reactions=i,this.imported_reaction_data=i?e:null,this.calc_data_stats("reaction")}apply_metabolite_data_to_map(e,t){const n=this.settings.get("metabolite_styles"),r=this.settings.get("metabolite_compare_style"),i=iu(this.nodes,e,n,r,t);return this.has_data_on_nodes=i,this.imported_metabolite_data=i?e:null,this.calc_data_stats("metabolite")}apply_gene_data_to_map(e,t){const n=this.settings.get("reaction_styles"),r=this.settings.get("reaction_compare_style"),i=this.settings.get("identifiers_on_map"),o=this.settings.get("and_method_in_gene_reaction_rule"),s=ou(this.reactions,e,n,i,r,o,t);return this.has_data_on_reactions=s,this.imported_gene_data=s?e:null,this.calc_data_stats("reaction")}get_data_statistics(){return this.data_statistics}calc_data_stats(e){if(-1===["reaction","metabolite"].indexOf(e))throw new Error("Bad type "+e);this.data_statistics?e in this.data_statistics||(this.data_statistics[e]=null):(this.data_statistics={},this.data_statistics[e]=null);const t=[];if("metabolite"===e)for(const e in this.nodes){const n=this.nodes[e];Hn.isUndefined(n.data)?console.error("metabolite missing "):null!==n.data&&t.push(n.data)}else if("reaction"==e)for(const e in this.reactions){const n=this.reactions[e];Hn.isUndefined(n.data)?console.error("reaction data missing "):null!==n.data&&t.push(n.data)}if(0===t.length){const t=null==this.data_statistics[e];return this.data_statistics[e]=null,"reaction"===e?this.callback_manager.run("calc_data_stats__reaction",null,!t):this.callback_manager.run("calc_data_stats__metabolite",null,!t),!t}null==this.data_statistics[e]&&(this.data_statistics[e]={});let n=!0;const r=Ql(t);if([["min",Tp(Math.min)],["max",Tp(Math.max)],["mean",ql],["Q1",function(){return r[0]}],["median",function(){return r[1]}],["Q3",function(){return r[2]}]].forEach((r=>{let i;const o=r[0];i=0===t.length?null:(0,r[1])(t),i!=this.data_statistics[e][o]&&(n=!1),this.data_statistics[e][o]=i})),this.data_statistics[e].min===this.data_statistics[e].max&&null!==this.data_statistics[e].min){const t=this.data_statistics[e].min,n=this.data_statistics[e].max;this.data_statistics[e].min=t-1-.1*Math.abs(t),this.data_statistics[e].max=n+1+.1*Math.abs(n)}return"reaction"===e?this.callback_manager.run("calc_data_stats__reaction",null,!n):this.callback_manager.run("calc_data_stats__metabolite",null,!n),!n}get_coords_for_node(e){const t=this.nodes[e];return t?{x:t.x,y:t.y}:null}get_selected_node_ids(){const e=[];return this.sel.select("#nodes").selectAll(".selected").each((t=>{e.push(t.node_id)})),e}getSelectedNodes(){const e={};return this.sel.select("#nodes").selectAll(".selected").each((t=>{e[t.node_id]=this.nodes[t.node_id]})),e}get_selected_text_label_ids(){const e=[];return this.sel.select("#text-labels").selectAll(".selected").each((function(t){e.push(t.text_label_id)})),e}get_selected_text_labels(){const e={};return this.sel.select("#text-labels").selectAll(".selected").each((t=>{e[t.text_label_id]=this.text_labels[t.text_label_id]})),e}select_all(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",!0)}select_none(){this.sel.selectAll(".selected").classed("selected",!1)}invert_selection(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",(function(){return!Sa(this).classed("selected")}))}select_metabolite_with_id(e){let t,n;this.deselect_text_labels(),this.sel.select("#nodes").selectAll(".node").classed("selected",(r=>{const i=String(r.node_id)==String(e);return i&&(n=r,t={x:r.x,y:r.y}),i})),this.sel.selectAll(".start-reaction-target").style("visibility","hidden"),this.callback_manager.run("select_metabolite_with_id",null,n,t)}select_selectable(e,t,n){n=!Hn.isUndefined(n)&&n;const r=this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label");let i;i=-1==Sa(e).attr("class").indexOf("text-label")?e.parentNode:e,n?Sa(i).classed("selected",!Sa(i).classed("selected")):(r.classed("selected",!1),Sa(i).classed("selected",!0));const o=this.sel.select("#nodes").selectAll(".selected");let s,a,l=0;o.each((function(e){a=e,s={x:e.x,y:e.y},l++})),this.callback_manager.run("select_selectable",null,l,a,s)}select_single_node(){let e=null;return this.sel.select("#nodes").selectAll(".selected").classed("selected",(function(t,n){return 0===n&&(e=t,!0)})),e}deselect_nodes(){this.sel.select("#nodes").selectAll(".node").classed("selected",!1),this.callback_manager.run("deselect_nodes")}select_text_label(e,t){let n;this.deselect_nodes(),this.sel.select("#text-labels").selectAll(".text-label").classed("selected",(function(e){return t===e})),this.sel.select("#text-labels").selectAll(".selected").each((function(e){n={x:e.x,y:e.y}})),this.callback_manager.run("select_text_label")}deselect_text_labels(){this.sel.select("#text-labels").selectAll(".text-label").classed("selected",!1)}align_vertical(){return this._align(!1)}align_horizontal(){return this._align(!0)}_align(e){const t=this.getSelectedNodes(),n=Hn.pick(t,(e=>"metabolite"!==e.node_type||!!e.node_is_primary)),r=Object.keys(n).length>0,i=r?n:t,o=Object.keys(i),s=o.reduce(((t,n)=>t+(e?i[n].y:i[n].x)),0)/o.length,a=Hn.pairs(i).map((([t,n])=>({nodeId:t,displacement:e?{x:0,y:s-n.y}:{x:s-n.x,y:0}}))),l=[],c={};r&&Hn.mapObject(i,((n,r)=>{n&&n.connected_segments.map((r=>{const i=r.segment_id,o=r.reaction_id,u=this.reactions[o].segments[i],h=u.to_node_id===n.node_id,d=h?u.from_node_id:u.to_node_id,p=this.nodes[d];if(!p)return;const f=h?"b2":"b1";if(p.node_id in t&&u[f]){const r=kd(i,f);if(l.push({reactionId:o,segmentId:i,bez:f,bezierId:r,displacement:e?{x:0,y:n.y-u[f].y}:{x:n.x-u[f].x,y:0}}),"metabolite"===p.node_type&&!p.node_is_primary&&!(d in c)){const r=p.connected_segments.filter((e=>{const n=this.reactions[o].segments[i];return n.to_node_id===p.node_id?n.from_node_id in t:n.to_node_id in t}));p.connected_segments.length<=r.length&&(a.push({nodeId:d,displacement:e?{x:0,y:s-n.y}:{x:s-n.x,y:0}}),c[d]=!0)}}}))}));const u=(e,t)=>{let n=[];e.map((e=>{const t=wd(this.nodes[e.nodeId],e.nodeId,this.reactions,this.beziers,e.displacement);n=yl([n,t.reaction_ids])})),t.map((e=>{const t=this.reactions[e.reactionId].segments[e.segmentId],n=e.bez;t[n]=Bl(t[n],e.displacement),this.beziers[e.bezierId].x=t[n].x,this.beziers[e.bezierId].y=t[n].y})),this.draw_these_nodes(e.map((e=>e.nodeId))),this.draw_these_reactions(n,!0)};this.undo_stack.push((()=>{const e=e=>e.map((e=>Object.assign(Object.assign({},e),{displacement:{x:-e.displacement.x,y:-e.displacement.y}})));u(e(a),e(l))}),(()=>{u(a,l)})).do(),this.set_status(r?"Aligned reactions":"Aligned nodes",3e3)}delete_selected(){const e=this.getSelectedNodes(),t=this.get_selected_text_labels();(Object.keys(e).length>=1||Object.keys(t).length>=1)&&this.delete_selectable(e,t,!0)}delete_selectable(e,t,n){const r=this.segments_and_reactions_for_nodes(e);let i=r.segment_objs_w_segments,o=r.reactions;const s=_l(e),a=_l(i),l=_l(o),c=_l(t),u=(t,r,i,o)=>{this.delete_node_data(Object.keys(e)),this.delete_segment_data(i),this.delete_reaction_data(Object.keys(r)),this.delete_text_label_data(Object.keys(o));let s=!1,a=!1;this.has_data_on_reactions&&(s=this.calc_data_stats("reaction")),this.has_data_on_nodes&&(a=this.calc_data_stats("metabolite")),n&&(s?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(),a?this.draw_all_nodes(!0):this.clear_deleted_nodes(),this.clear_deleted_text_labels())};u(0,o,i,t),this.undo_stack.push((()=>{this.extend_nodes(s),this.extend_reactions(l);const r=Object.keys(l);for(const e in a){const t=a[e],n=t.segment;this.reactions[t.reaction_id].segments[t.segment_id]=n,[n.from_node_id,n.to_node_id].forEach((e=>{e in s||this.nodes[e].connected_segments.push({reaction_id:t.reaction_id,segment_id:t.segment_id})}));const i=t.segment_id,o=t.reaction_id,l={};l[i]=t.segment,vl(this.beziers,Sd(l,o)),-1===r.indexOf(t.reaction_id)&&r.push(t.reaction_id)}if(this.has_data_on_reactions?this.calc_data_stats("reaction")?this.draw_all_reactions(!0,!1):this.draw_these_reactions(r):n&&this.draw_these_reactions(r),this.has_data_on_nodes){const e=this.calc_data_stats("metabolite");n&&(e?this.draw_all_nodes(!1):this.draw_these_nodes(Object.keys(s)))}else n&&this.draw_these_nodes(Object.keys(s));vl(this.text_labels,c),n&&this.draw_these_text_labels(Object.keys(c)),t=_l(c),e=_l(s),i=_l(a),o=_l(l)}),(function(){u(0,o,i,t)}))}delete_node_data(e){e.forEach((e=>{this.enable_search&&"metabolite"===this.nodes[e].node_type&&(this.search_index.remove("n"+e)&&this.search_index.remove("n_name"+e)||console.warn("Could not find deleted metabolite in search index")),delete this.nodes[e]}))}delete_segment_data(e){for(const t in e){const n=e[t],r=this.reactions[n.reaction_id];if(!(n.segment_id in r.segments))return;const i=r.segments[n.segment_id];[i.from_node_id,i.to_node_id].forEach((e=>{if(!(e in this.nodes))return;const t=this.nodes[e];t.connected_segments=t.connected_segments.filter((function(e){return e.segment_id!=n.segment_id}))})),["b1","b2"].forEach((e=>{const t=kd(n.segment_id,e);delete this.beziers[t]})),delete r.segments[n.segment_id]}}delete_reaction_data(e){e.forEach((e=>{const t=this.reactions[e];for(const e in t.segments)["b1","b2"].forEach((t=>{const n=kd(e,t);delete this.beziers[n]}));delete this.reactions[e],this.search_index.remove("r"+e)&&this.search_index.remove("r_name"+e)||console.warn("Could not find deleted reaction "+e+" in search index");for(const n in t.genes)this.search_index.remove("r"+e+"_g"+n)&&this.search_index.remove("r"+e+"_g_name"+n)||console.warn("Could not find deleted gene "+n+" in search index")}))}delete_text_label_data(e){e.forEach((e=>{delete this.text_labels[e],this.search_index.remove("l"+e)||console.warn("Could not find deleted text label in search index")}))}_extend_and_draw_metabolite(e,t){this.extend_nodes(e);const n=[t];if(this.has_data_on_nodes){if(null==this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");this.apply_metabolite_data_to_map(this.imported_metabolite_data,n)?this.draw_all_nodes(!1):this.draw_these_nodes(n)}else this.draw_these_nodes(n)}new_reaction_from_scratch(e,t,n){if(!this.cobra_model)return void console.error("No CobraModel. Cannot build new reaction");const r=_l(this.cobra_model.reactions[e]);if(0===Hn.size(r.metabolites))throw Error("No metabolites in reaction "+r.bigg_id);const i=Hn.map(r.metabolites,((e,t)=>[e,t])).filter((e=>Number(e[0])<0)).map((e=>e[1])),o=i.length>0?i[0]:Object.keys(r.metabolites)[0],s=this.cobra_model.metabolites[o],a=String(++this.largest_ids.nodes),l=vd(Ll(n),0,1,!0,o,1),c={connected_segments:[],x:t.x,y:t.y,node_is_primary:!0,label_x:t.x+l.x,label_y:t.y+l.y,name:s.name,bigg_id:o,node_type:"metabolite"};let u={};u[a]=c,this._extend_and_draw_metabolite(u,a);const h=_l(u),d=this.new_reaction_for_metabolite(e,a,n,!1),p=d.redo,f=d.undo;this.undo_stack.push((()=>{f(),this.delete_node_data(Object.keys(u)),u=_l(h),this.clear_deleted_nodes(),this.deselect_nodes()}),(()=>{this._extend_and_draw_metabolite(u,a),p()}))}extend_nodes(e){if(this.enable_search)for(const t in e){const n=e[t];"metabolite"==n.node_type&&(this.search_index.insert("n"+t,{name:n.bigg_id,data:{type:"metabolite",node_id:t}}),this.search_index.insert("n_name"+t,{name:n.name,data:{type:"metabolite",node_id:t}}))}vl(this.nodes,e)}extend_reactions(e){if(this.enable_search)for(const t in e){const n=e[t];this.search_index.insert("r"+t,{name:n.bigg_id,data:{type:"reaction",reaction_id:t}}),this.search_index.insert("r_name"+t,{name:n.name,data:{type:"reaction",reaction_id:t}});for(const e in n.genes){const r=n.genes[e];this.search_index.insert("r"+t+"_g"+e,{name:r.bigg_id,data:{type:"reaction",reaction_id:t}}),this.search_index.insert("r"+t+"_g_name"+e,{name:r.name,data:{type:"reaction",reaction_id:t}})}}vl(this.reactions,e)}_extend_and_draw_reaction(e,t,n,r){this.extend_reactions(t),vl(this.beziers,n),this.delete_node_data([r]),this.extend_nodes(e);const i=Object.keys(t);if(this.has_data_on_reactions){let e=!1;if(this.imported_reaction_data)e=this.apply_reaction_data_to_map(this.imported_reaction_data,i);else{if(!this.imported_gene_data)throw new Error("imported_gene_data or imported_reaction_data should not be null");e=this.apply_gene_data_to_map(this.imported_gene_data,i)}e?this.draw_all_reactions(!0,!1):this.draw_these_reactions(i)}else this.draw_these_reactions(i);const o=Object.keys(e);if(this.has_data_on_nodes){if(null==this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");this.apply_metabolite_data_to_map(this.imported_metabolite_data,o)?this.draw_all_nodes(!1):this.draw_these_nodes(o)}else this.draw_these_nodes(o);for(const t in e){const n=e[t];if(n.node_is_primary&&t!=r){this.select_metabolite_with_id(t);const e={x:n.x,y:n.y};this.zoomContainer&&this.zoomContainer.translateOffScreen(e)}}}new_reaction_for_metabolite(e,t,n,r){void 0===r&&(r=!0);const i=this.nodes[t],o=function(e,t,n,r,i,o,s,a){const l=Ul(a),c=String(++o.reactions),u={x:i.x,y:i.y},h=[u,Bl(u,{x:350,y:0})],d={x:(h[0].x+h[1].x)/2,y:(h[0].y+h[1].y)/2},p=function(e){if(Math.abs(e)>Math.PI)throw new Error("Angle must be between -PI and PI");return Math.abs(e)<Math.PI/7||Math.abs(e-Math.PI)<Math.PI/7?{x:-50,y:-40}:e>0?{x:15*(1-Math.abs(e-Math.PI/2)/(Math.PI/2)),y:10+50*(e-Math.PI/2)}:{x:15*(1-Math.abs(e+Math.PI/2)/(Math.PI/2)),y:10-50*(Math.abs(e)-Math.PI/2)}}(l),f={name:t.name,bigg_id:t.bigg_id,reversibility:t.reversibility,gene_reaction_rule:t.gene_reaction_rule,genes:_l(t.genes),metabolites:_l(t.metabolites)};vl(f,{label_x:d.x+p.x,label_y:d.y+p.y,segments:{}});const g=[],m=[];let b=0,A=0,_=!1;for(const e in f.metabolites){const t=n[e],r=f.metabolites[e],o=t.formula,a={coefficient:r,bigg_id:e,name:t.name};if(r<0){a.index=b;const e=/C([0-9]+)/.exec(o||"");i.bigg_id===a.bigg_id?g.push([a.index,1/0]):e&&-1===s.indexOf(Hl(a.bigg_id||"")[0])&&g.push([a.index,parseInt(e[1])]),b++}else{a.index=A;const e=/C([0-9]+)/.exec(o||"");i.bigg_id===a.bigg_id?(m.push([a.index,1/0]),_=!0):e&&-1===s.indexOf(Hl(a.bigg_id)[0])&&m.push([a.index,parseInt(e[1])]),A++}f.metabolites[e]=a}const v=f,y=(e,t)=>t[1]>e[1]?t:e,w=g.reduce(y,[0,0])[0],x=m.reduce(y,[0,0])[0];for(const e in v.metabolites){const t=v.metabolites[e];t.coefficient<0?(t.is_primary=t.index===w,t.count=b):(t.is_primary=t.index===x,t.count=A)}const C={},E={};[{node_type:"anchor_reactants",dis:{x:20*(_?1:-1),y:0}},{node_type:"center",dis:{x:0,y:0}},{node_type:"anchor_products",dis:{x:20*(_?-1:1),y:0}}].map((e=>{const t=String(++o.nodes),n="center"===e.node_type?"midmarker":"multimarker";C[t]={node_type:n,x:d.x+e.dis.x,y:d.y+e.dis.y,connected_segments:[],name:null,bigg_id:null,label_x:null,label_y:null,node_is_primary:null,data:null},E[e.node_type]=t})),[[E.anchor_reactants,E.center,"reactants"],[E.anchor_products,E.center,"products"]].map((e=>{const t=e[0],n=e[1],r=String(++o.segments),i=0===b&&"reactants"===e[2]&&v.reversibility||0===A&&"products"===e[2];v.segments[r]={b1:null,b2:null,from_node_id:t,to_node_id:n,from_node_coefficient:null,to_node_coefficient:null,reversibility:v.reversibility,data:v.data,reverse_flux:v.reverse_flux,unconnected_segment_with_arrow:i},C[t].connected_segments.push({segment_id:r,reaction_id:c}),C[n].connected_segments.push({segment_id:r,reaction_id:c})}));const B=C;for(const e in v.metabolites){const t=v.metabolites[e];let n,s;t.coefficient<0?(n=w,s=E.anchor_reactants):(n=x,s=E.anchor_products);const a=Bd(t,n,h,d,350,_);if(i.bigg_id===t.bigg_id){const e=String(++o.segments);v.segments[e]={b1:a.b1,b2:a.b2,from_node_id:s,to_node_id:r,from_node_coefficient:null,to_node_coefficient:t.coefficient,reversibility:v.reversibility},i.connected_segments.push({segment_id:e,reaction_id:c}),B[s].connected_segments.push({segment_id:e,reaction_id:c})}else{const e=String(++o.segments),r=String(++o.nodes);v.segments[e]={b1:a.b1,b2:a.b2,from_node_id:s,to_node_id:r,from_node_coefficient:null,to_node_coefficient:t.coefficient,reversibility:v.reversibility};const i=vd(l,t.index,t.count,t.is_primary,t.bigg_id,n);B[r]={connected_segments:[{segment_id:e,reaction_id:c}],x:a.circle.x,y:a.circle.y,node_is_primary:t.is_primary,label_x:a.circle.x+i.x,label_y:a.circle.y+i.y,name:t.name,bigg_id:t.bigg_id,node_type:"metabolite"},B[s].connected_segments.push({segment_id:e,reaction_id:c})}}const k=[];for(const e in v.metabolites)k.push({bigg_id:e,coefficient:v.metabolites[e].coefficient});v.metabolites=k;const S={};S[c]=v;const z=zd(S);return B[r]=i,yd(B,S,z,l,u),{new_reactions:S,new_beziers:z,new_nodes:B}}(0,this.cobra_model.reactions[e],this.cobra_model.metabolites,t,_l(i),this.largest_ids,this.settings.get("cofactors"),n);let s=o.new_nodes,a=o.new_reactions,l=o.new_beziers;this._extend_and_draw_reaction(s,a,l,t);const c=_l(s),u=_l(a),h=_l(l),d=()=>{delete s[t],this.delete_node_data(Object.keys(s)),this.delete_reaction_data(Object.keys(a)),this.select_metabolite_with_id(t),s=_l(c),a=_l(u),l=_l(h),this.has_data_on_reactions&&this.calc_data_stats("reaction")?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(!0),this.has_data_on_nodes&&this.calc_data_stats("metabolite")?this.draw_all_nodes(!0):this.clear_deleted_nodes()},p=()=>{this._extend_and_draw_reaction(s,a,l,t)};return r&&this.undo_stack.push(d,p),{undo:d,redo:p}}cycle_primary_node(){const e=this.getSelectedNodes();if(Hn.isEmpty(e))return;const t=Object.keys(e)[0],n=(e[t],this.reactions),r=this.nodes,i=[];let o=[];if(r[t].connected_segments.forEach((function(e){let r;o=[e.reaction_id];try{if(r=n[e.reaction_id].segments[e.segment_id],void 0===r)throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}i.push(r.from_node_id==t?r.to_node_id:r.from_node_id)})),1!=i.length)return void console.error("Only connected nodes with a single reaction can be selected");const s=i[0],a=[t];r[s].connected_segments.forEach((function(e){let i;try{if(i=n[e.reaction_id].segments[e.segment_id],void 0===i)throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}const o=i.from_node_id==s?i.to_node_id:i.from_node_id;"metabolite"==r[o].node_type&&o!=t&&a.push(String(o))}));for(let e=0;e<a.length;e++)if(r[a[e]].connected_segments.length>1)return void console.error("Only connected nodes with a single reaction can be selected");for(const n in e)if(n!=t&&-1==a.indexOf(n))return void console.warn("Selected nodes are not on the same reaction");const l=[];let c=a.length-1;const u=r[a[c]];let h=u.node_is_primary,d={x:u.x,y:u.y,label_x:u.label_x,label_y:u.label_y};u.connected_segments.length>1&&console.warn("Too many connected segments for node "+u.node_id);const p=u.connected_segments[0];let f;try{if(f=n[p.reaction_id].segments[p.segment_id],void 0===f)throw new Error("undefined segment")}catch(e){return void console.error("Could not find connected segment "+p.segment_id)}let g,m={b1:f.b1,b2:f.b2};a.forEach((function(e){const t=r[e],i=t.node_is_primary,o={x:t.x,y:t.y,label_x:t.label_x,label_y:t.label_y},s=t.connected_segments[0],a=n[s.reaction_id].segments[s.segment_id],c={b1:a.b1,b2:a.b2};t.node_is_primary=h,t.x=d.x,t.y=d.y,t.label_x=d.label_x,t.label_y=d.label_y,a.b1=m.b1,a.b2=m.b2,h=i,d=o,m=c,t.node_is_primary&&(g=e),l.push(e)}));const b=r[s].connected_segments;c=b.length-1;const A=[b[c]];b.forEach((function(e,t){c!=t&&A.push(e)})),r[s].connected_segments=A,this.draw_these_nodes(l),this.draw_these_reactions(o),g&&this.select_metabolite_with_id(g)}toggle_selected_node_primary(){const e=this.get_selected_node_ids(),t=e=>{const t={},n=this.settings.get("hide_secondary_metabolites");if(e.forEach((e=>{if(!(e in this.nodes))return void console.warn("Could not find node: "+e);const n=this.nodes[e];"metabolite"==n.node_type&&(n.node_is_primary=!n.node_is_primary,t[e]=n)})),this.draw_these_nodes(Object.keys(t)),n){const e=this.segments_and_reactions_for_nodes(t),n={};for(const t in e.segment_objs_w_segments)n[e.segment_objs_w_segments[t].reaction_id]=!0;this.draw_these_reactions(Object.keys(n))}};t(e),this.undo_stack.push((function(){t(e)}),(function(){t(e)}))}segments_and_reactions_for_nodes(e){const t={},n={},r={},i=this.reactions;for(const n in e)e[n].connected_segments.forEach((function(e){let n;try{if(n=i[e.reaction_id].segments[e.segment_id],void 0===n)throw new Error("undefined segment")}catch(e){return void console.warn("Could not find connected segments for node")}const o=_l(e);o.segment=_l(n),t[e.segment_id]=o,e.reaction_id in r||(r[e.reaction_id]=[]),r[e.reaction_id].push(e.segment_id)}));for(const e in r){const t=i[e],o=r[e];let s=!0;for(const e in t.segments)-1==o.indexOf(e)&&(s=!1);s&&(n[e]=t)}return{segment_objs_w_segments:t,reactions:n}}add_label_to_search_index(e,t){this.search_index.insert("l"+e,{name:t,data:{type:"text_label",text_label_id:e}})}new_text_label(e,t){const n=function(e,t,n){return{id:String(++e.text_labels),label:{text:t,x:n.x,y:n.y}}}(this.largest_ids,t,e);return this.text_labels[n.id]=n.label,this.draw_these_text_labels([n.id]),""!==t&&this.add_label_to_search_index(n.id,t),n.id}edit_text_label(e,t,n,r){if(Hn.isUndefined(r)&&(r=!1),""===t)throw new Error("Should not be called for empty string");const i=(t,n)=>{this.text_labels[e].text=t,n&&this.draw_these_text_labels([e]);const i="l"+e,o=this.search_index.remove(i);r||o||console.warn("Could not find modified text label in search index"),this.search_index.insert(i,{name:t,data:{type:"text_label",text_label_id:e}})},o=_l(this.text_labels[e]);i(t,n),this.undo_stack.push((()=>{r?(this.delete_text_label_data([e]),this.clear_deleted_text_labels()):i(o.text,!0)}),(()=>{r?(this.text_labels[e]=_l(o),this.text_labels[e].text=t,this.draw_these_text_labels([e]),this.add_label_to_search_index(e,t)):i(t,!0)}))}zoom_extent_nodes(e){this._zoom_extent(e,"nodes")}zoom_extent_canvas(e){this._zoom_extent(e,"canvas")}_zoom_extent(e,t){let n,r;Hn.isUndefined(e)&&(e="nodes"===t?.2:0),Hn.isUndefined(t)&&(t="canvas");const i=this.get_size();if(e*=i.height,"nodes"===t){const t={x:null,y:null},o={x:null,y:null};for(const e in this.nodes){const n=this.nodes[e];null==t.x&&(t.x=n.x),null==t.y&&(t.y=n.y),null==o.x&&(o.x=n.x),null==o.y&&(o.y=n.y),t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),o.x=Math.max(o.x,n.x),o.y=Math.max(o.y,n.y)}n=Math.min((i.width-2*e)/(o.x-t.x),(i.height-2*e)/(o.y-t.y)),r={x:-t.x*n+e+(i.width-2*e-(o.x-t.x)*n)/2,y:-t.y*n+e+(i.height-2*e-(o.y-t.y)*n)/2}}else{if("canvas"!=t)return console.error("Did not recognize mode");n=Math.min((i.width-2*e)/this.canvas.width,(i.height-2*e)/this.canvas.height),r={x:-this.canvas.x*n+e+(i.width-2*e-this.canvas.width*n)/2,y:-this.canvas.y*n+e+(i.height-2*e-this.canvas.height*n)/2}}return this.zoomContainer.goTo(n,r),null}get_size(){return this.zoomContainer.get_size()}zoom_to_reaction(e){const t=this.reactions[e],n=this.get_size(),r={x:.5*-t.label_x+n.width/2,y:.5*-t.label_y+n.height/2};this.zoomContainer.goTo(.5,r)}zoom_to_node(e){const t=this.nodes[e],n=this.get_size(),r={x:.5*-t.label_x+n.width/2,y:.5*-t.label_y+n.height/2};this.zoomContainer.goTo(.5,r)}zoom_to_text_label(e){const t=this.text_labels[e],n=this.get_size(),r={x:.5*-t.x+n.width/2,y:.5*-t.y+n.height/2};this.zoomContainer.goTo(.5,r)}highlight_reaction(e){this.highlight(this.sel.selectAll("#r"+e).selectAll("text"))}highlight_node(e){this.highlight(this.sel.selectAll("#n"+e).selectAll("text"))}highlight_text_label(e){this.highlight(this.sel.selectAll("#l"+e).selectAll("text"))}highlight(e){this.sel.selectAll(".highlight").classed("highlight",!1),null!==e&&e.classed("highlight",!0)}save(){zl(this.map_for_export(),this.map_name)}map_for_export(){const e=[{map_name:this.map_name,map_id:this.map_id,map_description:this.map_description,homepage:"https://escher.github.io",schema:"https://escher.github.io/escher/jsonschema/1-0-0#"},{reactions:_l(this.reactions),nodes:_l(this.nodes),text_labels:_l(this.text_labels),canvas:this.canvas.sizeAndLocation()}];for(const t in e[1].reactions){const n=e[1].reactions[t],r={};["name","bigg_id","reversibility","label_x","label_y","gene_reaction_rule","genes","metabolites"].forEach((function(e){r[e]=n[e]})),r.segments={};for(const e in n.segments){const t=n.segments[e],i={};["from_node_id","to_node_id","b1","b2"].forEach((function(e){i[e]=t[e]})),r.segments[e]=i}e[1].reactions[t]=r}for(const t in e[1].nodes){const n=e[1].nodes[t],r={};let i=[];i="metabolite"===n.node_type?["node_type","x","y","bigg_id","name","label_x","label_y","node_is_primary"]:["node_type","x","y"],i.forEach((function(e){r[e]=n[e]})),e[1].nodes[t]=r}for(const t in e[1].text_labels){const n=e[1].text_labels[t],r={};["x","y","text"].forEach((function(e){r[e]=n[e]})),e[1].text_labels[t]=r}const t=e[1].canvas,n={};return["x","y","width","height"].forEach((function(e){n[e]=t[e]})),e[1].canvas=n,e}saveMap(e,t,n){this.callback_manager.run(e);const r=this.zoomContainer.windowScale,i=this.zoomContainer.windowTranslate,o=this.canvas.sizeAndLocation(),s={w:this.canvas.mouseNode.attr("width"),h:this.canvas.mouseNode.attr("height"),transform:this.canvas.mouseNode.attr("transform")};this.zoomContainer._goToSvg(1,{x:-o.x,y:-o.y},(()=>{this.svg.attr("width",o.width),this.svg.attr("height",o.height),this.canvas.mouseNode.attr("width","0px"),this.canvas.mouseNode.attr("height","0px"),this.canvas.mouseNode.attr("transform",null);const e=this.sel.selectAll(".multimarker-circle,.midmarker-circle,#canvas,.bezier,#rotation-center,.direction-arrow,.start-reaction-target").style("visibility","hidden");"svg"===n?Ol("saved_map",this.svg,!0):"png"===n&&Tl("saved_map",this.svg),this.zoomContainer._goToSvg(r,i,(()=>{this.svg.attr("width",null),this.svg.attr("height",null),this.canvas.mouseNode.attr("width",s.w),this.canvas.mouseNode.attr("height",s.h),this.canvas.mouseNode.attr("transform",s.transform),e.style("visibility",null),this.callback_manager.run(t)}))}))}save_svg(){this.saveMap("before_svg_export","after_svg_export","svg")}save_png(){this.saveMap("before_png_export","after_png_export","png")}convert_map(){if(this.callback_manager.run("before_convert_map"),!this.has_cobra_model())throw Error("No COBRA model loaded.");const e=this.cobra_model,t={},n=["name","gene_reaction_rule","genes"],r={},i=["name"];let o=!1;for(const r in this.reactions){const i=this.reactions[r];o=!1;for(const t in e.reactions){const r=e.reactions[t];if(r.bigg_id==i.bigg_id){n.forEach((e=>{i[e]=r[e]}));let e=!0,t=null;for(const n in r.metabolites){const o=r.metabolites[n],s=Hn.find(i.metabolites,(e=>e.bigg_id===n));if(void 0===s){e=!1;break}const a=s.coefficient;if(null==t&&(t=o>0!=a>0),!0===t&&o>0==a>0||!1===t&&o>0!=a>0){e=!1;break}}if(t&&e){i.metabolites.forEach((e=>{e.coefficient=-e.coefficient}));for(const e in i.segments){const t=i.segments[e];t.reversibility=i.reversibility;const n=this.nodes[t.from_node_id],r=this.nodes[t.to_node_id];i.metabolites.forEach((e=>{e.bigg_id===n.bigg_id?t.from_node_coefficient=e.coefficient:e.bigg_id===r.bigg_id&&(t.to_node_coefficient=e.coefficient)}))}}if(!e){console.warn(`Metabolites for ${r.bigg_id} are different in model and map. Could\n not check and fix direction.`);break}o=!0}}o||(t[r]=!0)}for(const t in this.nodes){const n=this.nodes[t];if("metabolite"==n.node_type){o=!1;for(const t in e.metabolites){const r=e.metabolites[t];r.bigg_id==n.bigg_id&&(i.forEach((function(e){n[e]=r[e]})),o=!0)}o||(r[t]=!0)}}const s=Object.keys(t).length,a=Object.keys(r).length,l=1e4;0===s&&0===a?this.set_status("Successfully converted attributes.",l):0===a?(this.set_status("Converted attributes, but count not find "+s+" reactions in the model.",l),this.settings.set("highlight_missing",!0)):0===s?(this.set_status("Converted attributes, but count not find "+a+" metabolites in the model.",l),this.settings.set("highlight_missing",!0)):(this.set_status("Converted attributes, but count not find "+s+" reactions and "+a+" metabolites in the model.",l),this.settings.set("highlight_missing",!0)),this.draw_everything(),this.callback_manager.run("after_convert_map")}mergeSelectedNodes(){try{const e=this.getSelectedNodes(),t=Object.values(e),n=Object.keys(e);if(2!=Object.values(e).length)return;const r=n[0],i=n[1];t.every((e=>e.bigg_id))&&t[0].bigg_id==t[1].bigg_id&&(this.nodes[r].connected_segments.forEach((e=>{this.nodes[i].connected_segments.push(Object.assign({},e))})),this.nodes[r]&&delete this.nodes[r],Object.values(this.reactions).forEach((e=>{Object.values(e.segments).forEach((e=>{e.from_node_id==r&&(e.from_node_id=i),e.to_node_id==r&&(e.to_node_id=i)}))})),this.sel.selectAll(".selected").classed("selected",!1),this.draw_everything())}catch(e){console.error(e)}}highlightSameNodes(){try{const e=Object.values(this.getSelectedNodes());if(1===e.length&&"metabolite"==e[0].node_type&&e[0].bigg_id){const t=e[0].bigg_id,n=Object.entries(this.nodes).filter((([e,n])=>"metabolite"==n.node_type&&n.bigg_id==t)).map((([e,t])=>e));this.sel.selectAll(n.map((e=>`#n${e}`)).join(",")).classed("selected",!0)}}catch(e){console.error(e)}}findAndHighlightShortest(e=0){this.last_action=null;const t=Array.from(new Set(Object.values(this.getSelectedNodes()).sort(((e,t)=>(e.selectionOrder?e.selectionOrder:0)-(t.selectionOrder?t.selectionOrder:0))).map((e=>e.bigg_id))));if(2!==t.length)return;let n,r;try{const i=`r${t[0]}_r${t[1]}`;r="string"==typeof e?Number.parseInt(e):0==e?1:Math.max(this.shortestPathInfo&&this.shortestPathInfo.hash===i?this.shortestPathInfo.k+e:1,1),0===r&&(r=1),n=function(e,t,n,r=1){const i=e=>e>0?1:-1,o={};for(const t in e.reactions){const n=e.reactions[t];for(const e of n.metabolites){if(e.coefficient>0&&!n.reversibility)continue;o[e.bigg_id]||(o[e.bigg_id]={});const t=i(e.coefficient);n.metabolites.filter((n=>n.bigg_id!==e.bigg_id&&i(n.coefficient)!==t)).forEach((t=>{o[e.bigg_id][t.bigg_id]={coefficient:t.coefficient,reaction_id:n.reaction_id}}))}}function s(t,r){const i={},s={},a={};Object.values(e.nodes).filter((e=>"metabolite"==e.node_type)).forEach((e=>s[e.bigg_id]=1/0)),s[t]=0;const l=[t];for(;l.length>0;){const e=l.sort(((e,t)=>s[e]-s[t]))[0];if(l.splice(0,1),!i[e]){if(i[e]=!0,e===r)break;for(const t in o[e]){const n=s[e]+1,r=o[e][t].reaction_id,i=c(e);n<s[t]&&!i.includes(r)&&(s[t]=n,a[t]={met:e,reaction_id:o[e][t].reaction_id},l.push(t))}}}function c(e){const t=[];let n=a[e];for(;n;)t.unshift(n.reaction_id),n=a[n.met];return t}const u=[{met:n,reaction_id:null}];let h=a[r];for(;h;)u.unshift(h),h=a[h.met];return{path:u,length:s[r]}}const a=[],{path:l,length:c}=s(t,n);if(0===l.length)return null;a.push({path:l,length:c});const u=[];for(let e=1;e<r;e++){const t=a[e-1].path;for(let e=0;e<t.length-1;e++){const r=t[e].met,i=t.slice(0,e),l=[];for(const t of a)if(t.path.slice(0,e).every(((e,t)=>e.met===i[t].met))){const n=t.path[e+1].met;o[r]&&o[r][n]&&(l.push([r,n,o[r][n]]),delete o[r][n])}const c=s(r,n);if(c.path.length>0){const e=[...i,...c.path],t=i.length+c.length;u.push({path:e,length:t})}for(const[e,t,n]of l)o[e][t]=n}if(0===u.length)break;u.sort(((e,t)=>e.length-t.length));const r=a.map((e=>e.path.map((e=>`${e.met}-${e.reaction_id}`)).join("-"))),i=u.filter((e=>new Set(e.path.map((e=>e.reaction_id))).size===e.path.length)).filter((e=>!r.includes(e.path.map((e=>`${e.met}-${e.reaction_id}`)).join("-")))).shift();i?a.push(i):a.push(a[a.length-1])}return a[r-1]?a[r-1].path:null}(this,t[0],t[1],r),this.shortestPathInfo={hash:i,k:r},this.outGoingInfo=null,this.inGoingInfo=null}catch(e){return void console.error(`Error finding ${r}th shortest path`,e)}if(this.unhighlightShortestPaths(),n){for(let e=0;e<n.length-1;e++){const t=n[e].reaction_id,r=n[e].met,i=n[e+1].met;if(!t||!r||!i)continue;const o=Op(this,r,i,t);null==o||o.forEach((e=>{this.sel.select(`#s${e}.segment-group`).classed("shortest-path",!0)}))}this.last_action={function:"findAndHighlightShortest",args:[r.toString()]}}}findKthOutOrIngoingReactions(e,t=!0){this.last_action=null;const n=Array.from(new Set(Object.values(this.getSelectedNodes()).map((e=>e.bigg_id))));if(1!==n.length)return;let r;const i=n[0];this.unhighlightShortestPaths();const o=()=>t?this.outGoingInfo:this.inGoingInfo,s=t?Mp:Np;r="string"==typeof e?Number.parseInt(e):0==e?1:Math.max(o()&&o().hash===i?o().k+e:1,1),0===r&&(r=1),this.outGoingInfo=null,this.inGoingInfo=null,this.shortestPathInfo=null,(e=>{t?this.outGoingInfo=e:this.inGoingInfo=e})({hash:i,k:r});const a=new Set,l=new Set,c=new Set,u=e=>e>=0?1:-1,h=[i];for(let e=0;e<r;e++){for(c.clear();h.length>0;){const e=h.shift();if(a.has(e))continue;a.add(e);const n=s(this,e).map((e=>e.split(zp)));n.forEach((n=>{n[0];const i=n[1];if(!l.has([e,n[0],n[1]].join(zp))&&!a.has(i)){c.add(i);const n=[];Object.values(this.reactions).forEach((r=>{const o=r.metabolites,s=o.find((t=>t.bigg_id===e)),a=o.find((e=>e.bigg_id===i));s&&a&&(r.reversibility||t&&-1===u(s.coefficient)&&1===u(a.coefficient)||!t&&1===u(s.coefficient)&&-1===u(a.coefficient))&&n.push(r.reaction_id)})),n.forEach((t=>{const n=Op(this,e,i,t);n&&n.forEach((e=>{Math.max(Math.min(r,4),1),this.sel.select(`#s${e}.segment-group`).classed("shortest-path",!0)}))}))}})),n.forEach((t=>{l.add([e,t[0],t[1]].join(zp))}))}Array.from(c).forEach((e=>h.push(e)))}this.last_action={function:"findKthOutOrIngoingReactions",args:[r.toString(),t]}}select_nodes(e){e.filter((e=>e&&e.toString())).forEach((e=>this.sel.selectAll("#n"+e.toString()).classed("selected",!0)))}selectionChanged(){const e=document.getElementById("selection-info-container"),t="Selected: ";if(!e)return;const n=Array.from(new Set(Object.values(this.getSelectedNodes()).sort(((e,t)=>(e.selectionOrder?e.selectionOrder:0)-(t.selectionOrder?t.selectionOrder:0))).map((e=>e.bigg_id))));0!==n.length?1!==n.length?2!==n.length?e.innerHTML="":e.innerHTML=`<h3>${t}${n[0]} - ${n[1]}</h3>`:e.innerHTML=`<h3>${t}${n[0]}</h3>`:e.innerHTML=""}unhighlightShortestPaths(){this.sel.selectAll(".shortest-path").classed("shortest-path",!1),this.sel.selectAll(".shortest-path-1").classed("shortest-path-1",!1),this.sel.selectAll(".shortest-path-2").classed("shortest-path-2",!1),this.sel.selectAll(".shortest-path-3").classed("shortest-path-3",!1),this.sel.selectAll(".shortest-path-4").classed("shortest-path-4",!1),this.last_action=null}}function Ip(e){return function(){return e}}function jp(e,t,n){this.target=e,this.type=t,this.selection=n}function Pp(){ga.stopImmediatePropagation()}function Fp(){ga.preventDefault(),ga.stopImmediatePropagation()}var Lp={name:"drag"},Up={name:"space"},Rp={name:"handle"},Wp={name:"center"},Vp={name:"x",handles:["e","w"].map(Zp),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Yp={name:"y",handles:["n","s"].map(Zp),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Hp={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Zp),input:function(e){return e},output:function(e){return e}},qp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gp={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Qp={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Xp={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Kp={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Zp(e){return{type:e}}function Jp(){return!ga.button}function $p(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ef(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function tf(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function nf(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function rf(){return function(e){var t,n=$p,r=Jp,i=Ua(s,"start","brush","end"),o=6;function s(t){var n=t.property("__brush",h).selectAll(".overlay").data([Zp("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",qp.overlay).merge(n).each((function(){var e=ef(this).extent;Sa(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([Zp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",qp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return qp[e.type]})),t.each(a).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",u)}function a(){var e=Sa(this),t=ef(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-o/2:t[0][0]-o/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-o/2:t[0][1]-o/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+o:o})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+o:o}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(e,t){return e.__brush.emitter||new c(e,t)}function c(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function u(){if(ga.touches){if(ga.changedTouches.length<ga.touches.length)return Fp()}else if(t)return;if(r.apply(this,arguments)){var n,i,o,s,c,u,h,d,p,f,g,m,b,A=this,_=ga.target.__data__.type,v="selection"===(ga.metaKey?_="overlay":_)?Lp:ga.altKey?Wp:Rp,y=e===Yp?null:Xp[_],w=e===Vp?null:Kp[_],x=ef(A),C=x.extent,E=x.selection,B=C[0][0],k=C[0][1],S=C[1][0],z=C[1][1],M=!1,N=sc(A),O=N,T=l(A,arguments).beforestart();"overlay"===_?x.selection=E=[[n=e===Yp?B:N[0],o=e===Vp?k:N[1]],[c=e===Yp?S:n,h=e===Vp?z:o]]:(n=E[0][0],o=E[0][1],c=E[1][0],h=E[1][1]),i=n,s=o,u=c,d=h;var D=Sa(A).attr("pointer-events","none"),I=D.selectAll(".overlay").attr("cursor",qp[_]);if(ga.touches)D.on("touchmove.brush",P,!0).on("touchend.brush touchcancel.brush",L,!0);else{var j=Sa(ga.view).on("keydown.brush",(function(){switch(ga.keyCode){case 16:M=y&&w;break;case 18:v===Rp&&(y&&(c=u-p*y,n=i+p*y),w&&(h=d-f*w,o=s+f*w),v=Wp,F());break;case 32:v!==Rp&&v!==Wp||(y<0?c=u-p:y>0&&(n=i-p),w<0?h=d-f:w>0&&(o=s-f),v=Up,I.attr("cursor",qp.selection),F());break;default:return}Fp()}),!0).on("keyup.brush",(function(){switch(ga.keyCode){case 16:M&&(m=b=M=!1,F());break;case 18:v===Wp&&(y<0?c=u:y>0&&(n=i),w<0?h=d:w>0&&(o=s),v=Rp,F());break;case 32:v===Up&&(ga.altKey?(y&&(c=u-p*y,n=i+p*y),w&&(h=d-f*w,o=s+f*w),v=Wp):(y<0?c=u:y>0&&(n=i),w<0?h=d:w>0&&(o=s),v=Rp),I.attr("cursor",qp[_]),F());break;default:return}Fp()}),!0).on("mousemove.brush",P,!0).on("mouseup.brush",L,!0);uc(ga.view)}Pp(),Pu(A),a.call(A),T.start()}function P(){var e=sc(A);!M||m||b||(Math.abs(e[0]-O[0])>Math.abs(e[1]-O[1])?b=!0:m=!0),O=e,g=!0,Fp(),F()}function F(){var e;switch(p=O[0]-N[0],f=O[1]-N[1],v){case Up:case Lp:y&&(p=Math.max(B-n,Math.min(S-c,p)),i=n+p,u=c+p),w&&(f=Math.max(k-o,Math.min(z-h,f)),s=o+f,d=h+f);break;case Rp:y<0?(p=Math.max(B-n,Math.min(S-n,p)),i=n+p,u=c):y>0&&(p=Math.max(B-c,Math.min(S-c,p)),i=n,u=c+p),w<0?(f=Math.max(k-o,Math.min(z-o,f)),s=o+f,d=h):w>0&&(f=Math.max(k-h,Math.min(z-h,f)),s=o,d=h+f);break;case Wp:y&&(i=Math.max(B,Math.min(S,n-p*y)),u=Math.max(B,Math.min(S,c+p*y))),w&&(s=Math.max(k,Math.min(z,o-f*w)),d=Math.max(k,Math.min(z,h+f*w)))}u<i&&(y*=-1,e=n,n=c,c=e,e=i,i=u,u=e,_ in Gp&&I.attr("cursor",qp[_=Gp[_]])),d<s&&(w*=-1,e=o,o=h,h=e,e=s,s=d,d=e,_ in Qp&&I.attr("cursor",qp[_=Qp[_]])),x.selection&&(E=x.selection),m&&(i=E[0][0],u=E[1][0]),b&&(s=E[0][1],d=E[1][1]),E[0][0]===i&&E[0][1]===s&&E[1][0]===u&&E[1][1]===d||(x.selection=[[i,s],[u,d]],a.call(A),T.brush())}function L(){if(Pp(),ga.touches){if(ga.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500),D.on("touchmove.brush touchend.brush touchcancel.brush",null)}else hc(ga.view,g),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),I.attr("cursor",qp.overlay),x.selection&&(E=x.selection),tf(E)&&(x.selection=null,a.call(A)),T.end()}}function h(){var t=this.__brush||{selection:null};return t.extent=n.apply(this,arguments),t.dim=e,t}return s.move=function(t,n){t.selection?t.on("start.brush",(function(){l(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){l(this,arguments).end()})).tween("brush",(function(){var t=this,r=t.__brush,i=l(t,arguments),o=r.selection,s=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),c=Zd(o,s);function u(e){r.selection=1===e&&tf(s)?null:c(e),a.call(t),i.brush()}return o&&s?u:u(1)})):t.each((function(){var t=this,r=arguments,i=t.__brush,o=e.input("function"==typeof n?n.apply(t,r):n,i.extent),s=l(t,r).beforestart();Pu(t),i.selection=null==o||tf(o)?null:o,a.call(t),s.start().brush().end()}))},c.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){va(new jp(s,t,e.output(this.state.selection)),i.apply,i,[t,this.that,this.args])}},s.extent=function(e){return arguments.length?(n="function"==typeof e?e:Ip([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),s):n},s.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ip(!!e),s):r},s.handleSize=function(e){return arguments.length?(o=+e,s):o},s.on=function(){var e=i.on.apply(i,arguments);return e===i?s:e},s}(Hp)}class of{constructor(e,t,n,r){this.brushSel=e.append("g").attr("id","brush-container");const i=this.brushSel.node(),o=e.select(r).node().nextSibling;i!==o&&i.parentNode.insertBefore(i,o),this.enabled=t,this.map=n}brushIsEnabled(){return this.map.sel.select(".brush").empty()}toggle(e){void 0===e&&(e=!this.enabled),e?this.setupSelectionBrush():this.brushSel.selectAll("*").remove()}turnOffCrosshair(e){e.selectAll("rect").attr("cursor",null)}setupSelectionBrush(){const e=this.map,t=this.brushSel,n=e.sel.selectAll("#nodes,#text-labels"),r=e.canvas.sizeAndLocation(),i=r.width,o=r.height,s=r.x,a=r.y,l=this.turnOffCrosshair.bind(this);t.selectAll("*").remove();let c=!1;const u=rf().extent([[s,a],[s+i,a+o]]).on("start",(()=>{this.turnOffCrosshair(t),e.settings.get("hide_secondary_metabolites")&&(e.settings.set("hide_secondary_metabolites",!1),e.draw_everything(),e.set_status("Showing secondary metabolites. You can hide them again in Settings.",2e3))})).on("brush",(function(){const e=ga.sourceEvent.shiftKey,t=nf(this);null!==t&&(e?n.selectAll(".node:not(.selected),.text-label:not(.selected)"):n.selectAll(".node,.text-label")).classed("selected",(e=>{const n=e.x,r=e.y;return t[0][0]<=n&&n<t[1][0]&&t[0][1]<=r&&r<t[1][1]}))})).on("end",(function(){l(t),null==nf(this)?c?c=!1:e.select_none():(c=!0,t.call(u.move,null))}));t.call(u),l(t)}}class sf{get options(){return this._options}constructor(e,t=[]){this._options=e,this.statusBus=new us,[this.busses,this.streams,this.acceptedStreams]=Hn.chain(e).mapObject(((e,n)=>{const r=Hn.contains(t,n),{bus:i,stream:o,acceptedStream:s}=this.createSetting(n,e,r);return[i,o,s]})).pairs().map((([e,[t,n,r]])=>[[e,t],[e,n],[e,r]])).unzip().map((e=>Hn.object(e))).value()}createSetting(e,t,n){const r=new us,i=n?function(e,t){const n=Hi(e,t.toProperty(null)).scan({savedValue:null,currentValue:null,lastStatus:null},(({savedValue:e,currentValue:t,lastStatus:n},[r,i])=>{const o=n!==i;return o&&"hold"===i?{savedValue:t,currentValue:t,lastStatus:i}:o||"hold"!==i?o&&"abandon"===i?{savedValue:null,currentValue:e,lastStatus:i}:o&&"accept"===i?{savedValue:null,currentValue:t,lastStatus:i}:{savedValue:null,currentValue:r,lastStatus:i}:{savedValue:e,currentValue:r,lastStatus:i}})).skip(1).map((({currentValue:e})=>e)).skipDuplicates().toEventStream();return n}(r,this.statusBus):r.toEventStream(),o=i.sampledBy(this.statusBus.filter((e=>"accept"===e||"abandon"===e))).merge(i.filter(this.statusBus.map((e=>"accept"===e)).toProperty(!0)));return i.onValue((t=>{this._options[e]=t})),r.push(t),{bus:r,stream:i,acceptedStream:o}}set_conditional(e,t){return console.warn("set_conditional is deprecated. Use Settings.set() instead"),this.set(e,t)}set(e,t){if(!(e in this.busses))throw new Error(`Invalid setting name ${e}`);this.busses[e].push(t)}get_option(e){return console.warn("get_option is deprecated. Use Settings.get() instead"),this.get(e)}get(e){return this._options[e]}holdChanges(){this.statusBus.push("hold")}abandonChanges(){this.statusBus.push("abandon")}acceptChanges(){this.statusBus.push("accept")}}class af{constructor(e,t,n){this.clearEscape=null,this.clearEnter=null,this.activeTarget=null;const r=e.append("div").attr("id","text-edit-input");this.placedDiv=new nc(r,t),this.placedDiv.hide(),this.input=r.append("input"),this.map=t,this.setUpMapCallbacks(t),this.zoomContainer=n,this.setUpZoomCallbacks(n),this.isNew=!1}setUpMapCallbacks(e){e.callback_manager.set("edit_text_label.text_edit_input",((e,t)=>{this.show(e,t)})),e.callback_manager.set("new_text_label.text_edit_input",(e=>{null!==this.activeTarget&&this._acceptChanges(this.activeTarget.target),this.hide(),this._addAndEdit(e)})),e.callback_manager.set("hide_text_label_editor.text_edit_input",(()=>{this.hide()}))}setUpZoomCallbacks(e){e.callbackManager.set("zoom.text_edit_input",(()=>{this.activeTarget&&this._acceptChanges(this.activeTarget.target),this.is_visible()&&this.hide()})),e.callbackManager.set("go_to.text_edit_input",(()=>{this.activeTarget&&this._acceptChanges(this.activeTarget.target),this.is_visible()&&this.hide()}))}is_visible(){return this.placedDiv.is_visible()}show(e,t){this.activeTarget&&this._acceptChanges(this.activeTarget.target),this.activeTarget={target:e,coords:t},e.each((e=>{this.input.node().value=e.text})),this.placedDiv.place(t),this.input.node().focus(),this.clearEscape=this.map.key_manager.addEscapeListener((()=>{this._acceptChanges(e),this.hide()})),this.clearEnter=this.map.key_manager.addEnterListener((()=>{this._acceptChanges(e),this.hide()}),!0)}hide(){this.isNew=!1,this.placedDiv.hide(),this.input.attr("value",""),this.activeTarget=null,this.clearEscape&&this.clearEscape(),this.clearEscape=null,this.clearEnter&&this.clearEnter(),this.clearEnter=null}_acceptChanges(e){const t=this.input.node().value;if(""===t)e.each((e=>{const t={};t[e.text_label_id]=this.map.text_labels[e.text_label_id],this.map.delete_selectable({},t,!0)}));else{const n=[];e.each((e=>{this.map.edit_text_label(e.text_label_id,t,!0,this.isNew),n.push(e.text_label_id)}))}}_addAndEdit(e){this.isNew=!0;const t=this.map.new_text_label(e,""),n=this.map.sel.select("#text-labels").selectAll(".text-label").filter((e=>e.text_label_id===t));n.select("text").classed("edit-text-cursor",!0),this.show(n,e)}}class lf extends qn.Component{constructor(e){super(e),this.state={display:!1}}componentDidMount(){this.props.connectSetStateFn((e=>this.setState(e)))}is_visible(){return this.state.display}render(){return this.state.display?(0,qn.h)(this.props.component,Object.assign({setDisplay:e=>this.setState({display:e}),ref:this.props.refPassthrough},this.state)):null}}const cf=function(e,t,n,r,i=null){(0,qn.render)((0,qn.h)(lf,{component:e,connectSetStateFn:n,ref:t,refPassthrough:i}),r,r.children.length>0?r.firstChild:void 0)};class uf extends qn.Component{constructor(e){super(e),this.wrapperRef=null,this.setWrapperRef=this.setWrapperRef.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.state={visible:!1}}componentDidMount(){document.addEventListener("mouseup",this.handleClickOutside)}setWrapperRef(e){this.wrapperRef=e}handleClickOutside(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.setState({visible:!1})}render(){return(0,qn.h)("div",{className:"selector"},(0,qn.h)("div",{className:["selectorTitle",this.props.disabled?"disabled":""].join(" "),ref:this.setWrapperRef,onClick:()=>{this.props.disabled||this.setState({visible:!this.state.visible})}},"Preset Scale Selections",(0,qn.h)("i",{className:"icon-sort-down"})),(0,qn.h)("div",{className:"selectorMenu",style:this.state.visible?{display:"block"}:{display:"none"}},this.props.children.map((e=>e))))}}const hf=uf;var df=n(72),pf=n.n(df),ff=n(825),gf=n.n(ff),mf=n(659),bf=n.n(mf),Af=n(56),_f=n.n(Af),vf=n(540),yf=n.n(vf),wf=n(113),xf=n.n(wf),Cf=n(33),Ef={};Ef.styleTagTransform=xf(),Ef.setAttributes=_f(),Ef.insert=bf().bind(null,"head"),Ef.domAPI=gf(),Ef.insertStyleElement=yf(),pf()(Cf.A,Ef),Cf.A&&Cf.A.locals&&Cf.A.locals;class Bf extends qn.Component{setUpDrag(){if(Sa(this.base).select(".pickerBox").on("mousedown.drag",null),!this.props.disabled){const e=Ac().on("start",(()=>{this.props.focus&&this.props.focus()})).on("drag",(()=>{"value"!==this.props.type&&this.props.onChange&&this.props.onChange("type","value");const e=this.props.value+ga.dx/this.props.trackWidth*(this.props.max-this.props.min),t=Math.max(this.props.min,Math.min(this.props.max,e));this.props.onChange("value",t)})).container((()=>this.base.parentNode.parentNode));Sa(this.base).select(".pickerBox").call(e)}}componentDidUpdate(){this.setUpDrag()}componentDidMount(){this.setUpDrag()}render(){return(0,qn.h)("div",{className:"picker",style:{left:this.props.location*this.props.trackWidth+"px",zIndex:this.props.zIndex}},this.props.showTrash&&(0,qn.h)("div",{className:"trashDiv"},(0,qn.h)("i",{className:"icon-trash-empty","aria-hidden":"true",onClick:()=>{this.props.remove&&this.props.remove()}})),(0,qn.h)("div",{className:"pickerBox",onClick:()=>{this.props.focus&&this.props.focus()}}),(0,qn.h)("div",{className:["pickerOptions",this.props.location>.8?"rightOptions":""].join(" ")},(0,qn.h)("input",{type:"text",className:"option",value:this.props.disabled?"":"value"===this.props.type?parseFloat(this.props.value.toFixed(2)):`${this.props.type} (${parseFloat(this.props.value.toFixed(2))})`,disabled:this.props.disabled,onInput:e=>{const t=parseFloat(e.target.value);isNaN(t)||this.props.onChange("value",t)},onFocus:e=>{e.target.select(),this.props.focus&&this.props.focus()}}),(0,qn.h)("select",{className:"typePicker",value:this.props.type,onChange:e=>{this.props.onChange&&this.props.onChange("type",e.target.value)},disabled:this.props.disabled,onFocus:()=>{this.props.focus&&this.props.focus()}},(0,qn.h)("option",{value:"value"},"Value"),(0,qn.h)("option",{value:"min"},"Min"),(0,qn.h)("option",{value:"mean"},"Mean"),(0,qn.h)("option",{value:"Q1"},"Q1"),(0,qn.h)("option",{value:"median"},"Median"),(0,qn.h)("option",{value:"Q3"},"Q3"),(0,qn.h)("option",{value:"max"},"Max")),(0,qn.h)("div",{className:"colorOptions"},(0,qn.h)("input",{type:"text",className:"colorText",onInput:e=>{this.props.onChange&&this.props.onChange("color",e.target.value)},onFocus:e=>{e.target.select(),this.props.focus&&this.props.focus()},value:this.props.color||"",disabled:this.props.disabled}),(0,qn.h)("input",{type:"color",className:"colorWheel",onInput:e=>{this.props.onChange&&this.props.onChange("color",e.target.value)},onFocus:e=>{e.target.select(),this.props.focus&&this.props.focus()},value:this.props.color||"",disabled:this.props.disabled})),(0,qn.h)("input",{type:"text",className:"option",onInput:e=>{this.props.onChange&&this.props.onChange("size",parseInt(e.target.value))},onFocus:e=>{e.target.select(),this.props.focus&&this.props.focus()},value:this.props.size,disabled:this.props.disabled})))}}const kf=Bf;var Sf=n(894),zf=n.n(Sf),Mf=n(858),Nf={};Nf.styleTagTransform=xf(),Nf.setAttributes=_f(),Nf.insert=bf().bind(null,"head"),Nf.domAPI=gf(),Nf.insertStyleElement=yf(),pf()(Mf.A,Nf),Mf.A&&Mf.A.locals&&Mf.A.locals;const Of=400;class Tf extends qn.Component{sortScale(){return Hn.sortBy(this.props.scale,(e=>"value"===e.type?e.value:this.props.stats[e.type]))}placePickers(){const e=this.props.stats,[t,n]=this.props.scale.reduce((([e,t],n)=>"value"===n.type?[Math.min(n.value,e),Math.max(n.value,t)]:[e,t]),[e.min,e.max]);return{pickerLocations:this.props.scale.map((r=>(("value"===r.type?r.value:e[r.type])-t)/(n-t))),absoluteMax:n,absoluteMin:t}}scaleChange(e,t,n){let r=null;"type"===t&&"value"!==n?(r=zf()(this.props.scale,{[e]:{[t]:{$set:n},$unset:["value"]}}),this.props.onChange(r)):"value"===t&&"value"!==this.props.scale[e].type?(r=zf()(this.props.scale,{[e]:{[t]:{$set:n},type:{$set:"value"}}}),this.props.onChange(r)):"value"===n?(r=zf()(this.props.scale,{[e]:{[t]:{$set:n},$merge:{value:this.props.stats[this.props.scale[e].type]}}}),this.props.onChange(r)):(!isNaN(parseFloat(n))||"#"===n[0]&&"color"===t)&&(r=zf()(this.props.scale,{[e]:{[t]:{$set:n}}}),this.props.onChange(r))}addColorStop(e){const t=zf()(this.props.scale,{$push:[{type:"value",value:e.layerX/e.target.clientWidth*this.props.stats.max+(1-e.layerX/e.target.clientWidth)*this.props.stats.min,color:"#9696ff",size:20}]});this.props.onChange(t)}makeGradient(e,t){const n=this.sortScale();return(n.length<2?[{type:"min",color:"#f1ecfa"},{type:"max",color:"#f1ecfa"}]:n).map((n=>{const r="value"===n.type?n.value:this.props.stats[n.type];return` ${n.color} ${(r-e)/(t-e)*100}%`})).toString()}removeColorStop(e){const t=zf()(this.props.scale,{$splice:[[[e],1]]});this.props.onChange(t)}render(){if(!this.props.stats)return(0,qn.h)("div",{className:"scaleEditor"},(0,qn.h)("div",null,(0,qn.h)("div",{className:"scaleTrack disabled",style:{width:Of}},this.props.type," data not loaded",(0,qn.h)(kf,{location:0,trackWidth:Of,disabled:!0}),(0,qn.h)(kf,{location:1,trackWidth:Of,disabled:!0}))),(0,qn.h)("div",{className:"scaleLabels"},(0,qn.h)("label",null,"Value:"),(0,qn.h)("label",null,"Color:"),(0,qn.h)("label",null,"Size:")),(0,qn.h)("div",{className:"noDataStyle"},(0,qn.h)("label",{className:"styleHeader"},"Styles for reactions with no data"),(0,qn.h)("br",null),(0,qn.h)("label",null,"Color:"),(0,qn.h)("input",{type:"text",className:"colorInput",disabled:!0}),(0,qn.h)("input",{type:"color",className:"colorWheel",disabled:!0}),(0,qn.h)("label",null,"Size:"),(0,qn.h)("input",{type:"text",className:"sizeInput",disabled:!0})));const{pickerLocations:e,absoluteMax:t,absoluteMin:n}=this.placePickers(),r=this.props.scale.map(((r,i)=>"value"!==r.type?(0,qn.h)(kf,{trackWidth:Of,type:r.type,location:e[i],onChange:(e,t)=>this.scaleChange(i,e,t),focus:()=>this.setState({focusedPicker:i}),remove:()=>this.removeColorStop(i),min:n,max:t,value:this.props.stats[r.type],color:r.color,size:r.size,zIndex:this.state.focusedPicker===i?2:0,showTrash:this.props.scale.length>=3}):null!=r.value?(0,qn.h)(kf,{trackWidth:Of,type:r.type,location:e[i],onChange:(e,t)=>this.scaleChange(i,e,t),focus:()=>this.setState({focusedPicker:i}),remove:()=>this.removeColorStop(i),min:n,max:t,value:r.value,color:r.color,size:r.size,zIndex:this.state.focusedPicker===i?2:0,showTrash:this.props.scale.length>=3}):void 0));return(0,qn.h)("div",{className:"scaleEditor"},(0,qn.h)("div",null,(0,qn.h)("i",{className:"settingsTip"},"To add a color stop to the scale, click the gradient"),(0,qn.h)("div",{className:"scaleTrack",style:{width:Of}},(0,qn.h)("div",{className:"gradient",onClick:e=>this.addColorStop(e),style:{background:`linear-gradient(to right,${this.makeGradient(n,t)})`}}),r)),(0,qn.h)("div",{className:"scaleLabels"},(0,qn.h)("label",null,"Value:"),(0,qn.h)("label",null,"Color:"),(0,qn.h)("label",null,"Size:")),(0,qn.h)("div",{className:"noDataStyle"},(0,qn.h)("label",{className:"styleHeader"},"Styles for reactions with no data"),(0,qn.h)("br",null),(0,qn.h)("label",null,"Color:"),(0,qn.h)("input",{type:"text",className:"colorInput",value:this.props.noDataColor,onInput:e=>this.props.onNoDataColorChange(e.target.value)}),(0,qn.h)("input",{type:"color",className:"colorWheel",value:this.props.noDataColor,onInput:e=>this.props.onNoDataColorChange(e.target.value)}),(0,qn.h)("label",null,"Size:"),(0,qn.h)("input",{type:"text",className:"sizeInput",value:this.props.noDataSize,onInput:e=>this.props.onNoDataSizeChange(parseFloat(e.target.value))})))}}const Df=Tf;class If extends qn.Component{constructor(e){super(e);const t=[];if(e.scale)for(let n=0;n<e.scale.length;n++)t.push(e.scale[n].color);this.state={colors:t}}render(){return(0,qn.h)("div",{className:"scaleSelection",onClick:()=>this.props.onClick()},(0,qn.h)("div",null,this.props.name),(0,qn.h)("div",{className:"scaleColors"},this.state.colors.map((e=>(0,qn.h)("i",{className:"icon-blank",style:{color:e}})))))}}const jf=If;var Pf=n(177),Ff={};Ff.styleTagTransform=xf(),Ff.setAttributes=_f(),Ff.insert=bf().bind(null,"head"),Ff.domAPI=gf(),Ff.insertStyleElement=yf(),pf()(Pf.A,Ff),Pf.A&&Pf.A.locals&&Pf.A.locals;class Lf extends qn.Component{constructor(){super(...arguments),this.state={clearEscape:()=>{},clearEnter:()=>{}}}componentWillMount(){this.props.settings.holdChanges(),this.setState({clearEscape:this.props.map.key_manager.addEscapeListener((()=>this.abandonChanges())),clearEnter:this.props.map.key_manager.addKeyListener(["enter"],(()=>this.saveChanges()),!0)})}componentWillUnmount(){this.state.clearEscape(),this.state.clearEnter()}abandonChanges(){this.props.settings.abandonChanges(),this.props.setDisplay(!1)}saveChanges(){this.props.settings.acceptChanges(),this.props.setDisplay(!1)}handleStyle(e,t){const n=this.props.settings.get(t),r=n.indexOf(e);-1===r?this.props.settings.set(t,[...n,e]):this.props.settings.set(t,[...n.slice(0,r),...n.slice(r+1)])}render(){const e=this.props.settings,t=e.get("enable_tooltips")||[],n=this.props.map.get_data_statistics();return(0,qn.h)("div",{className:"settingsBackground"},(0,qn.h)("div",{className:"settingsBoxContainer"},(0,qn.h)("button",{className:"discardChanges btn",onClick:()=>this.abandonChanges()},(0,qn.h)("i",{className:"icon-cancel","aria-hidden":"true"})),(0,qn.h)("button",{className:"saveChanges btn",onClick:()=>this.saveChanges()},(0,qn.h)("i",{className:"icon-ok","aria-hidden":"true"})),(0,qn.h)("div",{className:"settingsBox"},(0,qn.h)("div",{className:"settingsTip"},(0,qn.h)("i",null,"Tip: Hover over an option to see more details about it.")),(0,qn.h)("hr",null),(0,qn.h)("div",{className:"title"},"View and build options"),(0,qn.h)("div",{className:"settingsContainer"},(0,qn.h)("table",{className:"radioSelection"},(0,qn.h)("tr",{title:"The identifiers that are show in the reaction, gene, and metabolite labels on the map."},(0,qn.h)("td",{className:"optionLabel"},"Identifiers:"),(0,qn.h)("td",{className:"singleLine"},(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"identifiers",onClick:()=>{e.set("identifiers_on_map","bigg_id")},checked:"bigg_id"===e.get("identifiers_on_map")}),"ID's"),(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"identifiers",onClick:()=>{e.set("identifiers_on_map","name")},checked:"name"===e.get("identifiers_on_map")}),"Descriptive names")))),(0,qn.h)("label",{title:"If checked, then the scroll wheel and trackpad will control zoom rather than pan."},(0,qn.h)("input",{type:"checkbox",onClick:()=>{"zoom"===e.get("scroll_behavior")?e.set("scroll_behavior","pan"):e.set("scroll_behavior","zoom")},checked:"zoom"===e.get("scroll_behavior")}),"Scroll to zoom (instead of scroll to pan)"),(0,qn.h)("label",{title:"If checked, then only the primary metabolites will be displayed."},(0,qn.h)("input",{type:"checkbox",onClick:()=>e.set("hide_secondary_metabolites",!e.get("hide_secondary_metabolites")),checked:e.get("hide_secondary_metabolites")}),"Hide secondary metabolites"),(0,qn.h)("label",{title:"If checked, then gene reaction rules will be displayed below each reaction label. (Gene reaction rules are always shown when gene data is loaded.)"},(0,qn.h)("input",{type:"checkbox",onClick:()=>e.set("show_gene_reaction_rules",!e.get("show_gene_reaction_rules")),checked:e.get("show_gene_reaction_rules")}),"Show gene reaction rules"),(0,qn.h)("label",{title:"If checked, hide all reaction, gene, and metabolite labels"},(0,qn.h)("input",{type:"checkbox",onClick:()=>e.set("hide_all_labels",!e.get("hide_all_labels")),checked:e.get("hide_all_labels")}),"Hide reaction, gene, and metabolite labels"),(0,qn.h)("label",{title:"If checked, then allow duplicate reactions during model building."},(0,qn.h)("input",{type:"checkbox",onClick:()=>e.set("allow_building_duplicate_reactions",!e.get("allow_building_duplicate_reactions")),checked:e.get("allow_building_duplicate_reactions")}),"Allow duplicate reactions"),(0,qn.h)("label",{title:"If checked, then highlight in red all the reactions on the map that are not present in the loaded model."},(0,qn.h)("input",{type:"checkbox",onClick:()=>{e.set("highlight_missing",!e.get("highlight_missing"))},checked:e.get("highlight_missing")}),"Highlight reactions not in model"),(0,qn.h)("label",{title:"If true, then use CSS3 3D transforms to speed up panning and zooming."},(0,qn.h)("input",{type:"checkbox",onClick:()=>{e.set("use_3d_transform",!e.get("use_3d_transform"))},checked:e.get("use_3d_transform")}),"Use 3D transform for responsive panning and zooming"),(0,qn.h)("label",{title:"If true, highlights all nodes with the same BIGG id."},(0,qn.h)("input",{type:"checkbox",onClick:()=>{e.set("highlight_same_nodes",!e.get("highlight_same_nodes"))},checked:e.get("highlight_same_nodes")}),"Highlight all nodes with the same BIGG id"),(0,qn.h)("table",{style:{marginTop:"5px"}},(0,qn.h)("tr",{title:"Determines over which elements tooltips will display for reactions, metabolites, and genes"},(0,qn.h)("td",null,"Show tooltips over:"),(0,qn.h)("td",{className:"singleLine"},(0,qn.h)("label",{className:"tooltipOption",title:"If checked, tooltips will display over the gene, reaction, and metabolite labels"},(0,qn.h)("input",{type:"checkbox",onClick:()=>{const n="label",r=Hn.contains(t,n)?Hn.filter(t,(e=>e!==n)):[...t,n];e.set("enable_tooltips",r)},checked:Hn.contains(t,"label")}),"Labels"),(0,qn.h)("label",{className:"tooltipOption",title:"If checked, tooltips will display over the reaction line segments and metabolite circles"},(0,qn.h)("input",{type:"checkbox",onClick:()=>{const n="object",r=Hn.contains(t,n)?Hn.filter(t,(e=>e!==n)):[...t,n];e.set("enable_tooltips",r)},checked:Hn.contains(t,"object")}),"Objects"))))),(0,qn.h)("div",{className:"settingsTip",style:{marginTop:"16px"}},(0,qn.h)("i",null,"Tip: To increase map performance, turn off text boxes (i.e. labels and gene reaction rules).")),(0,qn.h)("hr",null),(0,qn.h)("div",{className:"scaleTitle"},(0,qn.h)("div",{className:"title"},"Reactions"),(0,qn.h)(hf,{disabled:null==n.reaction},Object.values(Hn.mapObject(Dd,((t,n)=>(0,qn.h)(jf,{name:n,scale:t,onClick:()=>{e.set("reaction_scale_preset",n)}})))))),(0,qn.h)(Df,{scale:e.get("reaction_scale"),settings:e,type:"Reaction",stats:n.reaction,noDataColor:e.get("reaction_no_data_color"),noDataSize:e.get("reaction_no_data_size"),onChange:t=>{e.set("reaction_scale",t)},onNoDataColorChange:t=>{e.set("reaction_no_data_color",t)},onNoDataSizeChange:t=>{e.set("reaction_no_data_size",t)},abs:e.get("reaction_styles").indexOf("abs")>-1}),(0,qn.h)("div",{className:"subheading"},"Reaction or Gene data"),(0,qn.h)("table",{className:"radioSelection"},(0,qn.h)("tr",null,(0,qn.h)("td",{className:"optionLabel",title:"Options for reactions data"},"Options:"),(0,qn.h)("td",null,(0,qn.h)("label",{className:"optionGroup",title:"If checked, use the absolute value when calculating colors and sizes of reactions on the map"},(0,qn.h)("input",{type:"checkbox",name:"reactionStyle",onClick:()=>this.handleStyle("abs","reaction_styles"),checked:Hn.contains(e.get("reaction_styles"),"abs"),disabled:null==n.reaction}),"Absolute value"),(0,qn.h)("label",{className:"optionGroup",title:"If checked, then size the thickness of reaction lines according to the value of the reaction data"},(0,qn.h)("input",{type:"checkbox",name:"reactionStyle",onClick:()=>this.handleStyle("size","reaction_styles"),checked:Hn.contains(e.get("reaction_styles"),"size"),disabled:null==n.reaction}),"Size"),(0,qn.h)("label",{className:"optionGroup",title:"If checked, then color the reaction lines according to the value of the reaction data"},(0,qn.h)("input",{type:"checkbox",name:"reactionStyle",onClick:()=>this.handleStyle("color","reaction_styles"),checked:Hn.contains(e.get("reaction_styles"),"color"),disabled:null==n.reaction}),"Color"),(0,qn.h)("br",null),(0,qn.h)("label",{className:"optionGroup",title:"If checked, then show data values in the reaction labels"},(0,qn.h)("input",{type:"checkbox",name:"reactionStyle",onClick:()=>this.handleStyle("text","reaction_styles"),checked:Hn.contains(e.get("reaction_styles"),"text"),disabled:null==n.reaction}),"Text (Show data in label)"))),(0,qn.h)("tr",{title:"The function that will be used to compare datasets, when paired data is loaded"},(0,qn.h)("td",{className:"optionLabel"},"Comparison:"),(0,qn.h)("td",null,(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"reactionCompare",onClick:()=>e.set("reaction_compare_style","fold"),checked:"fold"===e.get("reaction_compare_style"),disabled:null==n.reaction}),"Fold Change"),(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"reactionCompare",onClick:()=>e.set("reaction_compare_style","log2_fold"),checked:"log2_fold"===e.get("reaction_compare_style"),disabled:null==n.reaction}),"Log2 (Fold Change)"),(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"reactionCompare",onClick:()=>e.set("reaction_compare_style","diff"),checked:"diff"===e.get("reaction_compare_style"),disabled:null==n.reaction}),"Difference")))),(0,qn.h)("table",{className:"radioSelection"},(0,qn.h)("tr",{title:"The function that will be used to evaluate AND connections in gene reaction rules (AND connections generally connect components of an enzyme complex)"},(0,qn.h)("td",{className:"optionLabelWide"},"Method for evaluating AND:"),(0,qn.h)("td",null,(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"andMethod",onClick:()=>e.set("and_method_in_gene_reaction_rule","mean"),checked:"mean"===e.get("and_method_in_gene_reaction_rule"),disabled:null==n.reaction}),"Mean"),(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"andMethod",onClick:()=>e.set("and_method_in_gene_reaction_rule","min"),checked:"min"===e.get("and_method_in_gene_reaction_rule"),disabled:null==n.reaction}),"Min")))),(0,qn.h)("hr",null),(0,qn.h)("div",{className:"scaleTitle"},(0,qn.h)("div",{className:"title"},"Metabolites"),(0,qn.h)(hf,{disabled:null==n.metabolite},Object.values(Hn.mapObject(Dd,((t,n)=>(0,qn.h)(jf,{name:n,scale:t,onClick:()=>e.set("metabolite_scale",t)})))))),(0,qn.h)(Df,{scale:e.get("metabolite_scale"),settings:e,type:"Metabolite",stats:n.metabolite,noDataColor:e.get("metabolite_no_data_color"),noDataSize:e.get("metabolite_no_data_size"),onChange:t=>{e.set("metabolite_scale",t)},onNoDataColorChange:t=>{e.set("metabolite_no_data_color",t)},onNoDataSizeChange:t=>{e.set("metabolite_no_data_size",t)},abs:Hn.contains(e.get("metabolite_styles"),"abs")}),(0,qn.h)("div",{className:"subheading"},"Metabolite data"),(0,qn.h)("table",{className:"radioSelection"},(0,qn.h)("tr",null,(0,qn.h)("td",{className:"optionLabel",title:"Options for metabolite data"},"Options:"),(0,qn.h)("td",null,(0,qn.h)("label",{className:"optionGroup",title:"If checked, use the absolute value when calculating colors and sizes of metabolites on the map"},(0,qn.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:()=>this.handleStyle("abs","metabolite_styles"),checked:Hn.contains(e.get("metabolite_styles"),"abs"),disabled:null==n.metabolite}),"Absolute value"),(0,qn.h)("label",{className:"optionGroup",title:"If checked, then size the thickness of reaction lines according to the value of the metabolite data"},(0,qn.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:()=>this.handleStyle("size","metabolite_styles"),checked:Hn.contains(e.get("metabolite_styles"),"size"),disabled:null==n.metabolite}),"Size"),(0,qn.h)("label",{className:"optionGroup",title:"If checked, then color the reaction lines according to the value of the metabolite data"},(0,qn.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:()=>this.handleStyle("color","metabolite_styles"),checked:Hn.contains(e.get("metabolite_styles"),"color"),disabled:null==n.metabolite}),"Color"),(0,qn.h)("br",null),(0,qn.h)("label",{className:"optionGroup",title:"If checked, then show data values in the metabolite labels"},(0,qn.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:()=>this.handleStyle("text","metabolite_styles"),checked:Hn.contains(e.get("metabolite_styles"),"text"),disabled:null==n.metabolite}),"Text (Show data in label)"))),(0,qn.h)("tr",{title:"The function that will be used to compare datasets, when paired data is loaded"},(0,qn.h)("td",{className:"optionLabel"},"Comparison:"),(0,qn.h)("td",null,(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"metaboliteCompare",onClick:()=>e.set("metabolite_compare_style","fold"),checked:"fold"===e.get("metabolite_compare_style"),disabled:null==n.metabolite}),"Fold Change"),(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"metaboliteCompare",onClick:()=>e.set("metabolite_compare_style","log2_fold"),checked:"log2_fold"===e.get("metabolite_compare_style"),disabled:null==n.metabolite}),"Log2 (Fold Change)"),(0,qn.h)("label",{className:"optionGroup"},(0,qn.h)("input",{type:"radio",name:"metaboliteCompare",onClick:()=>e.set("metabolite_compare_style","diff"),checked:"diff"===e.get("metabolite_compare_style"),disabled:null==n.metabolite}),"Difference")))))))}}const Uf=Lf;var Rf=n(60),Wf={};Wf.styleTagTransform=xf(),Wf.setAttributes=_f(),Wf.insert=bf().bind(null,"head"),Wf.domAPI=gf(),Wf.insertStyleElement=yf(),pf()(Rf.A,Wf),Rf.A&&Rf.A.locals&&Rf.A.locals;class Vf extends qn.Component{constructor(e){super(e),this.wrapperRef=null,this.state={visible:null},this.setWrapperRef=this.setWrapperRef.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this)}componentWillMount(){this.setState({visible:!1})}componentDidMount(){document.addEventListener("mouseup",this.handleClickOutside)}componentWillReceiveProps(e){this.setState({visible:e.visible})}setWrapperRef(e){this.wrapperRef=e}handleClickOutside(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.setState({visible:!1})}render(){return(0,qn.h)("li",{className:"dropdown",style:this.props.disabledEditing?{display:"none"}:{display:"block"}},(0,qn.h)("div",{className:"dropdownButton",tabIndex:0,ref:this.setWrapperRef,onClick:()=>this.setState({visible:!this.state.visible})},this.props.name," ",(0,qn.h)("i",{className:"icon-sort-down"})),(0,qn.h)("ul",{className:"menu",style:this.state.visible?{display:"block"}:{display:"none"},id:"true"===this.props.rightMenu?"rightMenu":""},this.props.children.map((e=>e&&"divider"===e.attributes.name?(0,qn.h)("li",{style:{height:"1px",backgroundColor:"#e5e5e5",padding:"0",margin:"8px 0"}}):e))))}}const Yf=Vf;class Hf extends qn.Component{constructor(e){super(e),this.assignKeyForInput=this.assignKeyForInput.bind(this)}handleFileInput(e){const t=e.files[0],n=new window.FileReader;n.onload=()=>{Nl(t,$c,((e,t)=>this.props.onClick(t)))},void 0!==t&&n.readAsText(t),e.value=null}assignKeyForInput(e){this.props.assignKey&&this.props.assignKey((()=>e.click()))}render(){const e=Hn.contains(this.props.disabledButtons,this.props.name.replace(/ \(.*\)$/,""));return"load"===this.props.type?(0,qn.h)("label",{className:"menuButton",tabIndex:e?-1:0,id:e?"disabled":""},(0,qn.h)("input",{type:"file",onChange:e=>this.handleFileInput(e.target),disabled:e,ref:this.assignKeyForInput}),this.props.name):this.props.checkMark?(0,qn.h)("li",{className:"menuButton",tabIndex:e?-1:0,onClick:this.props.onClick,id:e?"disabled":""},(0,qn.h)("i",{className:"icon-ok","aria-hidden":"true"}," "),this.props.name):(0,qn.h)("li",{className:"menuButton",tabIndex:e?-1:0,onClick:e?null:this.props.onClick,id:e?"disabled":""},this.props.name)}}const qf=Hf;class Gf extends qn.Component{componentWillMount(){this.props.sel.selectAll(".escher-zoom-container").on("touchend.menuBar",(()=>this.setState({dropdownVisible:!1}))).on("click.menuBar",(()=>this.setState({dropdownVisible:!1})))}componentWillUnmount(){this.props.sel.selectAll(".escher-zoom-container").on("touchend.menuBar",null).on("click.menuBar",null)}render(){const e=this.props.settings.get("enable_keys"),t=this.props.settings.get("disabled_buttons"),n=this.props.map.beziers_enabled,r=this.props.settings.get("full_screen_button");return(0,qn.h)("div",null,(0,qn.h)("div",{id:"selection-info-container"}),(0,qn.h)("ul",{className:"menu-bar"},(0,qn.h)(Yf,{name:"Map",dropdownVisible:this.props.dropdownVisible},(0,qn.h)(qf,{name:"Save map JSON"+(e?" (Ctrl+S)":""),onClick:()=>this.props.saveMap(),disabledButtons:t}),(0,qn.h)(qf,{name:"Load map JSON"+(e?" (Ctrl+O)":""),onClick:e=>this.props.loadMap(e),assignKey:this.props.assignKeyLoadMap,type:"load",disabledButtons:t}),(0,qn.h)(qf,{name:"Export as SVG"+(e?" (Ctrl+Shift+S)":""),onClick:()=>this.props.save_svg(),disabledButtons:t}),(0,qn.h)(qf,{name:"Export as PNG"+(e?" (Ctrl+Shift+P)":""),onClick:()=>this.props.save_png(),disabledButtons:t}),(0,qn.h)(qf,{name:"Clear map",onClick:()=>this.props.clear_map(),disabledButtons:t}),this.props.settings.get("saveAction")&&(0,qn.h)(qf,{name:"Save Analysis",onClick:()=>{const e=this.props.settings.get("saveAction");e&&e()},disabledButtons:t}),this.props.settings.get("loadAction")&&(0,qn.h)(qf,{name:"Load Analysis",onClick:()=>this.props.settings.get("loadAction")(),disabledButtons:t})),(0,qn.h)(Yf,{name:"Model",dropdownVisible:this.props.dropdownVisible},(0,qn.h)(qf,{name:"Load COBRA model JSON"+(e?" (Ctrl+M)":""),onClick:e=>this.props.loadModel(e),assignKey:this.props.assignKeyLoadModel,type:"load",disabledButtons:t}),(0,qn.h)(qf,{name:"Update names and gene reaction rules using model",onClick:()=>this.props.updateRules(),disabledButtons:t}),(0,qn.h)(qf,{name:"Clear model",onClick:()=>this.props.clearModel(),disabledButtons:t})),(0,qn.h)(Yf,{name:"Data",dropdownVisible:this.props.dropdownVisible},(0,qn.h)(qf,{name:"Load reaction data",onClick:e=>this.props.setReactionData(e),type:"load",disabledButtons:t}),(0,qn.h)(qf,{name:"Clear reaction data",onClick:()=>this.props.clearReactionData(),disabledButtons:t}),(0,qn.h)("li",{name:"divider"}),(0,qn.h)(qf,{name:"Load gene data",onClick:e=>this.props.setGeneData(e),type:"load",disabledButtons:t}),(0,qn.h)(qf,{name:"Clear gene data",onClick:()=>this.props.clearGeneData(),disabledButtons:t}),(0,qn.h)("li",{name:"divider"}),(0,qn.h)(qf,{name:"Load metabolite data",onClick:e=>this.props.setMetaboliteData(e),type:"load",disabledButtons:t}),(0,qn.h)(qf,{name:"Clear metabolite data",onClick:()=>this.props.clearMetaboliteData(),disabledButtons:t})),(0,qn.h)(Yf,{name:"Edit",rightMenu:"true",dropdownVisible:this.props.dropdownVisible,disabledEditing:!this.props.settings.get("enable_editing")},(0,qn.h)(qf,{name:"Pan mode"+(e?" (Z)":""),checkMark:"zoom"===this.props.mode,onClick:()=>this.props.setMode("zoom"),disabledButtons:t}),(0,qn.h)(qf,{name:"Select mode"+(e?" (V)":""),checkMark:"brush"===this.props.mode,onClick:()=>this.props.setMode("brush"),disabledButtons:t}),(0,qn.h)(qf,{name:"Add reaction mode"+(e?" (N)":""),checkMark:"build"===this.props.mode,onClick:()=>this.props.setMode("build"),disabledButtons:t}),(0,qn.h)(qf,{name:"Rotate mode"+(e?" (R)":""),checkMark:"rotate"===this.props.mode,onClick:()=>this.props.setMode("rotate"),disabledButtons:t}),(0,qn.h)(qf,{name:"Text mode"+(e?" (T)":""),checkMark:"text"===this.props.mode,onClick:()=>this.props.setMode("text"),disabledButtons:t}),(0,qn.h)("li",{name:"divider"}),(0,qn.h)(qf,{name:"Delete"+(e?" (Del)":""),onClick:()=>this.props.deleteSelected(),disabledButtons:t}),(0,qn.h)(qf,{name:"Undo"+(e?" (Ctrl+Z)":""),onClick:()=>this.props.undo(),disabledButtons:t}),(0,qn.h)(qf,{name:"Redo"+(e?" (Ctrl+Shift+Z)":""),onClick:()=>this.props.redo(),disabledButtons:t}),(0,qn.h)("li",{name:"divider"}),(0,qn.h)(qf,{name:"Align vertical"+(e?" (Alt+L)":""),onClick:this.props.align_vertical,disabledButtons:t}),(0,qn.h)(qf,{name:"Align horizontal"+(e?" (Shift+Alt+L)":""),onClick:this.props.align_horizontal,disabledButtons:t}),(0,qn.h)(qf,{name:"Toggle primary/secondary"+(e?" (P)":""),onClick:()=>this.props.togglePrimary(),disabledButtons:t}),(0,qn.h)(qf,{name:"Rotate reactant locations"+(e?" (C)":""),onClick:()=>this.props.cyclePrimary(),disabledButtons:t}),(0,qn.h)("li",{name:"divider"}),(0,qn.h)(qf,{name:"Select all"+(e?" (Ctrl+A)":""),onClick:()=>this.props.selectAll(),disabledButtons:t}),(0,qn.h)(qf,{name:"Select none"+(e?" (Ctrl+Shift+A)":""),onClick:()=>this.props.selectNone(),disabledButtons:t}),(0,qn.h)(qf,{name:"Invert selection",onClick:()=>this.props.invertSelection(),disabledButtons:t})),(0,qn.h)(Yf,{name:"View",rightMenu:"true",dropdownVisible:this.props.dropdownVisible},(0,qn.h)(qf,{name:"Zoom in"+(e?" (+)":""),onClick:()=>this.props.zoom_in(),disabledButtons:t}),(0,qn.h)(qf,{name:"Zoom out"+(e?" (-)":""),onClick:()=>this.props.zoom_out(),disabledButtons:t}),(0,qn.h)(qf,{name:"Zoom to nodes"+(e?" (0)":""),onClick:()=>this.props.zoomExtentNodes(),disabledButtons:t}),(0,qn.h)(qf,{name:"Zoom to canvas"+(e?" (1)":""),onClick:()=>this.props.zoomExtentCanvas(),disabledButtons:t}),(0,qn.h)(qf,{name:"Find"+(e?" (F)":""),onClick:()=>this.props.search(),disabledButtons:t}),(0,qn.h)(qf,{name:`${n?"Hide":"Show"} control points${e?" (B)":""}`,onClick:()=>this.props.toggleBeziers(),disabledButtons:t}),(0,qn.h)("li",{name:"divider"}),r&&(0,qn.h)(qf,{name:"Full screen",onClick:()=>this.props.full_screen(),checkMark:this.props.isFullScreen,disabledButtons:t}),r&&(0,qn.h)("li",{name:"divider"}),(0,qn.h)(qf,{name:"Settings"+(e?" (,)":""),onClick:()=>this.props.renderSettingsMenu(),disabledButtons:t,type:"settings"})),(0,qn.h)("a",{className:"helpButton",target:"#",href:"https://escher.readthedocs.org"},"?")))}}const Qf=Gf;var Xf=n(392),Kf={};Kf.styleTagTransform=xf(),Kf.setAttributes=_f(),Kf.insert=bf().bind(null,"head"),Kf.domAPI=gf(),Kf.insertStyleElement=yf(),pf()(Xf.A,Kf),Xf.A&&Xf.A.locals&&Xf.A.locals;class Zf extends qn.Component{constructor(e){super(e),this.inputRef=null,this.state={current:0,searchItem:e.searchItem,counter:""}}componentWillMount(){this.setState({clearEscape:this.props.map.key_manager.addEscapeListener((()=>this.close())),clearNext:this.props.map.key_manager.addKeyListener(["enter","ctrl+g"],(()=>this.next()),!1),clearPrevious:this.props.map.key_manager.addKeyListener(["shift+enter","shift+ctrl+g"],(()=>this.previous()),!1)})}componentDidMount(){this.inputRef.focus()}componentWillUnmount(){var e,t,n,r,i,o;null===(t=(e=this.state).clearEscape)||void 0===t||t.call(e),null===(r=(n=this.state).clearNext)||void 0===r||r.call(n),null===(o=(i=this.state).clearPrevious)||void 0===o||o.call(i),this.props.map.highlight(null)}handleInput(e){const t=this.dropDuplicates(this.props.map.search_index.find(e));let n="";if(null!=t&&e)if(0===t.length)n="0 / 0",this.props.map.highlight(null);else{this.state.current>=t.length&&this.setState({current:0}),n=`${this.state.current+1}/${t.length}`;const e=t[this.state.current];if("reaction"===e.type)this.props.map.zoom_to_reaction(e.reaction_id),this.props.map.highlight_reaction(e.reaction_id);else if("metabolite"===e.type)this.props.map.zoom_to_node(e.node_id),this.props.map.highlight_node(e.node_id);else{if("text_label"!==e.type)throw new Error("Bad search index data type: "+e.type);this.props.map.zoom_to_text_label(e.text_label_id),this.props.map.highlight_text_label(e.text_label_id)}}else this.props.map.highlight(null);this.setState({searchItem:e,current:0,counter:n,results:t})}dropDuplicates(e){const t={metabolite:{type:"m",key:"node_id"},reaction:{type:"r",key:"reaction_id"},text_label:{type:"t",key:"text_label_id"}};return Hn.uniq(e,(e=>{const{type:n,key:r}=t[e.type];return`${n}${e[r]}`}))}next(){this.state.results&&this.state.results.length>0&&this.update((this.state.current+1)%this.state.results.length)}previous(){this.state.results&&this.state.results.length>0&&this.update((this.state.current+this.state.results.length-1)%this.state.results.length)}update(e){this.setState({current:e,counter:`${e+1}/${this.state.results.length}`});const t=this.state.results[e];if("reaction"===t.type)this.props.map.zoom_to_reaction(t.reaction_id),this.props.map.highlight_reaction(t.reaction_id);else if("metabolite"===t.type)this.props.map.zoom_to_node(t.node_id),this.props.map.highlight_node(t.node_id);else{if("text_label"!==t.type)throw new Error("Bad search index data type: "+t.type);this.props.map.zoom_to_text_label(t.text_label_id),this.props.map.highlight_text_label(t.text_label_id)}}close(){this.props.setDisplay(!1)}render(){return(0,qn.h)("div",{className:"search-container"},(0,qn.h)("input",{className:"search-field",value:this.state.searchItem,onInput:e=>this.handleInput(e.target.value),ref:e=>{this.inputRef=e}}),(0,qn.h)("button",{className:"search-bar-button left btn",onClick:()=>this.previous()},(0,qn.h)("i",{className:"icon-left-open"})),(0,qn.h)("button",{className:"search-bar-button right btn",onClick:()=>this.next()},(0,qn.h)("i",{className:"icon-right-open"})),(0,qn.h)("div",{className:"search-counter"},this.state.counter),(0,qn.h)("button",{className:"search-bar-button btn",onClick:()=>this.close()},(0,qn.h)("i",{className:"icon-cancel"})))}}const Jf=Zf;var $f=n(497),eg={};eg.styleTagTransform=xf(),eg.setAttributes=_f(),eg.insert=bf().bind(null,"head"),eg.domAPI=gf(),eg.insertStyleElement=yf(),pf()($f.A,eg),$f.A&&$f.A.locals&&$f.A.locals;class tg extends qn.Component{render(){const e=this.props.settings.get("menu"),t=this.props.settings.get("enable_keys"),n=this.props.settings.get("enable_editing");return(0,qn.h)("ul",{className:"button-panel"},!this.props.settings.get("pathFindingDisabled")&&(0,qn.h)("li",null,(0,qn.h)("button",{className:"button btn",onClick:()=>this.props.map.findAndHighlightShortest(),title:"Find Shortest path"},(0,qn.h)("i",{className:"icon-shortest-path"})),(0,qn.h)("div",{className:"kth-reaction-arrows"},(0,qn.h)("button",{className:"buttonGroup btn",title:"Previous shortest reaction",onClick:()=>this.props.map.findAndHighlightShortest(-1)},(0,qn.h)("i",{className:"icon-left-big"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Next shortest reaction",onClick:()=>this.props.map.findAndHighlightShortest(1)},(0,qn.h)("i",{className:"icon-right-big"})))),!this.props.settings.get("pathFindingDisabled")&&(0,qn.h)("li",null,(0,qn.h)("button",{className:"button btn",onClick:()=>this.props.map.findKthOutOrIngoingReactions(0,!0),title:"Highlight outgoing reactions"},(0,qn.h)("i",{className:"icon-arrows-outside"})),(0,qn.h)("div",{className:"kth-reaction-arrows"},(0,qn.h)("button",{className:"buttonGroup btn",title:"Decrement outgoing reactions",onClick:()=>this.props.map.findKthOutOrIngoingReactions(-1,!0)},(0,qn.h)("i",{className:"icon-left-big"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Increment outgoing reactions",onClick:()=>this.props.map.findKthOutOrIngoingReactions(1,!0)},(0,qn.h)("i",{className:"icon-right-big"})))),!this.props.settings.get("pathFindingDisabled")&&(0,qn.h)("li",null,(0,qn.h)("button",{className:"button btn",onClick:()=>this.props.map.findKthOutOrIngoingReactions(0,!1),title:"Highlight ingoing reactions"},(0,qn.h)("i",{className:"icon-arrows-inside"})),(0,qn.h)("div",{className:"kth-reaction-arrows"},(0,qn.h)("button",{className:"buttonGroup btn",title:"Decrement ingoing reactions",onClick:()=>this.props.map.findKthOutOrIngoingReactions(-1,!1)},(0,qn.h)("i",{className:"icon-left-big"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Increment ingoing reactions",onClick:()=>this.props.map.findKthOutOrIngoingReactions(1,!1)},(0,qn.h)("i",{className:"icon-right-big"})))),(0,qn.h)("li",null,(0,qn.h)("button",{className:"button btn",onClick:()=>this.props.zoomContainer.zoom_in(),title:"Zoom in"+(t?" (+)":"")},(0,qn.h)("i",{className:"icon-zoom-in"}))),(0,qn.h)("li",null,(0,qn.h)("button",{className:"button btn",onClick:()=>this.props.zoomContainer.zoom_out(),title:"Zoom out"+(t?" (-)":"")},(0,qn.h)("i",{className:"icon-zoom-out"}))),(0,qn.h)("li",null,(0,qn.h)("button",{className:"button btn",onClick:()=>this.props.map.zoom_extent_canvas(),title:"Zoom to canvas"+(t?" (1)":"")},(0,qn.h)("i",{className:"icon-resize-full"}))),(0,qn.h)("li",{style:{display:!1!==this.props.settings.get("full_screen_button")?"block":"none"}},(0,qn.h)("button",{className:"button btn "+(this.props.isFullScreen?"active-button":""),onClick:()=>this.props.full_screen(),title:"Toggle full screen"},(0,qn.h)("i",{className:"icon-resize-full-alt"}))),(0,qn.h)("li",{className:"grouping",style:{display:"all"===e&&n?"block":"none"}},(0,qn.h)("button",{className:"buttonGroup btn",title:"Pan mode"+(t?" (Z)":""),for:"zoom",id:"zoom"===this.props.mode?"currentMode":null,onClick:()=>this.props.setMode("zoom")},(0,qn.h)("i",{className:"icon-move"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Select mode"+(t?" (V)":""),for:"brush",id:"brush"===this.props.mode?"currentMode":null,onClick:()=>this.props.setMode("brush")},(0,qn.h)("i",{className:"icon-mouse-pointer"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Add reaction mode"+(t?" (N)":""),for:"build",onClick:()=>this.props.setMode("build"),id:"build"===this.props.mode?"currentMode":null},(0,qn.h)("i",{className:"icon-wrench"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Rotate mode"+(t?" (R)":""),for:"rotate",id:"rotate"===this.props.mode?"currentMode":null,onClick:()=>this.props.setMode("rotate")},(0,qn.h)("i",{className:"icon-cw"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Text mode"+(t?" (T)":""),for:"text",id:"text"===this.props.mode?"currentMode":null,onClick:()=>this.props.setMode("text")},(0,qn.h)("i",{className:"icon-font"}))),(0,qn.h)("li",{className:"grouping",style:{display:"build"===this.props.mode&&"all"===e&&n?"block":"none"}},(0,qn.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(t?" (←)":""),onClick:()=>this.props.buildInput.direction_arrow.left()},(0,qn.h)("i",{className:"icon-left-big"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(t?" (→)":""),onClick:()=>this.props.buildInput.direction_arrow.right()},(0,qn.h)("i",{className:"icon-right-big"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(t?" (↑)":""),onClick:()=>this.props.buildInput.direction_arrow.up()},(0,qn.h)("i",{className:"icon-up-big"})),(0,qn.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(t?" (↓)":""),onClick:()=>this.props.buildInput.direction_arrow.down()},(0,qn.h)("i",{className:"icon-down-big"}))))}}const ng=tg;class rg{constructor(e,t,n,r,i){this.div=e.append("div").attr("id","tooltip-container"),this.tooltipRef=null,this.zoomContainer=n,this.setUpZoomCallbacks(n),this.callbackManager=new cu,this.div.on("mouseover",this.cancelHideTooltip.bind(this)),this.div.on("mouseleave",this.hide.bind(this)),this.map=r,this.setUpMapCallbacks(r),this.settings=i,this.delayHideTimeout=null,this.currentTooltip=null,cf(t,null,(e=>this.callbackManager.set("pass_props",e)),this.div.node(),(e=>{this.tooltipRef=e})),this.passProps({display:!1,disableTooltips:()=>this.disableTooltips()})}disableTooltips(){this.settings.set("enable_tooltips",!1),this.map.draw_everything(),this.hide(),this.map.set_status("Tooltips disabled. You can enable them again in the\n                         settings menu.",3e3)}passProps(e={}){this.callbackManager.run("pass_props",null,e)}setUpMapCallbacks(e){this.placedDiv=new nc(this.div,e,void 0,!1),e.callback_manager.set("show_tooltip.tooltip_container",((e,t)=>{this.show(e,t)})),e.callback_manager.set("hide_tooltip.tooltip_container",(()=>this.hide())),e.callback_manager.set("delay_hide_tooltip.tooltip_container",(()=>this.delayHide())),e.sel.selectAll(".canvas-group").on("touchend",(()=>this.hide()))}setUpZoomCallbacks(e){e.callbackManager.set("zoom.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this)),e.callbackManager.set("go_to.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this))}is_visible(){return this.placedDiv.is_visible()}show(e,t){if(this.cancelHideTooltip(),!Hn.contains(["reaction_label","node_label","gene_label","reaction_object","node_object"],e))throw new Error("Tooltip not supported for object type "+e);{const n=null!==this.tooltipRef&&"get_size"in this.tooltipRef&&"function"==typeof this.tooltipRef.get_size?this.tooltipRef.get_size():{width:270,height:100};this.currentTooltip={type:e,id:t[e.replace("_label","_id").replace("_object","_id")]};const r=this.zoomContainer.windowTranslate,i=this.zoomContainer.windowScale,o=null!==this.map?this.map.get_size():{width:1e3,height:1e3},s={x:0,y:0},a="reaction_object"===e?t.xPos:t.label_x,l="reaction_object"===e?t.yPos:t.label_y,c=i*a+r.x+n.width,u=i*l+r.y+n.height;o.width<500?(c>o.width&&(s.x=-(c-o.width)/i),u>o.height-74&&(s.y=-(u-o.height+77)/i)):(i*a+r.x+.5*n.width>o.width?s.x=-n.width/i:c>o.width&&(s.x=-(c-o.width)/i),i*l+r.y+.5*n.height>o.height-45?s.y=-n.height/i:u>o.height-45&&(s.y=-(u-o.height+47)/i));const h={x:a+s.x,y:l+10+s.y};this.placedDiv.place(h),this.passProps({display:!0,biggId:t.bigg_id,name:t.name,loc:h,data:t.data_string,type:e.replace("_label","").replace("node","metabolite").replace("_object","")})}}hide(){this.placedDiv.hide(),this.currentTooltip=null}delayHide(){this.delayHideTimeout=setTimeout((()=>this.hide()),100)}cancelHideTooltip(){null!==this.delayHideTimeout&&clearTimeout(this.delayHideTimeout)}}var ig=n(203),og=n(663),sg={};sg.styleTagTransform=xf(),sg.setAttributes=_f(),sg.insert=bf().bind(null,"head"),sg.domAPI=gf(),sg.insertStyleElement=yf(),pf()(og.A,sg),og.A&&og.A.locals&&og.A.locals;var ag=n(239),lg={};lg.styleTagTransform=xf(),lg.setAttributes=_f(),lg.insert=bf().bind(null,"head"),lg.domAPI=gf(),lg.insertStyleElement=yf(),pf()(ag.A,lg),ag.A&&ag.A.locals&&ag.A.locals;const cg={display:"-webkit-flex",flexDirection:"column",boxSizing:"border-box",width:"320px",borderRadius:"2px",border:"1px solid #b58787",padding:"1.5%",backgroundColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontSize:"16px",fontFamily:"sans-serif",color:"#111",boxShadow:"4px 6px 20px 0px rgba(0, 0, 0, 0.4)",position:"relative",zIndex:"3"},ug={alignSelf:"center",color:"black",fontSize:"12px",fontWeight:"bold",visibility:"visible"},hg={marginTop:"0.5%",display:"-webkit-flex",flexDirection:"column",alignSelf:"center",width:"14px",height:"14px",visibility:"visible"};class dg extends qn.Component{constructor(e){super(e),this.state=Object.assign({upper_bound:25,lower_bound:-25,data:[]},e)}componentWillReceiveProps(e){this.setState(Object.assign(Object.assign({},this.state),e))}render(){const{data:e,upper_bound:t,lower_bound:n}=this.state,r=e.length>0?100/e.length:0,i=e.length>0?Math.max(...e):0,o=i>0?110/i:0,s=(t+n)/2;return(0,qn.h)("div",{className:"escher-distribution-histogram",style:{position:"relative",width:"100%",height:"150px",paddingTop:"20px"}},(0,qn.h)("div",{style:{display:"flex",height:"110px",alignItems:"flex-end",width:"100%"}},e.map(((t,n)=>{const i=t*o;return(0,qn.h)("div",{key:`bar-${n}-${Math.random()}`,style:{width:`${r}%`,height:`${i}px`,backgroundColor:"#2083D590",marginRight:n===e.length-1?"0":"1px",borderBottom:"1px solid black"}})}))),(0,qn.h)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",position:"absolute",left:"0"}},(0,qn.h)("div",{style:{textAlign:"left"}},n),(0,qn.h)("div",null,s),(0,qn.h)("div",{style:{textAlign:"right"}},t)))}}class pg extends qn.Component{constructor(e){super(e),this.state={lowerBound:0,upperBound:0,lowerBoundOld:0,upperBoundOld:0,currentFlux:0,coefficient:0,lowerBoundString:"",upperBoundString:"",type:"reaction",name:"",reactionInModel:!0,indicatorStyle:hg,fluxDisplayStyle:ug,tooltipStyle:cg,objectives:{},fluxDistributions:e.fluxDistributions},this.initState(e,{})}componentWillReceiveProps(e){this.initState(e,this.props)}initState(e,t){let n=!1;if("reaction"===e.type&&void 0!==e.model&&null!=e.model){const r={};if(e.biggId!==t.biggId||e.model!==t.model){for(let t=0,i=e.model.reactions.length;t<i;t++)if(e.model.reactions[t].id===e.biggId){n=!0,r.lowerBound=e.model.reactions[t].lower_bound,r.upperBound=e.model.reactions[t].upper_bound,r.lowerBoundString=e.model.reactions[t].lower_bound.toString(),r.upperBoundString=e.model.reactions[t].upper_bound.toString(),r.lowerBoundOld=e.oldModel.reactions[t].lower_bound,r.upperBoundOld=e.oldModel.reactions[t].upper_bound,r.name=e.model.reactions[t].name,r.coefficient=e.model.reactions[t].objective_coefficient,null!=e.reactionData?r.currentFlux=e.reactionData[e.biggId]:r.currentFlux=null;break}}else{n=!0;for(let t=0,n=e.model.reactions.length;t<n;t++)if(e.model.reactions[t].id===e.biggId){null!=e.reactionData&&(r.currentFlux=e.reactionData[e.biggId]);break}}let i={},o={};null!=e.reactionData?(o=Math.abs(r.currentFlux)>e.upperRange?{marginLeft:r.currentFlux/Math.abs(r.currentFlux)*100+"%"}:{marginLeft:r.currentFlux/(e.upperRange+1)*100+"%"},i=r.currentFlux>.65*e.upperRange?{alignSelf:"flex-end"}:r.currentFlux<.65*e.lowerRange?{alignSelf:"flex-start"}:{marginLeft:r.currentFlux/(e.upperRange+1)*100+"%"}):(i={visibility:"hidden"},o={visibility:"hidden"}),this.setState(Object.assign(Object.assign({},r),{reactionInModel:n,fluxDisplayStyle:Object.assign(Object.assign({},ug),i),indicatorStyle:Object.assign(Object.assign({},hg),o),type:e.type,objectives:{}}))}else this.setState({type:e.type,reactionInModel:!1})}get_size(){return{width:320,height:175}}fluxConverter(e){return e<this.props.lowerRange?-1e3:e>this.props.upperRange?1e3:e+this.props.upperRange+1}tipConverter(e){let t=0;return this.props.step<1&&(t=Math.ceil(-Math.log10(this.props.step))),e<1?-1e3:e>2*this.props.upperRange+1?1e3:parseFloat((e-(this.props.upperRange+1)).toFixed(t))}boundConverter(e){return e.map(this.tipConverter.bind(this))}onTouchStart(){const e=Object.assign(Object.assign({},this.state.tooltipStyle),{backgroundColor:"rgba(255, 255, 255, 0.8)"});this.setState({tooltipStyle:e})}handleMarkerPosition(e){return null!=this.props.reactionData?e<this.props.lowerRange?0:e>this.props.upperRange?2*(this.props.upperRange+1):e+this.props.upperRange+1:this.props.upperRange+1}handleKeyUp(e,t){this.setState({lowerBoundString:t[0],upperBoundString:t[1]}),parseFloat(t[0])===this.state.lowerBound&&parseFloat(t[1])===this.state.upperBound||(isNaN(parseFloat(e.target.value))?console.error("Invalid Bounds"):this.sliderChange([parseFloat(this.state.lowerBoundString),parseFloat(this.state.upperBoundString)]))}sliderChange(e){e[0]!==parseFloat(this.state.lowerBoundString)||e[1]!==parseFloat(this.state.upperBoundString)?this.setState({lowerBound:e[0],upperBound:e[1],lowerBoundString:e[0].toString(),upperBoundString:e[1].toString()}):this.setState({lowerBound:e[0],upperBound:e[1]}),this.props.sliderChange(e,this.props.biggId)}onTouchEnd(e){this.sliderChange(e),this.setState({tooltipStyle:cg})}resetReaction(){this.sliderChange([this.state.lowerBoundOld,this.state.upperBoundOld])}decompartmentalizeCheck(e,t){return"metabolite"===t?Hl(e)[0]:e}openBigg(){const e=this.props.type,t=this.props.biggId,n="http://bigg.ucsd.edu/",r="gene"===e?n+"search?query="+t:n+"universal/"+e+"s/"+this.decompartmentalizeCheck(t,e);window.open(r)}render(){if("reaction"===this.state.type&&this.state.reactionInModel){this.props.objectives[this.props.biggId],Object.keys(this.props.objectives).length,this.props.objectives[this.props.biggId];const e=(Object.keys(this.props.objectives).length,this.props.fluxDistributions&&null!=this.props.fluxDistributions.upper_bound&&null!=this.props.fluxDistributions.lower_bound&&this.props.fluxDistributions.data&&!!this.props.fluxDistributions.data.get(this.props.biggId));return(0,qn.h)("div",{className:"escher-tooltip",style:Object.assign(Object.assign({},this.state.tooltipStyle),{touchAction:"none"})},(0,qn.h)("div",{className:"biggId"},this.props.biggId),(0,qn.h)("div",{className:"name"},this.props.name),(0,qn.h)("div",{className:"slider",style:{width:"298px"}},(0,qn.h)(ig.Q6,{onBeforeChange:()=>this.onTouchStart(),style:{alignSelf:"center"},min:0,max:2*(this.props.upperRange+1),step:this.props.step,value:[this.fluxConverter(this.state.lowerBound),this.fluxConverter(this.state.upperBound)],tipFormatter:()=>null,allowCross:!1,pushable:0,onChange:e=>this.sliderChange(this.boundConverter(e)),onAfterChange:e=>this.onTouchEnd(this.boundConverter(e))}),(0,qn.h)("div",{className:"indicator",style:this.state.indicatorStyle},(0,qn.h)("svg",{viewBox:"0 0 100 100",height:"100%",width:"100%"},(0,qn.h)("defs",null,(0,qn.h)("marker",{id:"markerArrow1",viewBox:"0 0 6 6",refX:"4",refY:"3",orient:"auto"},(0,qn.h)("path",{d:"M5,3 L3,5 L3,1 Z",fill:"black",stroke:"black"}))),(0,qn.h)("line",{x1:"50",y1:"75",x2:"50",y2:"20","stroke-width":"25",stroke:"black","marker-end":"url(#markerArrow1)"}))),(0,qn.h)("div",{className:"fluxDisplay",style:this.state.fluxDisplayStyle},"Average Flux: ",null==this.state.currentFlux?"":this.state.currentFlux.toFixed(2))),(0,qn.h)("div",{className:"interfacePanel"},(0,qn.h)("div",{className:"labels"},(0,qn.h)("div",{style:{fontSize:"12px"}},"Lower bound"),(0,qn.h)("div",{style:{fontSize:"12px"}},"Upper bound")),(0,qn.h)("div",{className:"inputPanel"},(0,qn.h)("input",{type:"text",className:"input",value:this.state.lowerBoundString,onFocus:e=>e.target.select(),onKeyUp:e=>this.handleKeyUp(e,[e.target.value,this.state.upperBoundString])}),(0,qn.h)("input",{type:"text",className:"input",value:this.state.upperBoundString,onFocus:e=>e.target.select(),onKeyUp:e=>{var t;return this.handleKeyUp(e,[this.state.lowerBound.toString(),null===(t=e.target.value)||void 0===t?void 0:t.toString()])}})),(0,qn.h)("div",{className:"buttonBar"},(0,qn.h)("button",{className:"button",onClick:()=>this.sliderChange([0,0])},"Knockout"),(0,qn.h)("button",{className:"button",onClick:()=>this.resetReaction()},"Reset"),null!=this.props.samplingFunction&&(0,qn.h)("button",{className:"button",onClick:()=>this.props.samplingFunction()},"Run Sampling"))),e&&(0,qn.h)("div",{className:"histogramPanel"},(0,qn.h)(dg,{data:this.props.fluxDistributions.data.get(this.props.biggId),upper_bound:this.props.fluxDistributions.upper_bound,lower_bound:this.props.fluxDistributions.lower_bound})))}if("reaction"!==this.state.type||this.state.reactionInModel){const e=this.decompartmentalizeCheck(this.props.biggId,this.props.type);return(0,qn.h)("div",{className:"escher-tooltip",style:Object.assign(Object.assign({},this.state.tooltipStyle),{touchAction:"none",height:"fit-content",width:"250px"})},(0,qn.h)("div",{className:"biggId"},this.props.biggId),(0,qn.h)("div",{className:"name"},this.props.name),(0,qn.h)("button",{className:"button",style:{width:"fit-content",marginTop:"10px"},onClick:()=>this.openBigg()},"Open ",e," in BiGG Models"))}return(0,qn.h)("div",{className:"escher-tooltip",style:Object.assign(Object.assign({},cg),{height:"50px",width:"400px"})},(0,qn.h)("div",{className:"biggId"},this.props.biggId," is not in the model"))}}const fg=pg;var gg=n(368),mg={};mg.styleTagTransform=xf(),mg.setAttributes=_f(),mg.insert=bf().bind(null,"head"),mg.domAPI=gf(),mg.insertStyleElement=yf(),pf()(gg.A,mg),gg.A&&gg.A.locals&&gg.A.locals;var bg=n(50),Ag={};Ag.styleTagTransform=xf(),Ag.setAttributes=_f(),Ag.insert=bf().bind(null,"head"),Ag.domAPI=gf(),Ag.insertStyleElement=yf(),pf()(bg.A,Ag),bg.A&&bg.A.locals&&bg.A.locals;const _g=hl(class{constructor(e,t,n,r,i){this.reaction_sampling_distribution=null,this.map_data=null,this.model_data=null,this.embeddedCss=null,this.selection=null,this.menu_div=null,this.button_div=null,this.search_bar_div=null,this.searchBarRef=null,this.semanticOptions=null,this.mode=null,this.settings=null,this.isFullScreen=null,this.savedFullScreenSettings=null,this.savedFullScreenParent=null,this.clearFullScreenEscape=null,this.callback_manager=null,this.map=null,this.mapToolsContainer=null,this.zoom_container=null,this.tooltip_container=null,this.cobra_model=null,this.settingsMenuRef=null,this.menuBarRef=null,this.buttonPanelRef=null,r?r instanceof ka||(r=Sa("node"in r?r.node():r)):r=Sa("body").append("div"),i||(i={}),n||(n="svg.escher-svg #mouse-node {\r\n  fill: none;\r\n}\r\nsvg.escher-svg #canvas {\r\n  stroke: #ccc;\r\n  stroke-width: 7px;\r\n  fill: white;\r\n}\r\nsvg.escher-svg .resize-rect {\r\n  fill: black;\r\n  opacity: 0;\r\n  stroke: none;\r\n}\r\nsvg.escher-svg .label {\r\n  font-family: sans-serif;\r\n  font-style: italic;\r\n  font-weight: bold;\r\n  font-size: 8px;\r\n  fill: black;\r\n  stroke: none;\r\n  text-rendering: optimizelegibility;\r\n  cursor: default;\r\n}\r\nsvg.escher-svg .reaction-label {\r\n  font-size: 30px;\r\n  fill: rgb(32, 32, 120);\r\n  text-rendering: optimizelegibility;\r\n}\r\nsvg.escher-svg .node-label {\r\n  font-size: 20px;\r\n}\r\nsvg.escher-svg .gene-label {\r\n  font-size: 18px;\r\n  fill: rgb(32, 32, 120);\r\n  text-rendering: optimizelegibility;\r\n  cursor: default;\r\n}\r\nsvg.escher-svg .text-label .label {\r\n  font-size: 50px;\r\n}\r\nsvg.escher-svg .text-label-input {\r\n  font-size: 50px;\r\n}\r\nsvg.escher-svg .node-circle {\r\n  stroke-width: 2px;\r\n}\r\nsvg.escher-svg .midmarker-circle, svg.escher-svg .multimarker-circle {\r\n  fill: white;\r\n  fill-opacity: 0.2;\r\n  stroke: rgb(50, 50, 50);\r\n}\r\nsvg.escher-svg g.selected .node-circle{\r\n  stroke-width: 6px;\r\n  stroke: rgb(20, 113, 199);\r\n}\r\nsvg.escher-svg g.selected .label {\r\n  fill: rgb(20, 113, 199);\r\n}\r\nsvg.escher-svg .metabolite-circle {\r\n  stroke: rgb(162, 69, 16);\r\n  fill: rgb(255,116,0);\r\n}\r\nsvg.escher-svg g.selected .metabolite-circle {\r\n  stroke: rgb(0, 0, 0);\r\n  stroke-width: 12px;\r\n}\r\nsvg.escher-svg .segment {\r\n  stroke: #ab0c13;\r\n  stroke-width: 10px;\r\n  fill: none;\r\n}\r\nsvg.escher-svg .arrowhead {\r\n  fill: #ab0c13;\r\n}\r\nsvg.escher-svg .stoichiometry-label-rect {\r\n  fill: white;\r\n  opacity: 0.5;\r\n}\r\nsvg.escher-svg .stoichiometry-label {\r\n  fill: #ab0c13;\r\n  font-size: 17px;\r\n}\r\nsvg.escher-svg .membrane {\r\n  fill: none;\r\n  stroke: rgb(255, 187, 0);\r\n}\r\nsvg.escher-svg .brush .extent {\r\n  fill-opacity: 0.1;\r\n  fill: black;\r\n  stroke: #fff;\r\n  shape-rendering: crispEdges;\r\n}\r\nsvg.escher-svg #brush-container .background {\r\n  fill: none;\r\n}\r\nsvg.escher-svg .bezier-circle {\r\n  fill: rgb(255,255,255);\r\n}\r\nsvg.escher-svg .bezier-circle.b1 {\r\n  stroke: red;\r\n}\r\nsvg.escher-svg .bezier-circle.b2 {\r\n  stroke: blue;\r\n}\r\nsvg.escher-svg .connect-line{\r\n  stroke: rgb(200,200,200);\r\n}\r\nsvg.escher-svg .direction-arrow {\r\n  cursor: default;\r\n  stroke: black;\r\n  stroke-width: 1px;\r\n  fill: white;\r\n  opacity: 0.3;\r\n}\r\nsvg.escher-svg .start-reaction-target {\r\n  stroke: rgb(100,100,100);\r\n  fill: none;\r\n  opacity: 0.5;\r\n}\r\nsvg.escher-svg .rotation-center-line {\r\n  stroke: red;\r\n  stroke-width: 5px;\r\n}\r\nsvg.escher-svg .highlight {\r\n  fill: #D97000;\r\n  text-decoration: underline;\r\n}\r\nsvg.escher-svg .node-to-combine {\r\n  stroke-width: 12px !important;\r\n}\r\n"),this.reaction_sampling_distribution={lower_bound:-25,upper_bound:25,data:new Map},this.map_data=e,this.model_data=t,this.embeddedCss=n,this.selection=r,this.menu_div=null,this.button_div=null,this.search_bar_div=null,this.searchBarRef=null,this.semanticOptions=null,this.mode="zoom",this.selection.datum(this),this.selection.__builder__=this,this.has_custom_reaction_styles=Boolean(i.reaction_styles);const o=il(i,{menu:"all",pathFindingDisabled:!1,saveAction:null,loadAction:null,scroll_behavior:"pan",use_3d_transform:!1,highlight_same_nodes:!1,enable_editing:!0,enable_keys:!0,enable_search:!0,fill_screen:!1,zoom_to_element:null,full_screen_button:!1,ignore_bootstrap:!1,disabled_buttons:null,semantic_zoom:null,starting_reaction:null,never_ask_before_quit:!1,unique_map_id:null,primary_metabolite_radius:20,secondary_metabolite_radius:10,marker_radius:5,gene_font_size:18,hide_secondary_metabolites:!1,show_gene_reaction_rules:!1,hide_all_labels:!1,canvas_size_and_loc:null,reaction_data:null,reaction_styles:["color","size","text","abs"],reaction_compare_style:"log2_fold",reaction_scale:null,reaction_scale_preset:"GaBuGeRd",reaction_no_data_color:"#dcdcdc",reaction_no_data_size:8,samplingFunction:null,gene_data:null,and_method_in_gene_reaction_rule:"mean",metabolite_data:null,metabolite_styles:["color","size","text"],metabolite_compare_style:"log2_fold",metabolite_scale:null,metabolite_scale_preset:"WhYlRd",metabolite_no_data_color:"#ffffff",metabolite_no_data_size:10,identifiers_on_map:"bigg_id",highlight_missing:!1,allow_building_duplicate_reactions:!1,cofactors:["atp","adp","nad","nadh","nadp","nadph","gtp","gdp","h","coa","ump","h2o","ppi"],tooltip_component:fg,enable_tooltips:["label"],enable_keys_with_tooltip:!0,first_load_callback:null},{primary_metabolite_radius:!0,secondary_metabolite_radius:!0,marker_radius:!0,gene_font_size:!0,reaction_no_data_size:!0,metabolite_no_data_size:!0});if(Zl(this.selection,"svg"))throw new Error("Builder cannot be placed within an svg node because UI elements are html-based.");this.settings=new sf(o,["identifiers_on_map","scroll_behavior","hide_secondary_metabolites","show_gene_reaction_rules","hide_all_labels","allow_building_duplicate_reactions","highlight_missing","enable_tooltips","reaction_scale_preset","reaction_no_data_color","reaction_no_data_size","reaction_scale","reaction_styles","reaction_compare_style","and_method_in_gene_reaction_rule","metabolite_scale_preset","metabolite_scale","metabolite_styles","metabolite_compare_style","metabolite_no_data_color","metabolite_no_data_size","samplingFunction"]),this.settings.get("fill_screen")&&this.settings.get("full_screen_button")&&(this.settings.set("full_screen_button",!1),console.warn("The option full_screen_button has no effect when fill_screen is true")),this.isFullScreen=!1,this.settings.get("fill_screen")&&(Sa("html").classed("fill-screen",!0),Sa("body").classed("fill-screen",!0),this.selection.classed("fill-screen-div",!0),this.isFullScreen=!0),this.savedFullScreenSettings=null,this.savedFullScreenParent=null,this.clearFullScreenEscape=null,this.callback_manager=new cu;const s=this.settings.get("first_load_callback");this.callback_manager.set("first_load",(()=>{null!==s&&s(this);let e=JSON.parse(JSON.stringify(this.model_data));const t=()=>{const t=Hn.debounce(((e,t)=>{if(!(e&&t&&Array.isArray(e)&&"string"==typeof t&&this.model_data&&this.model_data.reactions))return;const n=e[0],r=e[1],i=t;for(let e=0;e<this.model_data.reactions.length;e++)if(this.model_data.reactions[e].id===i){this.model_data.reactions[e].lower_bound=n,this.model_data.reactions[e].upper_bound=r;break}}),300);return{map:this.map,model:this.model_data,sliderChange:t,lowerRange:-25,upperRange:25,step:.01,oldModel:e,objectives:{},samplingFunction:this.settings.get("samplingFunction")?this.sampleReactions.bind(this):null,fluxDistributions:this.reaction_sampling_distribution,reactionData:this.settings.get("reaction_data")}};this.tooltip_container.passProps(t()),this.callback_manager.set("load_map",(n=>{this.set_reaction_data(null),e=JSON.parse(JSON.stringify(this.model_data)),this.tooltip_container.passProps(t())})),this.callback_manager.set("load_model",(n=>{this.set_reaction_data(null),e=JSON.parse(JSON.stringify(this.model_data)),this.tooltip_container.passProps(t())}))})),this.zoom_container=new bd(this.selection,this.settings.get("scroll_behavior"),this.settings.get("use_3d_transform")),this.zoom_container.callbackManager.set("zoom_change",(()=>{if(this.settings.get("semantic_zoom")){const e=this.zoom_container.windowScale,t=this.settings.get("semantic_zoom").sort(((e,t)=>e.zoomLevel-t.zoomLevel)).find((t=>t.zoomLevel>e));if(t){let e=!1;Hn.mapObject(t.options,((t,n)=>{this.settings.get(n)!==t&&(this.settings.set(n,t),e=!0)})),e&&this._updateData(!1,!0)}}})),this.settings.streams.use_3d_transform.onValue((e=>{this.zoom_container.setUse3dTransform(e)})),this.settings.streams.scroll_behavior.onValue((e=>{this.zoom_container.setScrollBehavior(e)})),this.settings.streams.enable_tooltips.onValue((e=>{this._updateTooltipSetting(e)})),this.mapToolsContainer=this.selection.append("div").attr("class","map-tools-container"),this._createStatus(this.selection),this.load_model(this.model_data,!1);const a=this.selection.append("div").attr("class","search-menu-container").append("div").attr("class","search-menu-container-inline");this.menu_div=a.append("div"),this.search_bar_div=a.append("div"),this.button_div=this.selection.append("div"),Hn.delay((()=>{this.load_map(this.map_data,!1);const e=this._reactionCheckAddAbs();this._updateData(!0,!0),this.settings.statusBus.onValue((e=>{if("accept"===e){if(this._updateData(!0,!0,["reaction","metabolite"],!1),null!==this.zoom_container){const e=this.settings.get("scroll_behavior");this.zoom_container.setScrollBehavior(e)}null!==this.map&&(this.map.draw_all_nodes(!1),this.map.draw_all_reactions(!0,!1),this.map.select_none())}})),null!==e&&setTimeout(e,500),Hn.defer((()=>this.callback_manager.run("first_load",this)))}),50)}sampleReactions(){const e=this.settings.get("samplingFunction");if(e){const t=e(this.model_data),n=e=>{if(!e)throw new Error("Sampling function did not return any data");this.reaction_sampling_distribution.lower_bound=e.lower_bound,this.reaction_sampling_distribution.upper_bound=e.upper_bound,this.reaction_sampling_distribution.data.clear();for(const[t,n]of e.data)this.reaction_sampling_distribution.data.set(t,n)};t instanceof Promise?t.then(n):n(t)}}get options(){throw new Error("builder.options is deprecated. Use builder.settings.get() and builder.settings.set() instead.")}set options(e){throw new Error("builder.options is deprecated. Use builder.settings.get() and builder.settings.set() instead.")}load_model(e,t=!0){this.model_data=e,this.reaction_sampling_distribution.data.clear(),Hn.isNull(e)?this.cobra_model=null:this.cobra_model=su.from_cobra_json(e),this.map&&(this.map.cobra_model=this.cobra_model,t&&this._updateData(!0,!1),this.settings.get("highlight_missing")&&this.map.draw_all_reactions(!1,!1)),this.callback_manager.run("load_model",null,e,t)}load_map(e,t=!0){const n={};if(this.settings.get("semantic_zoom")){for(const e of this.settings.get("semantic_zoom"))Object.keys(e.options).map((e=>{void 0===n[e]&&(n[e]=this.settings.get(e))}));this.semanticOptions=Object.assign({},n)}ol(this.zoom_container.zoomedSel),ol(this.mapToolsContainer);const r=this.zoom_container.zoomedSel,i=this.zoom_container.svg;this.map&&this.map.key_manager.toggle(!1),this.map=null!==e?Dp.from_data(e,i,this.embeddedCss,r,this.zoom_container,this.settings,this.cobra_model,this.settings.get("enable_search")):new Dp(i,this.embeddedCss,r,this.zoom_container,this.settings,this.cobra_model,this.settings.get("canvas_size_and_loc"),this.settings.get("enable_search")),this._setupStatus(this.map),this.map.set_status("Loading map ..."),this._updateTooltipSetting(this.settings.get("enable_tooltips")),t&&this._updateData(!1,!0),this.build_input=new lu(this.mapToolsContainer,this.map,this.zoom_container,this.settings),this.text_edit_input=new af(this.mapToolsContainer,this.map,this.zoom_container),this.brush=new of(r,!1,this.map,".canvas-group"),this.map.canvas.callbackManager.set("resize",(()=>{"brush"===this.mode&&this.brush.toggle(!0)})),this.setUpSettingsMenu(this.mapToolsContainer),this.setUpButtonPanel(this.mapToolsContainer);const o=this.mapToolsContainer.append("div").attr("class","search-menu-container").append("div").attr("class","search-menu-container-inline");this.setUpMenuBar(o),this.setUpSearchBar(o),this.tooltip_container=new rg(this.mapToolsContainer,this.settings.get("tooltip_component"),this.zoom_container,this.map,this.settings),this.map.key_manager.assignedKeys=this.getKeys(),this.map.key_manager.inputList=[this.build_input,this.searchBarRef,()=>this.settingsMenuRef,this.text_edit_input],this.settings.get("enable_keys_with_tooltip")||this.map.key_manager.inputList.push(this.tooltip_container),this.map.key_manager.update(),this.map.key_manager.toggle(this.settings.get("enable_keys")),this.settings.streams.enable_keys.onValue((e=>{this.map.key_manager.toggle(e)}));const s=this.settings.get("disabled_buttons")||[];if(this.settings.get("reaction_data")||s.push("Clear reaction data"),this.settings.get("gene_data")||s.push("Clear gene data"),this.settings.get("metabolite_data")||s.push("Clear metabolite data"),this.settings.get("enable_search")||s.push("Find"),this.settings.get("enable_editing")||s.push("Show control points"),this.settings.set("disabled_buttons",s),this.settings.get("zoom_to_element")){const e=this.settings.get("zoom_to_element").type,t=this.settings.get("zoom_to_element").id;if(Hn.isUndefined(e)||-1===["reaction","node"].indexOf(e))throw new Error('zoom_to_element type must be "reaction" or "node"');if(Hn.isUndefined(t))throw new Error("zoom_to_element must include id");"reaction"===e?this.map.zoom_to_reaction(t):"node"===e&&this.map.zoom_to_node(t)}else if(e)this.map.zoom_extent_canvas();else if(this.settings.get("starting_reaction")&&null!==this.cobra_model){const e=this.zoom_container.get_size(),t={x:e.width/2,y:e.height/4};this.map.new_reaction_from_scratch(this.settings.get("starting_reaction"),t,90),this.map.zoom_extent_nodes()}else this.map.zoom_extent_canvas();this.settings.get("enable_editing")?this.zoom_mode():this.view_mode(),this.settings.streams.enable_editing.onValue((e=>{e?this.zoom_mode():this.view_mode()})),this.settings.get("enable_editing")&&this._setupConfirmBeforeExit(),this.map.draw_everything(),this.map.set_status(""),this.callback_manager.run("load_map",null,e,t)}passPropsSettingsMenu(e={}){this.map.callback_manager.run("pass_props_settings_menu",null,e)}setUpSettingsMenu(e){this.settingsMenuRef=null,cf(Uf,(e=>{this.settingsMenuRef=e}),(e=>this.map.callback_manager.set("pass_props_settings_menu",e)),e.append("div").node()),this.passPropsSettingsMenu({display:!1,settings:this.settings,map:this.map}),Hn.mapObject(this.settings.streams,((e,t)=>{e.onValue((e=>{this.passPropsSettingsMenu()}))})),this.settings.streams.reaction_styles.map((e=>Hn.contains(e,"abs"))).skipDuplicates().onValue((()=>this._updateData(!1,!0))),this.settings.streams.metabolite_styles.map((e=>Hn.contains(e,"abs"))).skipDuplicates().onValue((()=>this._updateData(!1,!0)))}passPropsMenuBar(e={}){this.map.callback_manager.run("pass_props_menu_bar",null,e)}setUpMenuBar(e){var t,n,r;this.menuBarRef=null,cf(Qf,(e=>{this.menuBarRef=e}),(e=>this.map.callback_manager.set("pass_props_menu_bar",e)),e.append("div").node()),this.passPropsMenuBar({display:"all"===this.settings.get("menu"),settings:this.settings,sel:this.selection,mode:this.mode,map:this.map,saveMap:()=>{this.semanticOptions&&(Object.entries(this.semanticOptions).map((([e,t])=>{this.settings.set(e,t)})),this._updateData()),this.map.save()},loadMap:e=>this.load_map(e),assignKeyLoadMap:e=>{this.map.key_manager.assignedKeys.load_map.fn=e},save_svg:()=>this.map.save_svg(),save_png:()=>this.map.save_png(),clear_map:()=>{this.clear_map()},loadModel:e=>this.load_model(e,!0),assignKeyLoadModel:e=>{this.map.key_manager.assignedKeys.load_model.fn=e},clearModel:()=>{this.load_model(null),this.callback_manager.run("clear_model")},updateRules:()=>this.map.convert_map(),setReactionData:e=>this.set_reaction_data(e),clearReactionData:()=>this.set_reaction_data(null),setGeneData:e=>this.set_gene_data(e),clearGeneData:()=>this.set_gene_data(null,!0),setMetaboliteData:e=>this.set_metabolite_data(e),clearMetaboliteData:e=>this.set_metabolite_data(null),setMode:e=>this._setMode(e),deleteSelected:()=>this.map.delete_selected(),undo:()=>this.map.undo_stack.undo(),redo:()=>this.map.undo_stack.redo(),align_vertical:()=>this.map.align_vertical(),align_horizontal:()=>this.map.align_horizontal(),togglePrimary:()=>this.map.toggle_selected_node_primary(),cyclePrimary:()=>this.map.cycle_primary_node(),selectAll:()=>this.map.select_all(),selectNone:()=>this.map.select_none(),invertSelection:()=>this.map.invert_selection(),zoom_in:()=>this.zoom_container.zoom_in(),zoom_out:()=>this.zoom_container.zoom_out(),zoomExtentNodes:()=>this.map.zoom_extent_nodes(),zoomExtentCanvas:()=>this.map.zoom_extent_canvas(),full_screen:()=>this.full_screen(),search:()=>this.passPropsSearchBar({display:!0}),toggleBeziers:()=>this.map.toggle_beziers(),renderSettingsMenu:()=>this.passPropsSettingsMenu({display:!0})}),this.map.callback_manager.set("toggle_beziers",(()=>{this.passPropsMenuBar()})),this.settings.streams.disabled_buttons.onValue((e=>{this.passPropsMenuBar()})),this.callback_manager.set("set_mode",(e=>{this.passPropsMenuBar({mode:e})})),this.settings.streams.menu.onValue((e=>{this.passPropsMenuBar({display:"all"===e})})),null===(t=this.settings.streams.saveAction)||void 0===t||t.onValue((e=>{this.passPropsMenuBar()})),null===(n=this.settings.streams.loadAction)||void 0===n||n.onValue((e=>{this.passPropsMenuBar()})),null===(r=this.settings.streams.pathFindingDisabled)||void 0===r||r.onValue((e=>{this.passPropsButtonPanel()})),this.settings.streams.full_screen_button.onValue((e=>{this.passPropsMenuBar()}))}passPropsSearchBar(e={}){this.map.callback_manager.run("pass_props_search_bar",null,e)}setUpSearchBar(e){this.searchBarRef=null,cf(Jf,(e=>{this.searchBarRef=e}),(e=>this.map.callback_manager.set("pass_props_search_bar",e)),e.append("div").node()),this.passPropsSearchBar({display:!1,searchIndex:this.map.search_index,map:this.map})}passPropsButtonPanel(e={}){this.map.callback_manager.run("pass_props_button_panel",null,e)}setUpButtonPanel(e){cf(ng,null,(e=>this.map.callback_manager.set("pass_props_button_panel",e)),e.append("div").node()),this.passPropsButtonPanel({display:Hn.contains(["all","zoom"],this.settings.get("menu")),mode:this.mode,settings:this.settings,setMode:e=>this._setMode(e),zoomContainer:this.zoom_container,map:this.map,buildInput:this.build_input,full_screen:()=>this.full_screen()}),this.callback_manager.set("set_mode",(e=>{this.passPropsButtonPanel({mode:e})})),this.settings.streams.full_screen_button.onValue((e=>{this.passPropsButtonPanel()}))}_setMode(e){this.mode=e,this.build_input.toggle("build"===e),this.build_input.direction_arrow.toggle("build"===e),this.brush.toggle("brush"===e),this.zoom_container.togglePanDrag("zoom"===e||"view"===e),this.map.canvas.toggleResize("view"!==e),"rotate"===e?(this.map.behavior.toggleSelectableDrag(!1),this.map.behavior.toggleRotationMode(!0)):(this.map.behavior.toggleRotationMode("rotate"===e),this.map.behavior.toggleSelectableDrag("brush"===e)),this.map.behavior.toggleSelectableClick("build"===e||"brush"===e),this.map.behavior.toggleLabelDrag("brush"===e),this.map.behavior.toggleTextLabelEdit("text"===e),this.map.behavior.toggleBezierDrag("brush"===e),"view"!==e&&"text"!==e||this.map.select_none(),"rotate"===e&&this.map.deselect_text_labels(),this.map.draw_everything(),this.callback_manager.run("set_mode",null,e)}view_mode(){this.callback_manager.run("view_mode"),this._setMode("view")}build_mode(){this.callback_manager.run("build_mode"),this._setMode("build")}brush_mode(){this.callback_manager.run("brush_mode"),this._setMode("brush")}zoom_mode(){this.callback_manager.run("zoom_mode"),this._setMode("zoom")}rotate_mode(){this.callback_manager.run("rotate_mode"),this._setMode("rotate")}text_mode(){this.callback_manager.run("text_mode"),this._setMode("text")}_reactionCheckAddAbs(){const e=this.settings.get("reaction_styles");return!this.settings.get("reaction_data")||this.has_custom_reaction_styles||Hn.contains(e,"abs")?null:(this.settings.set("reaction_styles",e.concat("abs")),()=>{this.map.set_status("Visualizing absolute value of reaction data. Change this option in Settings.",5e3)})}set_reaction_data(e){this.settings.set("reaction_data",e),e&&(this.settings.options.gene_data=null);const t=this._reactionCheckAddAbs();this._updateData(!0,!0,["reaction"]),t?t():this.map.set_status("");const n=this.settings.get("disabled_buttons")||[],r="Clear reaction data",i="Clear gene data",o=n.indexOf(r);e&&-1!==o?(n.splice(o,1),-1===n.indexOf(i)&&n.push(i),this.settings.set("disabled_buttons",n)):e||-1!==o||(n.push(r),this.settings.set("disabled_buttons",n)),this.tooltip_container.passProps({reactionData:e})}set_gene_data(e,t=!1){this.settings.set("gene_data",e),t&&this.settings.set("show_gene_reaction_rules",!1),e&&(this.settings.options.reaction_data=null,this.settings.set("show_gene_reaction_rules",!0)),this._updateData(!0,!0,["reaction"]),this.map.set_status("");const n=this.settings.get("disabled_buttons")||[],r=n.indexOf("Clear gene data");r>-1&&e?(n.splice(r,1),-1===n.indexOf("Clear reaction data")&&n.push("Clear reaction data"),this.settings.set("disabled_buttons",n)):-1!==r||e||(n.push("Clear gene data"),this.settings.set("disabled_buttons",n))}set_metabolite_data(e){this.settings.set("metabolite_data",e),this._updateData(!0,!0,["metabolite"]),this.map.set_status("");const t=this.settings.get("disabled_buttons")||[],n="Clear metabolite data",r=t.indexOf(n);r>-1&&e?(t.splice(r,1),this.settings.set("disabled_buttons",t)):-1!==r||e||(t.push(n),this.settings.set("disabled_buttons",t))}_makeGeneDataObject(e,t,n){const r={};return null!==t&&vl(r,t.reactions),null!==n&&vl(r,n.reactions,!0),Gc(e,"gene_data",r)}clear_map(){this.callback_manager.run("clear_map"),this.map.clearMapData(),this._updateData(!0,!0,["reaction","metabolite"],!1),this.map.draw_everything()}_updateData(e=!1,t=!1,n=["reaction","metabolite"],r=!0){const i=Hn.contains(n,"reaction"),o=Hn.contains(n,"metabolite");let s=null,a=null,l=null;o&&t&&null!==this.map&&(s=Gc(this.settings.get("metabolite_data"),"metabolite_data"),this.map.apply_metabolite_data_to_map(s),r&&this.map.draw_all_nodes(!1)),i&&(this.settings.get("reaction_data")&&t&&null!==this.map?(a=Gc(this.settings.get("reaction_data"),"reaction_data"),this.map.apply_reaction_data_to_map(a),r&&this.map.draw_all_reactions(!1,!1)):this.settings.get("gene_data")&&t&&null!==this.map?(l=this._makeGeneDataObject(this.settings.get("gene_data"),this.cobra_model,this.map),this.map.apply_gene_data_to_map(l),r&&this.map.draw_all_reactions(!1,!1)):t&&null!==this.map&&(this.map.apply_reaction_data_to_map(null),r&&this.map.draw_all_reactions(!1,!1))),this.update_model_timer&&clearTimeout(this.update_model_timer),this.update_model_timer=setTimeout((()=>{o&&e&&null!==this.cobra_model&&(s||(s=Gc(this.settings.get("metabolite_data"),"metabolite_data")),this.cobra_model.apply_metabolite_data(s,this.settings.get("metabolite_styles"),this.settings.get("metabolite_compare_style"))),i&&(this.settings.get("reaction_data")&&e&&null!==this.cobra_model?(a||(a=Gc(this.settings.get("reaction_data"),"reaction_data")),this.cobra_model.apply_reaction_data(a,this.settings.get("reaction_styles"),this.settings.get("reaction_compare_style"))):this.settings.get("gene_data")&&e&&null!==this.cobra_model?(l||(l=this._makeGeneDataObject(this.settings.get("gene_data"),this.cobra_model,this.map)),this.cobra_model.apply_gene_data(l,this.settings.get("reaction_styles"),this.settings.get("identifiers_on_map"),this.settings.get("reaction_compare_style"),this.settings.get("and_method_in_gene_reaction_rule"))):e&&null!==this.cobra_model&&this.cobra_model.apply_reaction_data(null,this.settings.get("reaction_styles"),this.settings.get("reaction_compare_style"))),this.callback_manager.run("update_data",null,e,t,n,r)}),5)}_createStatus(e){this.status_bar=e.append("div").attr("id","status")}_setupStatus(e){e.callback_manager.set("set_status",(e=>this.status_bar.html(e)))}_updateTooltipSetting(e){this.map.behavior.toggleLabelMouseover(e&&e.includes("label")),this.map.behavior.toggleObjectMouseover(e&&e.includes("object"))}getKeys(){const e=this.map,t=this.zoom_container;return{save:{key:"ctrl+s",target:e,fn:e.save},save_svg:{key:"ctrl+shift+s",target:e,fn:e.save_svg},save_png:{key:"ctrl+shift+p",target:e,fn:e.save_png},load_map:{key:"ctrl+o",fn:null},convert_map:{target:e,fn:e.convert_map},load_model:{key:"ctrl+m",fn:null},zoom_in_ctrl:{key:"ctrl+=",target:t,fn:t.zoom_in},zoom_in:{key:"=",target:t,fn:t.zoom_in,ignoreWithInput:!0},zoom_out_ctrl:{key:"ctrl+-",target:t,fn:t.zoom_out},zoom_out:{key:"-",target:t,fn:t.zoom_out,ignoreWithInput:!0},extent_nodes_ctrl:{key:"ctrl+0",target:e,fn:e.zoom_extent_nodes},extent_nodes:{key:"0",target:e,fn:e.zoom_extent_nodes,ignoreWithInput:!0},extent_canvas_ctrl:{key:"ctrl+1",target:e,fn:e.zoom_extent_canvas},extent_canvas:{key:"1",target:e,fn:e.zoom_extent_canvas,ignoreWithInput:!0},view_mode:{target:this,fn:this.view_mode,ignoreWithInput:!0},show_settings_ctrl:{key:"ctrl+,",fn:()=>this.passPropsSettingsMenu({display:!0})},show_settings:{key:",",fn:()=>this.passPropsSettingsMenu({display:!0}),ignoreWithInput:!0},build_mode:{key:"n",target:this,fn:this.build_mode,ignoreWithInput:!0,requires:"enable_editing"},zoom_mode:{key:"z",target:this,fn:this.zoom_mode,ignoreWithInput:!0,requires:"enable_editing"},brush_mode:{key:"v",target:this,fn:this.brush_mode,ignoreWithInput:!0,requires:"enable_editing"},rotate_mode:{key:"r",target:this,fn:this.rotate_mode,ignoreWithInput:!0,requires:"enable_editing"},text_mode:{key:"t",target:this,fn:this.text_mode,ignoreWithInput:!0,requires:"enable_editing"},toggle_beziers:{key:"b",target:e,fn:e.toggle_beziers,ignoreWithInput:!0,requires:"enable_editing"},delete_ctrl:{key:"ctrl+backspace",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},delete:{key:"backspace",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},delete_del:{key:"del",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},align_vertical:{key:"alt+l",target:e,fn:e.align_vertical},align_horizontal:{key:"shift+alt+l",target:e,fn:e.align_horizontal},toggle_primary:{key:"p",target:e,fn:e.toggle_selected_node_primary,ignoreWithInput:!0,requires:"enable_editing"},cycle_primary:{key:"c",target:e,fn:e.cycle_primary_node,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_right:{key:"right",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.right,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_down:{key:"down",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.down,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_left:{key:"left",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.left,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_up:{key:"up",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.up,ignoreWithInput:!0,requires:"enable_editing"},undo:{key:"ctrl+z",target:e.undo_stack,fn:e.undo_stack.undo,requires:"enable_editing"},redo:{key:"ctrl+shift+z",target:e.undo_stack,fn:e.undo_stack.redo,requires:"enable_editing"},select_all:{key:"ctrl+a",target:e,fn:e.select_all,ignoreWithInput:!0,requires:"enable_editing"},select_none:{key:"ctrl+shift+a",target:e,fn:e.select_none,ignoreWithInput:!0,requires:"enable_editing"},invert_selection:{target:e,fn:e.invert_selection,requires:"enable_editing"},search_ctrl:{key:"ctrl+f",fn:()=>this.passPropsSearchBar({display:!0}),requires:"enable_search"},search:{key:"f",fn:()=>this.passPropsSearchBar({display:!0}),ignoreWithInput:!0,requires:"enable_search"}}}_setupConfirmBeforeExit(){window.onbeforeunload=e=>this.settings.get("never_ask_before_quit")?null:"You will lose any unsaved changes."}full_screen(){const e=["menu","scroll_behavior","enable_editing","enable_keys","enable_tooltips"];if(this.isFullScreen){if(Sa("html").classed("fill-screen",!1),Sa("body").classed("fill-screen",!1),this.selection.classed("fill-screen-div",!1),this.isFullScreen=!1,this.clearFullScreenEscape&&(this.clearFullScreenEscape(),this.clearFullScreenEscape=null),this.savedFullScreenParent){const e=this.savedFullScreenParent.node();e.insertBefore(this.selection.remove().node(),e.firstChild),this.savedFullScreenParent=null}null!==this.savedFullScreenSettings&&Hn.mapObject(this.savedFullScreenSettings,((e,t)=>{this.settings.set(t,e)})),this.savedFullScreenSettings=null}else{const t=this.settings.get("full_screen_button");Hn.isObject(t)&&(this.savedFullScreenSettings=Hn.chain(t).pairs().map((([t,n])=>{if(Hn.contains(e,t)){const e=this.settings.get(t);return this.settings.set(t,n),[t,e]}return console.warn(`${t} not recognized as an option for full_screen_button`),[null,null]})).filter((([e,t])=>e)).object().value()),Sa("html").classed("fill-screen",!0),Sa("body").classed("fill-screen",!0),this.selection.classed("fill-screen-div",!0),this.isFullScreen=!0,this.savedFullScreenParent=Sa(this.selection.node().parentNode);const n=Sa("body").node();n.insertBefore(this.selection.remove().node(),n.firstChild),this.clearFullScreenEscape=this.map.key_manager.addEscapeListener((()=>this.full_screen()))}this.map.zoom_extent_canvas(),this.passPropsButtonPanel({isFullScreen:this.isFullScreen}),this.passPropsMenuBar({isFullScreen:this.isFullScreen})}getSavingState(){return{type:"Datagrok metabolic network",selectedNodes:Object.keys(this.map.getSelectedNodes()),lastAction:this.map.last_action,mapJson:this.map.map_for_export(),cobraModel:this.model_data,description:""}}loadSavingState(e){if(!e)return;const t=JSON.parse(e);t.mapJson&&(t.cobraModel&&this.load_model(t.cobraModel,!0),this.load_map(t.mapJson,!0),t.selectedNodes&&this.map.select_nodes(t.selectedNodes),t.lastAction&&t.lastAction.function&&t.lastAction.args&&t.lastAction.function in this.map&&(1==t.lastAction.args.length?this.map[t.lastAction.function](t.lastAction.args[0]):2==t.lastAction.args.length&&this.map[t.lastAction.function](t.lastAction.args[0],t.lastAction.args[1])),this.map.selectionChanged&&this.map.selectionChanged())}});function vg(e){const t=il(e,{selection:null,getdatafiles:null,datafiles:null,update_callback:null,target:null,data:null});if(null==t.selection)throw new Error("No selection provided for DataMenu");let n=t.selection.select(".data-menu");n.empty()&&(n=t.selection.append("div").attr("class","data-menu"));const r=n.append("form").append("select").attr("class","dropdown-menu");return t.getdatafiles?(t.datafiles&&console.warn("DataMenu: getdatafiles option overrides datafiles"),Va(t.getdatafiles,(function(e,n){return e?console.warn(e):(i(t.target,n.data,r,t.update_callback,t.selection),null)}))):t.datafiles?i(t.target,t.datafiles,r,t.update_callback,t.selection):console.warn("DataMenu: No datafiles given"),{update:s};function i(e,t,n,r,i){n.node().addEventListener("change",(function(){o(e,this.value,i,r)}),!1);const a=t[0];s(t,n),o(e,a,i,r)}function o(e,n,r,i){ll(e,n,(function(e,n){if(e)return r.append("error loading"),t.data=null,console.warn(e);t.data=n,i&&i(n)}))}function s(e,t){t.selectAll(".menu-option").data(e).enter().append("option").attr("value",(function(e){return e})).text((function(e){return e})),t.node().focus()}}const yg="1.0.0",wg={_:Hn,underscore:Hn,preact:qn.default,baconjs:t,mousetrap:gs(),vkbeautify:bs(),d3_selection:ka,d3_select:Sa,d3_json:Va}})(),r})()));
//# sourceMappingURL=escher.js.map